(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[202],{6202:(hi,pt,xe)=>{"use strict";xe.r(pt),xe.d(pt,{FaucetModule:()=>tr});var j=xe(6895),Ye=xe(4006),G=xe(6630),ue=xe(4550),$=xe(3546),K=xe(4144),B=xe(4859),Le=xe(7009),ce=xe(5861),Ue=xe(5376),we=xe(6003),de=xe(4323),Se=xe(5159),Xe=xe(2064),ft=xe(4304),ut=xe(9978),he=xe(6233);let jt=0;const Jt=function(){var I=(0,ce.Z)(function*({version:pe,contractBody:L,options:R}){const re=new Worker(URL.createObjectURL(new Blob([`(${he.q})()`],{type:"module"}))),Te=((I,pe)=>{const L={language:"Solidity",sources:{Compiled_Contracts:{content:I}},settings:{...pe,outputSelection:{"*":{"*":["*"]}}}};return JSON.stringify(L)})(L,R),Ge=jt++;return new Promise((qt,or)=>{const Ot=({data:Wt})=>{const{id:it,result:xt}=Wt;it===Ge&&(re.removeEventListener("message",Ot),re.removeEventListener("error",Ee),re.terminate(),qt(xt))},Ee=Wt=>{re.removeEventListener("message",Ot),re.removeEventListener("error",Ee),re.terminate(),or(Wt)};re.addEventListener("message",Ot),re.addEventListener("error",Ee),re.postMessage({id:Ge,input:Te,version:pe})})});return function(L){return I.apply(this,arguments)}}();var y=xe(4650),vt=xe(5004);const Pe=["ref"];function Nt(I){return I&&I.replace(/\r\n|\r/g,"\n")}let se=(()=>{class I{constructor(L,R){this._differs=L,this._ngZone=R,this.className="",this.name="codemirror",this.autoFocus=!1,this.preserveScrollPosition=!1,this.cursorActivity=new y.vpe,this.focusChange=new y.vpe,this.scroll=new y.vpe,this.drop=new y.vpe,this.codeMirrorLoaded=new y.vpe,this.value="",this.disabled=!1,this.isFocused=!1,this.onChange=re=>{},this.onTouched=()=>{}}set options(L){this._options=L,!this._differ&&L&&(this._differ=this._differs.find(L).create())}get codeMirrorGlobal(){return this._codeMirror||(this._codeMirror=typeof CodeMirror<"u"?CodeMirror:Promise.resolve().then(xe.t.bind(xe,8266,19))),this._codeMirror}ngAfterViewInit(){var L=this;this._ngZone.runOutsideAngular((0,ce.Z)(function*(){const R=yield L.codeMirrorGlobal;L.codeMirror=(R?.default?R.default:R).fromTextArea(L.ref.nativeElement,L._options),L.codeMirror.on("cursorActivity",Te=>L._ngZone.run(()=>L.cursorActive(Te))),L.codeMirror.on("scroll",L.scrollChanged.bind(L)),L.codeMirror.on("blur",()=>L._ngZone.run(()=>L.focusChanged(!1))),L.codeMirror.on("focus",()=>L._ngZone.run(()=>L.focusChanged(!0))),L.codeMirror.on("change",(Te,Ge)=>L._ngZone.run(()=>L.codemirrorValueChanged(Te,Ge))),L.codeMirror.on("drop",(Te,Ge)=>{L._ngZone.run(()=>L.dropFiles(Te,Ge))}),L.codeMirror.setValue(L.value),L.codeMirrorLoaded.emit(L)}))}ngDoCheck(){if(!this._differ)return;const L=this._differ.diff(this._options);L&&(L.forEachChangedItem(R=>this.setOptionIfChanged(R.key,R.currentValue)),L.forEachAddedItem(R=>this.setOptionIfChanged(R.key,R.currentValue)),L.forEachRemovedItem(R=>this.setOptionIfChanged(R.key,R.currentValue)))}ngOnDestroy(){this.codeMirror&&this.codeMirror.toTextArea()}codemirrorValueChanged(L,R){const re=L.getValue();this.value!==re&&(this.value=re,this.onChange(this.value))}setOptionIfChanged(L,R){this.codeMirror&&this.codeMirror.setOption(L,R)}focusChanged(L){this.onTouched(),this.isFocused=L,this.focusChange.emit(L)}scrollChanged(L){this.scroll.emit(L.getScrollInfo())}cursorActive(L){this.cursorActivity.emit(L)}dropFiles(L,R){this.drop.emit([L,R])}writeValue(L){if(null==L)return;if(!this.codeMirror)return void(this.value=L);const R=this.codeMirror.getValue();if(L!==R&&Nt(R)!==Nt(L))if(this.value=L,this.preserveScrollPosition){const re=this.codeMirror.getScrollInfo();this.codeMirror.setValue(this.value),this.codeMirror.scrollTo(re.left,re.top)}else this.codeMirror.setValue(this.value)}registerOnChange(L){this.onChange=L}registerOnTouched(L){this.onTouched=L}setDisabledState(L){this.disabled=L,this.setOptionIfChanged("readOnly",this.disabled)}}return I.\u0275fac=function(L){return new(L||I)(y.Y36(y.aQg),y.Y36(y.R0b))},I.\u0275cmp=y.Xpm({type:I,selectors:[["ngx-codemirror"]],viewQuery:function(L,R){if(1&L&&y.Gf(Pe,5),2&L){let re;y.iGM(re=y.CRH())&&(R.ref=re.first)}},inputs:{className:"className",name:"name",autoFocus:"autoFocus",options:"options",preserveScrollPosition:"preserveScrollPosition"},outputs:{cursorActivity:"cursorActivity",focusChange:"focusChange",scroll:"scroll",drop:"drop",codeMirrorLoaded:"codeMirrorLoaded"},features:[y._Bn([{provide:Ye.JU,useExisting:(0,y.Gpc)(()=>I),multi:!0}])],decls:3,vars:7,consts:[["autocomplete","off",3,"name","autofocus"],["ref",""]],template:function(L,R){1&L&&(y.TgZ(0,"textarea",0,1),y._uU(2,"    "),y.qZA()),2&L&&(y.Gre("ngx-codemirror ",R.className,""),y.ekj("ngx-codemirror--focused",R.isFocused),y.Q6J("name",R.name)("autofocus",R.autoFocus))},encapsulation:2,changeDetection:0}),I})(),Je=(()=>{class I{}return I.\u0275fac=function(L){return new(L||I)},I.\u0275mod=y.oAB({type:I}),I.\u0275inj=y.cJS({}),I})();var T=xe(1195),ee=xe(9549);function x(I,pe){1&I&&(y.TgZ(0,"span"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&I&&(y.xp6(1),y.Oqu(y.lcZ(2,1,"BTN_CONNECT_METAMASK")))}function q(I,pe){if(1&I&&(y.TgZ(0,"span"),y._uU(1),y.qZA()),2&I){const L=y.oxw();y.xp6(1),y.AsE("",L.userData.address.substring(0,6),"...",L.userData.address.slice(-6),"")}}function P(I,pe){if(1&I&&(y.TgZ(0,"option",20),y._uU(1),y.qZA()),2&I){const L=pe.$implicit;y.Q6J("value",L),y.xp6(1),y.hij(" ",L," ")}}function te(I,pe){if(1&I&&(y.TgZ(0,"li",23),y._uU(1),y.qZA()),2&I){const L=pe.$implicit;y.xp6(1),y.hij(" ",L.formattedMessage," ")}}function J(I,pe){if(1&I&&(y.TgZ(0,"div",21)(1,"h4"),y._uU(2,"Compiler Errors:"),y.qZA(),y.TgZ(3,"ul"),y.YNc(4,te,2,1,"li",22),y.qZA()()),2&I){const L=y.oxw();y.xp6(4),y.Q6J("ngForOf",L.compilerErrors)}}function nt(I,pe){if(1&I&&(y.TgZ(0,"option",20),y._uU(1),y.qZA()),2&I){const L=pe.$implicit;y.Q6J("value",L),y.xp6(1),y.hij(" ",L," ")}}function gt(I,pe){if(1&I){const L=y.EpF();y.TgZ(0,"div")(1,"h3",24),y._uU(2),y.ALo(3,"translate"),y.qZA(),y.TgZ(4,"mat-form-field",25)(5,"mat-label"),y._uU(6),y.ALo(7,"translate"),y.qZA(),y.TgZ(8,"select",12),y.NdJ("ngModelChange",function(re){y.CHM(L);const Te=y.oxw();return y.KtG(Te.selectedContractName=re)}),y.YNc(9,nt,2,2,"option",13),y.qZA()(),y.TgZ(10,"mat-form-field")(11,"input",26),y.NdJ("ngModelChange",function(re){y.CHM(L);const Te=y.oxw();return y.KtG(Te.commonGweiValue=re)}),y.ALo(12,"translate"),y.qZA()(),y.TgZ(13,"button",27),y.NdJ("click",function(){y.CHM(L);const re=y.oxw();return y.KtG(re.deploySelectedContract())}),y.TgZ(14,"i",15),y._uU(15," link "),y.qZA(),y._uU(16),y.ALo(17,"translate"),y.qZA()()}if(2&I){const L=y.oxw();y.xp6(2),y.Oqu(y.lcZ(3,7,"TITLE_CONTRACT_DEPLOYMENT")),y.xp6(4),y.Oqu(y.lcZ(7,9,"LABEL_COMPILED_CONTRACTS")),y.xp6(2),y.Q6J("ngModel",L.selectedContractName),y.xp6(1),y.Q6J("ngForOf",L.contractNames),y.xp6(2),y.Q6J("placeholder",y.lcZ(12,11,"GWEI_VALUE_FOR_SENDING_ETH"))("ngModel",L.commonGweiValue),y.xp6(5),y.hij(" ",y.lcZ(17,13,"BTN_DEPLOY_SELECTED_CONTRACT")," ")}}function S(I,pe){if(1&I&&(y.TgZ(0,"div",28),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&I){const L=y.oxw();y.xp6(1),y.AsE(" ",y.lcZ(2,2,"LABEL_CONTRACT_ADDRESS")," ",L.deployedContractAddress," ")}}function v(I,pe){if(1&I&&(y.TgZ(0,"div",38),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&I){const L=y.oxw(2).$implicit;y.xp6(1),y.lnq(" ",y.lcZ(2,3,"LABEL_OUTPUT_FOR")," ",L.name,": ",L.outputValue," ")}}function V(I,pe){if(1&I){const L=y.EpF();y.ynx(0),y.TgZ(1,"div",35)(2,"button",27),y.NdJ("click",function(){y.CHM(L);const re=y.oxw().$implicit,Te=y.oxw(2);return y.KtG(Te.invokeFunction(re))}),y.TgZ(3,"i",15),y._uU(4," call_to_action "),y.qZA(),y._uU(5),y.ALo(6,"translate"),y.qZA(),y.TgZ(7,"mat-form-field",11)(8,"textarea",36),y.NdJ("ngModelChange",function(re){y.CHM(L);const Te=y.oxw().$implicit;return y.KtG(Te.inputValues=re)}),y.qZA()()(),y.YNc(9,v,3,5,"div",37),y.BQk()}if(2&I){const L=y.oxw().$implicit;y.xp6(5),y.AsE(" ",y.lcZ(6,5,"BTN_INVOKE")," ",L.name," "),y.xp6(3),y.MGl("placeholder","(",L.inputHints,")"),y.Q6J("ngModel",L.inputValues),y.xp6(1),y.Q6J("ngIf",""!==L.outputValue)}}function be(I,pe){if(1&I&&(y.TgZ(0,"div",38),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&I){const L=y.oxw(2).$implicit;y.xp6(1),y.lnq(" ",y.lcZ(2,3,"LABEL_OUTPUT_FOR")," ",L.name,": ",L.outputValue," ")}}function U(I,pe){if(1&I){const L=y.EpF();y.TgZ(0,"div")(1,"button",27),y.NdJ("click",function(){y.CHM(L);const re=y.oxw().$implicit,Te=y.oxw(2);return y.KtG(Te.invokeFunction(re))}),y.TgZ(2,"i",15),y._uU(3," call_to_action "),y.qZA(),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.YNc(6,be,3,5,"div",37),y.qZA()}if(2&I){const L=y.oxw().$implicit;y.xp6(4),y.AsE(" ",y.lcZ(5,3,"BTN_INVOKE")," ",L.name," "),y.xp6(2),y.Q6J("ngIf",""!==L.outputValue)}}function Q(I,pe){if(1&I&&(y.TgZ(0,"div")(1,"div",32),y.YNc(2,V,10,7,"ng-container",33),y.YNc(3,U,7,5,"ng-template",null,34,y.W1O),y.qZA()()),2&I){const L=pe.$implicit,R=y.MAs(4);y.xp6(2),y.Q6J("ngIf",L.inputs.length>0)("ngIfElse",R)}}function N(I,pe){if(1&I&&(y.TgZ(0,"div"),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&I){const L=y.oxw(2);y.xp6(1),y.AsE("",y.lcZ(2,2,"LABEL_OUTPUT"),": ",L.invokeOutput,"")}}function D(I,pe){if(1&I&&(y.TgZ(0,"div",29)(1,"h3",10),y._uU(2,"TITLE_INTERACT_WITH_CONTRACT"),y.qZA(),y.YNc(3,Q,5,2,"div",30),y.TgZ(4,"div",31),y.YNc(5,N,3,4,"div",9),y.qZA()()),2&I){const L=y.oxw();y.xp6(3),y.Q6J("ngForOf",L.contractFunctions),y.xp6(2),y.Q6J("ngIf",""!==L.invokeOutput)}}(0,ft.j)({autoConnect:!0,provider:(0,we.yl)()});const{ethereum:_}=window,ae={"0.8.21":"soljson-v0.8.21+commit.d9974bed.js","0.8.9":"soljson-v0.8.9+commit.e5eed63a.js","0.7.6":"soljson-v0.7.6+commit.7338295f.js","0.6.12":"soljson-v0.6.12+commit.27d51765.js","0.5.17":"soljson-v0.5.17+commit.d19bba13.js","0.4.26":"soljson-v0.4.26+commit.4563c3fc.js","0.3.6":"soljson-v0.3.6+commit.3fc68da5.js","0.2.2":"soljson-v0.2.2+commit.ef92f566.js","0.1.7":"soljson-v0.1.7+commit.b4e666cc.js"};let Ce=(()=>{class I{constructor(L,R,re){this.keysService=L,this.snackBarHelperService=R,this.changeDetectorRef=re,this.session=!1,this.metamaskAddress="",this.compiledContracts=[],this.deployedContractAddress="",this.contractNames=[],this.commonGweiValue=0,this.contractFunctions=[],this.invokeOutput="",this.selectedCompilerVersion="0.8.21",this.compilerVersions=Object.keys(ae),this.compilerErrors=[],this.code="// SPDX-License-Identifier: MIT\npragma solidity ^0.8.14;\n\ncontract HelloWorld {\n    function get()public pure returns (string memory){\n        return 'Hello Contracts';\n    }\n}",this.editorOptions={mode:"text/x-solidity",theme:"dracula",lineNumbers:!0,lineWrapping:!0}}ngOnInit(){this.handleAuth(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}compileAndFetchContracts(L){var R=this;return(0,ce.Z)(function*(){try{R.deployedContractAddress="";const re=ae[R.selectedCompilerVersion];if(!re)return void console.error("Selected compiler version not found.");const Te={version:`https://binaries.soliditylang.org/bin/${re}`,contractBody:L},Ge=yield Jt(Te);Ge.errors&&Ge.errors.length>0&&!Ge.contracts?(R.compiledContracts=null,console.log(Ge.errors),R.compilerErrors.push(...Ge.errors)):(R.compilerErrors=[],console.log("output",Ge),R.compiledContracts=Ge.contracts.Compiled_Contracts,R.contractNames=Object.keys(R.compiledContracts),R.selectedContractName=R.contractNames[0])}catch(re){console.error("Error compiling contracts:",re)}})()}deploySelectedContract(){var L=this;return(0,ce.Z)(function*(){if(L.session)try{const re=L.compiledContracts[L.selectedContractName];if(!re)return void console.error("Selected contract not found.");const Ge=new de.Q(window.ethereum).getSigner(),or=re.abi,Ot=new Se.lV(or,re.evm.bytecode.object,Ge),Ee={};L.commonGweiValue>0&&(Ee.value=Xe.parseUnits(L.commonGweiValue.toString(),"gwei"));const Wt=yield Ot.deploy(Ee);yield Wt.deployed(),L.deployedContractAddress=Wt.address,L.contractFunctions=or.filter(it=>"function"===it.type).map(it=>{const xt=it.inputs.length>0?L.getInputHints(it.inputs):"No inputs";return{...it,inputValues:"",outputValue:"",inputHints:xt}}),console.log(L.contractFunctions)}catch(R){console.error("Error deploying contract:",R)}else L.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}getInputHints(L){return L.map(R=>`${R.name}: ${R.type}`).join(", ")}parseInputValue(L,R){return"bool"===R?"true"===L.toLowerCase():L}invokeFunction(L){var R=this;return(0,ce.Z)(function*(){if(R.session)try{const re=R.compiledContracts[R.selectedContractName],Ge=new de.Q(window.ethereum).getSigner(),qt=new Se.CH(R.deployedContractAddress,re.abi,Ge),or=""!==L.inputValues.trim()?L.inputValues.split(",").map((Wt,it)=>{const xt=L.inputs[it].type;return R.parseInputValue(Wt.trim(),xt)}):[],Ot={};R.commonGweiValue>0&&(Ot.value=Xe.parseUnits(R.commonGweiValue.toString(),"gwei"));const Ee=yield qt.functions[L.name](...or,Ot);if(console.log(Ee),L.outputs.length>0&&("view"===L.stateMutability||"pure"===L.stateMutability)){console.log("hello");const Wt=Ee[0].toString(),it=R.contractFunctions.find(xt=>xt.name===L.name);if(it){it.outputValue=Wt;const xt=R.contractFunctions.indexOf(L);-1!==xt&&(R.contractFunctions[xt]=it)}console.log(L.outputValue)}console.log("Invoked:",Ee)}catch(re){console.error("Error invoking function",re);const Te=R.contractFunctions.find(Ge=>Ge.name===L.name);if(Te){Te.outputValue=re.message;const Ge=R.contractFunctions.indexOf(L);-1!==Ge&&(R.contractFunctions[Ge]=Te)}}else R.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}handleChainChanged(L){var R=this;return(0,ce.Z)(function*(){yield R.handleAuth()})()}handleAuth(){var L=this;return(0,ce.Z)(function*(){try{const{isConnected:R}=(0,ut.D0)();if(R&&(yield(0,ut.zP)()),!window.ethereum)return void L.snackBarHelperService.open("PLEASE_INSTALL_WEB3_WALLET","errorBar");const re=yield(0,ut.$j)({connector:new ft.I});L.metamaskAddress=re.account,L.userData={address:re.account,chain:re.chain.id,network:"evm"},yield _.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const Te="11155111",Ge=String(re.chain?.id);re&&Ge!==Te?(L.session=!1,L.snackBarHelperService.open("PLEASE_CONNECT_TO_SEPOLIA_NETWORK","errorBar")):(console.log("Should show ethereum chain now"),L.session=!0),console.log("session",L.session),L.changeDetectorRef.detectChanges()}catch{console.log("An error occured")}})()}}return I.\u0275fac=function(L){return new(L||I)(y.Y36(Ue.t),y.Y36(vt.H),y.Y36(y.sBO))},I.\u0275cmp=y.Xpm({type:I,selectors:[["app-web3-sandbox"]],decls:36,vars:19,consts:[[1,"sandbox-container","mat-elevation-z6"],[1,"sandbox-container_body"],[1,"sandbox-container_body_left"],[1,"editor-title"],[3,"ngModel","options","ngModelChange"],[1,"sandbox-container_body_right"],[1,"playground-wallet"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],[4,"ngIf"],["translate",""],["appearance","outline","color","accent"],["matNativeControl","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-raised-button","",3,"click"],[1,"material-icons"],["class","error-container mat-elevation-z6",4,"ngIf"],["class","deployedaddresstext",4,"ngIf"],["class","invokecontainer mat-elevation-z6",4,"ngIf"],["src","assets/public/images/padding/11px.png"],[3,"value"],[1,"error-container","mat-elevation-z6"],["class","error",4,"ngFor","ngForOf"],[1,"error"],[1,"contracts-title"],["appearance","outline","color","accent",2,"width","45%","margin-right","10%"],["matInput","","type","number",3,"placeholder","ngModel","ngModelChange"],["mat-raised-button","","type","button",3,"click"],[1,"deployedaddresstext"],[1,"invokecontainer","mat-elevation-z6"],[4,"ngFor","ngForOf"],[1,"output-container","mat-elevation-z6"],[1,"function-container"],[4,"ngIf","ngIfElse"],["noInputs",""],[1,"functionwtext-container"],["matAutosizeMinRows","4","matAutosizeMaxRows","4","matTextareaAutosize","","matInput","",3,"placeholder","ngModel","ngModelChange"],["class","invoke-output",4,"ngIf"],[1,"invoke-output"]],template:function(L,R){1&L&&(y.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),y._uU(4),y.ALo(5,"translate"),y.qZA(),y.TgZ(6,"ngx-codemirror",4),y.NdJ("ngModelChange",function(Te){return R.code=Te}),y.qZA()(),y.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),y.NdJ("click",function(){return R.handleAuth()}),y.YNc(11,x,3,3,"span",9),y.YNc(12,q,2,2,"span",9),y.qZA()()(),y.TgZ(13,"h2",10),y._uU(14,"TITLE_WEB3_SANDBOX"),y.qZA(),y.TgZ(15,"ul")(16,"li",10),y._uU(17,"EXPLANATION_SMART_CONTRACT_DEPLOYMENT"),y.qZA(),y.TgZ(18,"li",10),y._uU(19,"EXPLANATION_GWEI_VALUE_POST_COMPILATION"),y.qZA()(),y.TgZ(20,"mat-form-field",11)(21,"mat-label"),y._uU(22),y.ALo(23,"translate"),y.qZA(),y.TgZ(24,"select",12),y.NdJ("ngModelChange",function(Te){return R.selectedCompilerVersion=Te}),y.YNc(25,P,2,2,"option",13),y.qZA()(),y.TgZ(26,"button",14),y.NdJ("click",function(){return R.compileAndFetchContracts(R.code)}),y.TgZ(27,"i",15),y._uU(28," build "),y.qZA(),y._uU(29),y.ALo(30,"translate"),y.qZA(),y.YNc(31,J,5,1,"div",16),y.YNc(32,gt,18,15,"div",9),y.YNc(33,S,3,4,"div",17),y.YNc(34,D,6,2,"div",18),y.qZA()(),y._UZ(35,"img",19),y.qZA()),2&L&&(y.xp6(4),y.Oqu(y.lcZ(5,13,"TITLE_CONTRACT_EDITOR")),y.xp6(2),y.Q6J("ngModel",R.code)("options",R.editorOptions),y.xp6(5),y.Q6J("ngIf",!R.session),y.xp6(1),y.Q6J("ngIf",R.session),y.xp6(10),y.Oqu(y.lcZ(23,15,"LABEL_SELECT_COMPILER_VERSION")),y.xp6(2),y.Q6J("ngModel",R.selectedCompilerVersion),y.xp6(1),y.Q6J("ngForOf",R.compilerVersions),y.xp6(4),y.hij(" ",y.lcZ(30,17,"BTN_COMPILE_CONTRACT")," "),y.xp6(2),y.Q6J("ngIf",R.compilerErrors.length>0),y.xp6(1),y.Q6J("ngIf",R.compiledContracts),y.xp6(1),y.Q6J("ngIf",R.deployedContractAddress),y.xp6(1),y.Q6J("ngIf",R.deployedContractAddress))},dependencies:[se,j.sg,j.O5,T.Pi,Ye.YN,Ye.Kr,Ye.Fj,Ye.wV,Ye.EJ,Ye.JJ,Ye.On,B.lW,ee.KE,ee.hX,K.Nt,T.X$],styles:[".playground-wallet[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:18px}.sandbox-container[_ngcontent-%COMP%]{margin:32px}.sandbox-container_body[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:32px;padding:40px}.sandbox-container_body_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:70%}.sandbox-container_body_right[_ngcontent-%COMP%]{align-items:flex-start;display:flex;flex-direction:column;width:30%}@media (max-width: 840px){.sandbox-container_body[_ngcontent-%COMP%]{flex-direction:column}.sandbox-container_body_left[_ngcontent-%COMP%], .sandbox-container_body_right[_ngcontent-%COMP%]{width:100%}}.deployedaddresstext[_ngcontent-%COMP%]{color:#2d972d;font-weight:600;margin:10px 0;word-break:break-all}.invokecontainer[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:16px;max-height:200px;overflow:scroll;padding:16px;width:100%}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:16px 0;max-height:300px;overflow:scroll;padding:16px}.error-container[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:12px;padding-left:16px}.editor-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500;margin-bottom:16px;padding:0 8px;width:100%}.function-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:8px}.functionwtext-container[_ngcontent-%COMP%]{align-items:flex-start;display:flex;justify-content:space-between;margin-top:8px}.output-container[_ngcontent-%COMP%]{display:flex;width:100%;word-break:break-all}.invoke-btncontainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.invoke-output[_ngcontent-%COMP%]{font-size:12px;padding:4px}h2[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]{padding-left:16px}.contracts-title[_ngcontent-%COMP%]{font-weight:500;margin-top:16px}"]}),I})();xe(4166),xe(521),xe(5140);var At=xe(8184);const me=[{path:"",component:Ce}];let tr=(()=>{class I{constructor(L,R){this.configurationService=L,this.overlayContainer=R,L.getApplicationConfiguration().subscribe(re=>{R.getContainerElement().classList.add(re.application.theme+"-theme")})}}return I.\u0275fac=function(L){return new(L||I)(y.LFG(ue.e),y.LFG(At.Xj))},I.\u0275mod=y.oAB({type:I}),I.\u0275inj=y.cJS({imports:[Je,j.ez,G.Bz.forChild(me),T.aw,Ye.u5,Ye.UX,B.ot,$.QW,K.c,Le.ZX]}),I})()},5140:(hi,pt,xe)=>{var j,Ye;!function G(ue,$,K){function B(Ue,we){if(!$[Ue]){if(!ue[Ue]){if(Le)return Le(Ue,!0);var Se=new Error("Cannot find module '"+Ue+"'");throw Se.code="MODULE_NOT_FOUND",Se}var Xe=$[Ue]={exports:{}};ue[Ue][0].call(Xe.exports,function(ft){return B(ue[Ue][1][ft]||ft)},Xe,Xe.exports,G,ue,$,K)}return $[Ue].exports}for(var Le=void 0,ce=0;ce<K.length;ce++)B(K[ce]);return B}({1:[function(G,ue,$){window.CodeMirror=G("codemirror"),G("./index")},{"./index":2,codemirror:3}],2:[function(G,ue,$){"use strict";const K=G("codemirror");K.defineMode("solidity",function(B){let ee,Le=B.indentUnit,ce={pragma:!0,solidity:!0,import:!0,as:!0,from:!0,contract:!0,constructor:!0,is:!0,function:!0,modifier:!0,pure:!0,view:!0,payable:!0,constant:!0,anonymous:!0,indexed:!0,returns:!0,return:!0,event:!0,struct:!0,mapping:!0,interface:!0,using:!0,library:!0,storage:!0,memory:!0,calldata:!0,public:!0,private:!0,external:!0,internal:!0,emit:!0,assembly:!0,abstract:!0,after:!0,catch:!0,final:!0,in:!0,inline:!0,let:!0,match:!0,null:!0,of:!0,relocatable:!0,static:!0,try:!0,typeof:!0,var:!0},Ue={pragma:!0,returns:!0,address:!0,contract:!0,function:!0,struct:!0},we={wei:!0,szabo:!0,finney:!0,ether:!0},de={seconds:!0,minutes:!0,hours:!0,days:!0,weeks:!0},Se={block:["coinbase","difficulty","gaslimit","number","timestamp"],msg:["data","sender","sig","value"],tx:["gasprice","origin"]},Xe={now:!0,gasleft:!0,blockhash:!0},ft={assert:!0,require:!0,revert:!0,throw:!0},ut={addmod:!0,mulmod:!0,keccak256:!0,sha256:!0,ripemd160:!0,ecrecover:!0},he={this:!0,selfdestruct:!0,super:!0},je={type:!0},jt={},Jt={if:!0,else:!0,while:!0,do:!0,for:!0,break:!0,continue:!0,switch:!0,case:!0,default:!0},rt={bool:!0,byte:!0,string:!0,enum:!0,address:!0},y={alias:!0,apply:!0,auto:!0,copyof:!0,define:!0,immutable:!0,implements:!0,macro:!0,mutable:!0,override:!0,partial:!0,promise:!0,reference:!0,sealed:!0,sizeof:!0,supports:!0,typedef:!0,unchecked:!0},vt={abi:["decode","encodePacked","encodeWithSelector","encodeWithSignature","encode"]},Pe=["transfer","send","balance","call","delegatecall","staticcall"],Nt=["title","author","notice","dev","param","return"],se={delete:!0,new:!0,true:!0,false:!0},Je=/[+\-*&^%:=<>!|\/~]/,T=/[-]/;function x(N,D){let le=N.next();if('"'==le||"'"==le||"`"==le)return D.tokenize=function q(N){return function(D,le){let ae,_=!1,Ce=!1;for(;null!=(ae=D.next());){if(ae==N&&!_){Ce=!0;break}_=!_&&"`"!=N&&"\\"==ae}return(Ce||!(_||"`"==N))&&(le.tokenize=x),"string"}}(le),D.tokenize(N,D);if(function te(N,D){if("pragma solidity"==D.lastToken)return D.lastToken=null,!D.startOfLine&&(N.match(/[\^{0}][0-9\.]+/)||N.match(/[\>\=]+?[\s]*[0-9\.]+[\s]*[\<]?[\s]*[0-9\.]+/))}(N,D))return"version";if("."==le&&Pe.some(function(Ce){return N.match(`${Ce}`)}))return"addressFunction";if(J(le,N))return"number";if(/[\[\]{}\(\),;\:\.]/.test(le))return function V(N,D){return","==N&&"functionName(variable"==D.para&&(D.para="functionName("),null!=D.para&&D.para.startsWith("functionName")&&(")"==N?D.para.endsWith("(")&&(D.para=D.para.substr(0,D.para.length-1),"functionName"==D.para&&(D.grammar="")):"("==N&&(D.para+=N)),"("==N&&"functionName"==D.lastToken?D.lastToken+=N:")"==N&&"functionName("==D.lastToken?D.lastToken=null:"("==N&&"returns"==D.lastToken?D.lastToken+=N:")"==N&&("returns("==D.lastToken||"returns(variable"==D.lastToken)&&(D.lastToken=null),"("==N&&"address"==D.lastToken&&(D.lastToken+=N),ee=N,null}(le,D);if("/"==le){if(N.eat("*"))return D.tokenize=P,P(N,D);if(N.match(/\/{2}/)){for(;le=N.next();)if("@"==le){N.backUp(1),D.grammar="doc";break}return"doc"}if(N.eat("/"))return N.skipToEnd(),"comment"}if(T.test(le))return J(N.peek(),N)?"number":"operator";if(Je.test(le))return N.eatWhile(Je),"operator";N.eatWhile(/[\w\$_\xa1-\uffff]/);let _=N.current();if("doc"==D.grammar)return Nt.some(function(Ce){return _==`@${Ce}`})?"docReserve":"doc";if("solidity"===_&&"pragma"==D.lastToken&&(D.lastToken=D.lastToken+" "+_),ce.propertyIsEnumerable(_))return("case"==_||"default"==_)&&(ee="case"),Ue.propertyIsEnumerable(_)&&(D.lastToken=_),"keyword";if(we.propertyIsEnumerable(_))return"etherUnit";if(he.propertyIsEnumerable(_))return"contractRelated";if(Jt.propertyIsEnumerable(_)||je.propertyIsEnumerable(_)||y.propertyIsEnumerable(_))return"keyword";if(rt.propertyIsEnumerable(_)||de.propertyIsEnumerable(_)||function nt(N){if(N.match(/^[u]?int/)){if(N.indexOf("t")+1==N.length)return!0;let D=N.substr(N.indexOf("t")+1,N.length);return D%8==0&&D<=256}}(_)||function gt(N){if(N.match(/^bytes/))return N.indexOf("s")+1==N.length||N.substr(N.indexOf("s")+1,N.length)<=32}(_)||function S(N){if(N.match(/^[u]?fixed([0-9]+x[0-9]+)?/)){if(N.indexOf("d")+1==N.length)return!0;let D=N.substr(N.indexOf("d")+1,N.length).split("x");return D[0]%8==0&&D[0]<=256&&D[1]<=80}}(_))return D.lastToken=D.lastToken+"variable","keyword";if(se.propertyIsEnumerable(_))return"atom";if(ft.propertyIsEnumerable(_))return"errorHandling";if(ut.propertyIsEnumerable(_))return"mathematicalAndCryptographic";if(Xe.propertyIsEnumerable(_)||Se.hasOwnProperty(_)&&Se[_].some(function(Ce){return N.match(`.${Ce}`)}))return"variable-2";if(vt.hasOwnProperty(_)&&vt[_].some(function(Ce){return N.match(`.${Ce}`)}))return"abi";let ae=function v(N,D){if(N.match(/^hex/)&&'"'==D.peek()){let _,le=!1,ae="",Ce="";for(;_=D.next();){if(Ce+=_,'"'==_&&le){if(ae=Ce.substring(1,Ce.length-1),ae.match(/^[0-9a-fA-F]+$/))return"number";D.backUp(Ce.length);break}le=le||'"'==_}}}(_,N);return ae??("functionName("!=D.lastToken&&"returns("!=D.lastToken||!jt.propertyIsEnumerable(_)?"function"==D.lastToken?(D.lastToken="functionName",null==D.para&&(D.grammar="function",D.para=""),D.para+="functionName","functionName"):"functionName(variable"==D.lastToken?(D.lastToken="functionName(","parameterValue"):"returns(variable"==D.lastToken?(D.lastToken="returns(","parameterValue"):("address"==D.lastToken&&"payable"==_&&(D.lastToken="address payable"),("contract"==D.lastToken||"struct"==D.lastToken)&&(jt[_]=!0,D.lastToken=null),"function"==D.grammar?"parameterValue":"variable"):(D.lastToken+="variable","variable"))}function P(N,D){let _,le=!1;for(;_=N.next();){if("/"==_&&le){D.tokenize=x;break}le="*"==_}return"comment"}function J(N,D){if(/[\d\.]/.test(N))return"."==N?D.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):"0"==N?D.match(/^[xX][0-9a-fA-F]+/)||D.match(/^0[0-7]+/):D.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),!0}function be(N,D,le,_,ae){this.indented=N,this.column=D,this.type=le,this.align=_,this.prev=ae}function U(N,D,le){return N.context=new be(N.indented,D,le,null,N.context)}return{startState:function(N){return{tokenize:null,context:new be((N||0)-Le,0,"top",!1),indented:0,startOfLine:!0}},token:function(N,D){let le=D.context;if(N.sol()&&(null==le.align&&(le.align=!1),D.indented=N.indentation(),D.startOfLine=!0,"case"==le.type&&(le.type="}"),"doc"==D.grammar&&(D.grammar=null)),N.eatSpace())return null;ee=null;let _=(D.tokenize||x)(N,D);return"comment"==_||(null==le.align&&(le.align=!0),"{"==ee?U(D,N.column(),"}"):"["==ee?U(D,N.column(),"]"):"("==ee?U(D,N.column(),")"):"case"==ee?le.type="case":("}"==ee&&"}"==le.type||ee==le.type)&&function Q(N){if(!N.context.prev)return;let D=N.context.type;(")"==D||"]"==D||"}"==D)&&(N.indented=N.context.indented),N.context=N.context.prev}(D),D.startOfLine=!1),_},indent:function(N,D){if(N.tokenize!=x&&null!=N.tokenize)return K.Pass;let le=N.context,_=D&&D.charAt(0);if("case"==le.type&&/^(?:case|default)\b/.test(D))return N.context.type="}",le.indented;let ae=_==le.type;return le.align?le.column+(ae?0:1):le.indented+(ae?0:Le)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),K.defineMIME("text/x-solidity","solidity")},{codemirror:3}],3:[function(G,ue,$){var B;B=function(){"use strict";var K=navigator.userAgent,B=navigator.platform,Le=/gecko\/\d/i.test(K),ce=/MSIE \d/.test(K),Ue=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(K),we=/Edge\/(\d+)/.exec(K),de=ce||Ue||we,Se=de&&(ce?document.documentMode||6:+(we||Ue)[1]),Xe=!we&&/WebKit\//.test(K),ft=Xe&&/Qt\/\d+\.\d+/.test(K),ut=!we&&/Chrome\//.test(K),he=/Opera\//.test(K),je=/Apple Computer/.test(navigator.vendor),jt=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(K),Jt=/PhantomJS/.test(K),rt=je&&(/Mobile\/\w+/.test(K)||navigator.maxTouchPoints>2),y=/Android/.test(K),vt=rt||y||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(K),Pe=rt||/Mac/.test(B),Nt=/\bCrOS\b/.test(K),se=/win/i.test(B),Je=he&&K.match(/Version\/(\d*\.\d*)/);Je&&(Je=Number(Je[1])),Je&&Je>=15&&(he=!1,Xe=!0);var T=Pe&&(ft||he&&(null==Je||Je<12.11)),ee=Le||de&&Se>=9;function x(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var gt,q=function(e,t){var n=e.className,i=x(t).exec(n);if(i){var l=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(l?i[1]+l:"")}};function P(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function te(e,t){return P(e).appendChild(t)}function J(e,t,n,i){var l=document.createElement(e);if(n&&(l.className=n),i&&(l.style.cssText=i),"string"==typeof t)l.appendChild(document.createTextNode(t));else if(t)for(var a=0;a<t.length;++a)l.appendChild(t[a]);return l}function nt(e,t,n,i){var l=J(e,t,n,i);return l.setAttribute("role","presentation"),l}function S(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function v(){var e;try{e=document.activeElement}catch{e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function V(e,t){var n=e.className;x(t).test(n)||(e.className+=(n?" ":"")+t)}function be(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!x(n[i]).test(t)&&(t+=" "+n[i]);return t}gt=document.createRange?function(e,t,n,i){var l=document.createRange();return l.setEnd(i||e,n),l.setStart(e,t),l}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch{return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var U=function(e){e.select()};function Q(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function N(e,t,n){for(var i in t||(t={}),e)e.hasOwnProperty(i)&&(!1!==n||!t.hasOwnProperty(i))&&(t[i]=e[i]);return t}function D(e,t,n,i,l){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var a=i||0,s=l||0;;){var u=e.indexOf("\t",a);if(u<0||u>=t)return s+(t-a);s+=u-a,s+=n-s%n,a=u+1}}rt?U=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:de&&(U=function(e){try{e.select()}catch{}});var le=function(){this.id=null,this.f=null,this.time=0,this.handler=Q(this.onTimeout,this)};function _(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}le.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},le.prototype.set=function(e,t){this.f=t;var n=+new Date+e;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=n)};var ae=50,Ce={toString:function(){return"CodeMirror.Pass"}},yt={scroll:!1},er={origin:"*mouse"},wt={origin:"+move"};function At(e,t,n){for(var i=0,l=0;;){var a=e.indexOf("\t",i);-1==a&&(a=e.length);var s=a-i;if(a==e.length||l+s>=t)return i+Math.min(s,t-l);if(l+=a-i,i=a+1,(l+=n-l%n)>=t)return i}}var me=[""];function tr(e){for(;me.length<=e;)me.push(I(me)+" ");return me[e]}function I(e){return e[e.length-1]}function pe(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function R(){}function re(e,t){var n;return Object.create?n=Object.create(e):(R.prototype=e,n=new R),t&&N(t,n),n}var Te=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ge(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Te.test(e))}function qt(e,t){return t?!!(t.source.indexOf("\\w")>-1&&Ge(e))||t.test(e):Ge(e)}function or(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var Ot=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Ee(e){return e.charCodeAt(0)>=768&&Ot.test(e)}function Wt(e,t,n){for(;(n<0?t>0:t<e.length)&&Ee(e.charAt(t));)t+=n;return t}function it(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var l=(t+n)/2,a=i<0?Math.ceil(l):Math.floor(l);if(a==t)return e(a)?t:n;e(a)?n=a:t=a+i}}var Bn=null;function Qt(e,t,n){var i;Bn=null;for(var l=0;l<e.length;++l){var a=e[l];if(a.from<t&&a.to>t)return l;a.to==t&&(a.from!=a.to&&"before"==n?i=l:Bn=l),a.from==t&&(a.from!=a.to&&"before"!=n?i=l:Bn=l)}return i??Bn}var Fo=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function n(c){return c<=247?e.charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1785?t.charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,l=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,u=/[1n]/;function f(c,h,d){this.level=c,this.from=h,this.to=d}return function(c,h){var d="ltr"==h?"L":"R";if(0==c.length||"ltr"==h&&!i.test(c))return!1;for(var g=c.length,m=[],w=0;w<g;++w)m.push(n(c.charCodeAt(w)));for(var k=0,M=d;k<g;++k){var A=m[k];"m"==A?m[k]=M:M=A}for(var E=0,W=d;E<g;++E){var H=m[E];"1"==H&&"r"==W?m[E]="n":a.test(H)&&(W=H,"r"==H&&(m[E]="R"))}for(var z=1,Y=m[0];z<g-1;++z){var fe=m[z];"+"==fe&&"1"==Y&&"1"==m[z+1]?m[z]="1":","==fe&&Y==m[z+1]&&("1"==Y||"n"==Y)&&(m[z]=Y),Y=fe}for(var ge=0;ge<g;++ge){var Ke=m[ge];if(","==Ke)m[ge]="N";else if("%"==Ke){var Ae=void 0;for(Ae=ge+1;Ae<g&&"%"==m[Ae];++Ae);for(var Re=ge&&"!"==m[ge-1]||Ae<g&&"1"==m[Ae]?"1":"N",tt=ge;tt<Ae;++tt)m[tt]=Re;ge=Ae-1}}for(var De=0,ze=d;De<g;++De){var Ne=m[De];"L"==ze&&"1"==Ne?m[De]="L":a.test(Ne)&&(ze=Ne)}for(var ke=0;ke<g;++ke)if(l.test(m[ke])){var He=void 0;for(He=ke+1;He<g&&l.test(m[He]);++He);for(var lt="L"==(ke?m[ke-1]:d),Tt=lt==("L"==(He<g?m[He]:d))?lt?"L":"R":d,Xt=ke;Xt<He;++Xt)m[Xt]=Tt;ke=He-1}for(var Mr,Ie=[],st=0;st<g;)if(s.test(m[st])){var vn=st;for(++st;st<g&&s.test(m[st]);++st);Ie.push(new f(0,vn,st))}else{var ir=st,Mt=Ie.length,Ar="rtl"==h?1:0;for(++st;st<g&&"L"!=m[st];++st);for(var Gt=ir;Gt<st;)if(u.test(m[Gt])){ir<Gt&&(Ie.splice(Mt,0,new f(1,ir,Gt)),Mt+=Ar);var Cl=Gt;for(++Gt;Gt<st&&u.test(m[Gt]);++Gt);Ie.splice(Mt,0,new f(2,Cl,Gt)),Mt+=Ar,ir=Gt}else++Gt;ir<st&&Ie.splice(Mt,0,new f(1,ir,st))}return"ltr"==h&&(1==Ie[0].level&&(Mr=c.match(/^\s+/))&&(Ie[0].from=Mr[0].length,Ie.unshift(new f(0,0,Mr[0].length))),1==I(Ie).level&&(Mr=c.match(/\s+$/))&&(I(Ie).to-=Mr[0].length,Ie.push(new f(0,g-Mr[0].length,g)))),"rtl"==h?Ie.reverse():Ie}}();function Z(e,t){var n=e.order;return null==n&&(n=e.order=Fo(e.text,t)),n}var di=[],ne=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||di).concat(n)}};function Ve(e,t){return e._handlers&&e._handlers[t]||di}function Fe(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,l=i&&i[t];if(l){var a=_(l,n);a>-1&&(i[t]=l.slice(0,a).concat(l.slice(a+1)))}}}function mt(e,t){var n=Ve(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),l=0;l<n.length;++l)n[l].apply(null,i)}function Be(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),mt(e,n||t.type,e,t),Kt(t)||t.codemirrorIgnore}function Zt(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==_(n,t[i])&&n.push(t[i])}function ot(e,t){return Ve(e,t).length>0}function mr(e){e.prototype.on=function(t,n){ne(this,t,n)},e.prototype.off=function(t,n){Fe(this,t,n)}}function Ht(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function zr(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Kt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Yr(e){Ht(e),zr(e)}function qi(e){return e.target||e.srcElement}function fr(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Pe&&e.ctrlKey&&1==t&&(t=3),t}var gn,_n,Sl=function(){if(de&&Se<9)return!1;var e=J("div");return"draggable"in e||"dragDrop"in e}();function Wo(e){if(null==gn){var t=J("span","\u200b");te(e,J("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(gn=t.offsetWidth<=1&&t.offsetHeight>2&&!(de&&Se<8))}var n=gn?J("span","\u200b"):J("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function mn(e){if(null!=_n)return _n;var t=te(e,document.createTextNode("A\u062eA")),n=gt(t,0,1).getBoundingClientRect(),i=gt(t,1,2).getBoundingClientRect();return P(e),!(!n||n.left==n.right)&&(_n=i.right-n.right<3)}var e,yr=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var l=e.indexOf("\n",t);-1==l&&(l=e.length);var a=e.slice(t,"\r"==e.charAt(l-1)?l-1:l),s=a.indexOf("\r");-1!=s?(n.push(a.slice(0,s)),t+=s+1):(n.push(a),t=l+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ur=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch{}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Ho="oncopy"in(e=J("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),cr=null,pi={},Dr={};function lr(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),pi[e]=t}function Nr(e){if("string"==typeof e&&Dr.hasOwnProperty(e))e=Dr[e];else if(e&&"string"==typeof e.name&&Dr.hasOwnProperty(e.name)){var t=Dr[e.name];"string"==typeof t&&(t={name:t}),(e=re(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Nr("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Nr("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function vi(e,t){t=Nr(t);var n=pi[t.name];if(!n)return vi(e,"text/plain");var i=n(e,t);if(ar.hasOwnProperty(t.name)){var l=ar[t.name];for(var a in l)l.hasOwnProperty(a)&&(i.hasOwnProperty(a)&&(i["_"+a]=i[a]),i[a]=l[a])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var s in t.modeProps)i[s]=t.modeProps[s];return i}var ar={};function xn(e,t){N(t,ar.hasOwnProperty(e)?ar[e]:ar[e]={})}function Or(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var l=t[i];l instanceof Array&&(l=l.concat([])),n[i]=l}return n}function ct(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function ie(e,t,n){return!e.startState||e.startState(t,n)}var $e=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function oe(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var l=n.children[i],a=l.chunkSize();if(t<a){n=l;break}t-=a}return n.lines[t]}function Rt(e,t,n){var i=[],l=t.line;return e.iter(t.line,n.line+1,function(a){var s=a.text;l==n.line&&(s=s.slice(0,n.ch)),l==t.line&&(s=s.slice(t.ch)),i.push(s),++l}),i}function _e(e,t,n){var i=[];return e.iter(t,n,function(l){i.push(l.text)}),i}function It(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function p(e){if(null==e.parent)return null;for(var t=e.parent,n=_(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var l=0;i.children[l]!=t;++l)n+=i.children[l].chunkSize();return n+t.first}function b(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var l=e.children[i],a=l.height;if(t<a){e=l;continue e}t-=a,n+=l.chunkSize()}return n}while(!e.lines);for(var s=0;s<e.lines.length;++s){var f=e.lines[s].height;if(t<f)break;t-=f}return n+s}function C(e,t){return t>=e.first&&t<e.first+e.size}function F(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function O(e,t,n){if(void 0===n&&(n=null),!(this instanceof O))return new O(e,t,n);this.line=e,this.ch=t,this.sticky=n}function X(e,t){return e.line-t.line||e.ch-t.ch}function We(e,t){return e.sticky==t.sticky&&0==X(e,t)}function Ct(e){return O(e.line,e.ch)}function Vt(e,t){return X(e,t)<0?t:e}function ve(e,t){return X(e,t)<0?e:t}function Ca(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function ye(e,t){if(t.line<e.first)return O(e.first,0);var n=e.first+e.size-1;return t.line>n?O(n,oe(e,n).text.length):function Io(e,t){var n=e.ch;return null==n||n>t?O(e.line,t):n<0?O(e.line,0):e}(t,oe(e,t.line).text.length)}function Er(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=ye(e,t[i]);return n}$e.prototype.eol=function(){return this.pos>=this.string.length},$e.prototype.sol=function(){return this.pos==this.lineStart},$e.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},$e.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},$e.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},$e.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},$e.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},$e.prototype.skipToEnd=function(){this.pos=this.string.length},$e.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},$e.prototype.backUp=function(e){this.pos-=e},$e.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=D(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?D(this.string,this.lineStart,this.tabSize):0)},$e.prototype.indentation=function(){return D(this.string,null,this.tabSize)-(this.lineStart?D(this.string,this.lineStart,this.tabSize):0)},$e.prototype.match=function(e,t,n){if("string"!=typeof e){var a=this.string.slice(this.pos).match(e);return a&&a.index>0?null:(a&&!1!==t&&(this.pos+=a[0].length),a)}var i=function(s){return n?s.toLowerCase():s};if(i(this.string.substr(this.pos,e.length))==i(e))return!1!==t&&(this.pos+=e.length),!0},$e.prototype.current=function(){return this.string.slice(this.start,this.pos)},$e.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},$e.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},$e.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var Zi=function(e,t){this.state=e,this.lookAhead=t},Fr=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function gi(e,t,n,i){var l=[e.state.modeGen],a={};ka(e,t.text,e.doc.mode,n,function(c,h){return l.push(c,h)},a,i);for(var s=n.state,u=function(c){n.baseTokens=l;var h=e.state.overlays[c],d=1,g=0;n.state=!0,ka(e,t.text,h.mode,n,function(m,w){for(var k=d;g<m;){var M=l[d];M>m&&l.splice(d,1,m,l[d+1],M),d+=2,g=Math.min(m,M)}if(w)if(h.opaque)l.splice(k,d-k,m,"overlay "+w),d=k+2;else for(;k<d;k+=2){var A=l[k+1];l[k+1]=(A?A+" ":"")+"overlay "+w}},a),n.state=s,n.baseTokens=null,n.baseTokenPos=1},f=0;f<e.state.overlays.length;++f)u(f);return{styles:l,classes:a.bgClass||a.textClass?a:null}}function Po(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=mi(e,p(t)),l=t.text.length>e.options.maxHighlightLength&&Or(e.doc.mode,i.state),a=gi(e,t,i);l&&(i.state=l),t.stateAfter=i.save(!l),t.styles=a.styles,a.classes?t.styleClasses=a.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function mi(e,t,n){var i=e.doc,l=e.display;if(!i.mode.startState)return new Fr(i,!0,t);var a=function La(e,t,n){for(var i,l,a=e.doc,s=n?-1:t-(e.doc.mode.innerMode?1e3:100),u=t;u>s;--u){if(u<=a.first)return a.first;var f=oe(a,u-1),c=f.stateAfter;if(c&&(!n||u+(c instanceof Zi?c.lookAhead:0)<=a.modeFrontier))return u;var h=D(f.text,null,e.options.tabSize);(null==l||i>h)&&(l=u-1,i=h)}return l}(e,t,n),s=a>i.first&&oe(i,a-1).stateAfter,u=s?Fr.fromSaved(i,s,a):new Fr(i,ie(i.mode),a);return i.iter(a,t,function(f){Ki(e,f.text,u);var c=u.line;f.stateAfter=c==t-1||c%5==0||c>=l.viewFrom&&c<l.viewTo?u.save():null,u.nextLine()}),n&&(i.modeFrontier=u.line),u}function Ki(e,t,n,i){var l=e.doc.mode,a=new $e(t,e.options.tabSize,n);for(a.start=a.pos=i||0,""==t&&kl(l,n.state);!a.eol();)Bo(l,a,n.state),a.start=a.pos}function kl(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=ct(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}}function Bo(e,t,n,i){for(var l=0;l<10;l++){i&&(i[0]=ct(e,n).mode);var a=e.token(t,n);if(t.pos>t.start)return a}throw new Error("Mode "+e.name+" failed to advance stream.")}Fr.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},Fr.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},Fr.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Fr.fromSaved=function(e,t,n){return t instanceof Zi?new Fr(e,Or(e.mode,t.state),n,t.lookAhead):new Fr(e,Or(e.mode,t),n)},Fr.prototype.save=function(e){var t=!1!==e?Or(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Zi(t,this.maxLookAhead):t};var Ll=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function Tl(e,t,n,i){var s,h,l=e.doc,a=l.mode,u=oe(l,(t=ye(l,t)).line),f=mi(e,t.line,n),c=new $e(u.text,e.options.tabSize,f);for(i&&(h=[]);(i||c.pos<t.ch)&&!c.eol();)c.start=c.pos,s=Bo(a,c,f.state),i&&h.push(new Ll(c,s,Or(l.mode,f.state)));return i?h:new Ll(c,s,f.state)}function Sa(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|\\s)"+n[2]+"(?:$|\\s)").test(t[i])||(t[i]+=" "+n[2])}return e}function ka(e,t,n,i,l,a,s){var u=n.flattenSpans;null==u&&(u=e.options.flattenSpans);var d,f=0,c=null,h=new $e(t,e.options.tabSize,i),g=e.options.addModeClass&&[null];for(""==t&&Sa(kl(n,i.state),a);!h.eol();){if(h.pos>e.options.maxHighlightLength?(u=!1,s&&Ki(e,t,i,h.pos),h.pos=t.length,d=null):d=Sa(Bo(n,h,i.state,g),a),g){var m=g[0].name;m&&(d="m-"+(d?m+" "+d:m))}if(!u||c!=d){for(;f<h.start;)l(f=Math.min(h.start,f+5e3),c);c=d}h.start=h.pos}for(;f<h.pos;){var w=Math.min(h.pos,f+5e3);l(w,c),f=w}}var Ta=!1,Jr=!1;function Ro(e,t,n){this.marker=e,this.from=t,this.to=n}function Xi(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function Ns(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Al(e,t){if(t.full)return null;var n=C(e,t.from.line)&&oe(e,t.from.line).markedSpans,i=C(e,t.to.line)&&oe(e,t.to.line).markedSpans;if(!n&&!i)return null;var l=t.from.ch,a=t.to.ch,s=0==X(t.from,t.to),u=function Ml(e,t,n){var i;if(e)for(var l=0;l<e.length;++l){var a=e[l],s=a.marker;null!=a.from&&!(s.inclusiveLeft?a.from<=t:a.from<t)&&(a.from!=t||"bookmark"!=s.type||n&&a.marker.insertLeft)||(i||(i=[])).push(new Ro(s,a.from,null==a.to||(s.inclusiveRight?a.to>=t:a.to>t)?null:a.to))}return i}(n,l,s),f=function Ma(e,t,n){var i;if(e)for(var l=0;l<e.length;++l){var a=e[l],s=a.marker;(null==a.to||(s.inclusiveRight?a.to>=t:a.to>t)||a.from==t&&"bookmark"==s.type&&(!n||a.marker.insertLeft))&&(i||(i=[])).push(new Ro(s,null==a.from||(s.inclusiveLeft?a.from<=t:a.from<t)?null:a.from-t,null==a.to?null:a.to-t))}return i}(i,a,s),c=1==t.text.length,h=I(t.text).length+(c?l:0);if(u)for(var d=0;d<u.length;++d){var g=u[d];if(null==g.to){var m=Xi(f,g.marker);m?c&&(g.to=null==m.to?null:m.to+h):g.to=l}}if(f)for(var w=0;w<f.length;++w){var k=f[w];null!=k.to&&(k.to+=h),null==k.from?Xi(u,k.marker)||(k.from=h,c&&(u||(u=[])).push(k)):(k.from+=h,c&&(u||(u=[])).push(k))}u&&(u=Dl(u)),f&&f!=u&&(f=Dl(f));var A=[u];if(!c){var W,E=t.text.length-2;if(E>0&&u)for(var H=0;H<u.length;++H)null==u[H].to&&(W||(W=[])).push(new Ro(u[H].marker,null,null));for(var z=0;z<E;++z)A.push(W);A.push(f)}return A}function Dl(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function ji(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Ji(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function yi(e){return e.inclusiveLeft?-1:0}function Qi(e){return e.inclusiveRight?1:0}function zo(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),l=t.find(),a=X(i.from,l.from)||yi(e)-yi(t);return a?-a:X(i.to,l.to)||Qi(e)-Qi(t)||t.id-e.id}function Vi(e,t){var i,n=Jr&&e.markedSpans;if(n)for(var l=void 0,a=0;a<n.length;++a)(l=n[a]).marker.collapsed&&null==(t?l.from:l.to)&&(!i||zo(i,l.marker)<0)&&(i=l.marker);return i}function Da(e){return Vi(e,!0)}function $i(e){return Vi(e,!1)}function Wr(e,t){var i,n=Jr&&e.markedSpans;if(n)for(var l=0;l<n.length;++l){var a=n[l];a.marker.collapsed&&(null==a.from||a.from<t)&&(null==a.to||a.to>t)&&(!i||zo(i,a.marker)<0)&&(i=a.marker)}return i}function Na(e,t,n,i,l){var a=oe(e,t),s=Jr&&a.markedSpans;if(s)for(var u=0;u<s.length;++u){var f=s[u];if(f.marker.collapsed){var c=f.marker.find(0),h=X(c.from,n)||yi(f.marker)-yi(l),d=X(c.to,i)||Qi(f.marker)-Qi(l);if(!(h>=0&&d<=0||h<=0&&d>=0)&&(h<=0&&(f.marker.inclusiveRight&&l.inclusiveLeft?X(c.to,n)>=0:X(c.to,n)>0)||h>=0&&(f.marker.inclusiveRight&&l.inclusiveLeft?X(c.from,i)<=0:X(c.from,i)<0)))return!0}}}function Gr(e){for(var t;t=Da(e);)e=t.find(-1,!0).line;return e}function qr(e,t){var n=oe(e,t),i=Gr(n);return n==i?t:p(i)}function Uo(e,t){if(t>e.lastLine())return t;var i,n=oe(e,t);if(!$t(e,n))return t;for(;i=$i(n);)n=i.find(1,!0).line;return p(n)+1}function $t(e,t){var n=Jr&&t.markedSpans;if(n)for(var i=void 0,l=0;l<n.length;++l)if((i=n[l]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&xi(e,t,i))return!0}}function xi(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return xi(e,i.line,Xi(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var l=void 0,a=0;a<t.markedSpans.length;++a)if((l=t.markedSpans[a]).marker.collapsed&&!l.marker.widgetNode&&l.from==n.to&&(null==l.to||l.to!=n.from)&&(l.marker.inclusiveLeft||n.marker.inclusiveRight)&&xi(e,t,l))return!0}function Hr(e){for(var t=0,n=(e=Gr(e)).parent,i=0;i<n.lines.length;++i){var l=n.lines[i];if(l==e)break;t+=l.height}for(var a=n.parent;a;a=(n=a).parent)for(var s=0;s<a.children.length;++s){var u=a.children[s];if(u==n)break;t+=u.height}return t}function Qr(e){if(0==e.height)return 0;for(var n,t=e.text.length,i=e;n=Da(i);){var l=n.find(0,!0);i=l.from.line,t+=l.from.ch-l.to.ch}for(i=e;n=$i(i);){var a=n.find(0,!0);t-=i.text.length-a.from.ch,t+=(i=a.to.line).text.length-a.to.ch}return t}function Ol(e){var t=e.display,n=e.doc;t.maxLine=oe(n,n.first),t.maxLineLength=Qr(t.maxLine),t.maxLineChanged=!0,n.iter(function(i){var l=Qr(i);l>t.maxLineLength&&(t.maxLineLength=l,t.maxLine=i)})}var bi=function(e,t,n){this.text=e,Ji(this,t),this.height=n?n(this):1};function Fs(e){e.parent=null,ji(e)}bi.prototype.lineNo=function(){return p(this)},mr(bi);var Ea={},Fa={};function Wa(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Fa:Ea;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ha(e,t){var n=nt("span",null,null,Xe?"padding-right: .1px":null),i={pre:nt("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var l=0;l<=(t.rest?t.rest.length:0);l++){var a=l?t.rest[l-1]:t.line,s=void 0;i.pos=0,i.addToken=Hs,mn(e.display.measure)&&(s=Z(a,e.doc.direction))&&(i.addToken=Is(i.addToken,s)),i.map=[],Go(a,i,Po(e,a,t!=e.display.externalMeasured&&p(a))),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=be(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=be(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Wo(e.display.measure))),0==l?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(Xe){var f=i.content.lastChild;(/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return mt(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=be(i.pre.className,i.textClass||"")),i}function Ws(e){var t=J("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Hs(e,t,n,i,l,a,s){if(t){var h,u=e.splitSpaces?function Ia(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",l=0;l<e.length;l++){var a=e.charAt(l);" "==a&&n&&(l==e.length-1||32==e.charCodeAt(l+1))&&(a="\xa0"),i+=a,n=" "==a}return i}(t,e.trailingSpace):t,f=e.cm.state.specialChars,c=!1;if(f.test(t)){h=document.createDocumentFragment();for(var d=0;;){f.lastIndex=d;var g=f.exec(t),m=g?g.index-d:t.length-d;if(m){var w=document.createTextNode(u.slice(d,d+m));h.appendChild(de&&Se<9?J("span",[w]):w),e.map.push(e.pos,e.pos+m,w),e.col+=m,e.pos+=m}if(!g)break;d+=m+1;var k=void 0;if("\t"==g[0]){var M=e.cm.options.tabSize,A=M-e.col%M;(k=h.appendChild(J("span",tr(A),"cm-tab"))).setAttribute("role","presentation"),k.setAttribute("cm-text","\t"),e.col+=A}else"\r"==g[0]||"\n"==g[0]?((k=h.appendChild(J("span","\r"==g[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",g[0]),e.col+=1):((k=e.cm.options.specialCharPlaceholder(g[0])).setAttribute("cm-text",g[0]),h.appendChild(de&&Se<9?J("span",[k]):k),e.col+=1);e.map.push(e.pos,e.pos+1,k),e.pos++}}else e.col+=t.length,h=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,h),de&&Se<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),n||i||l||c||a||s){var E=n||"";i&&(E+=i),l&&(E+=l);var W=J("span",[h],E,a);if(s)for(var H in s)s.hasOwnProperty(H)&&"style"!=H&&"class"!=H&&W.setAttribute(H,s[H]);return e.content.appendChild(W)}e.content.appendChild(h)}}function Is(e,t){return function(n,i,l,a,s,u,f){l=l?l+" cm-force-border":"cm-force-border";for(var c=n.pos,h=c+i.length;;){for(var d=void 0,g=0;g<t.length&&!((d=t[g]).to>c&&d.from<=c);g++);if(d.to>=h)return e(n,i,l,a,s,u,f);e(n,i.slice(0,d.to-c),l,a,null,u,f),a=null,i=i.slice(d.to-c),c=d.to}}}function El(e,t,n,i){var l=!i&&n.widgetNode;l&&e.map.push(e.pos,e.pos+t,l),!i&&e.cm.display.input.needsContentAttribute&&(l||(l=e.content.appendChild(document.createElement("span"))),l.setAttribute("cm-marker",n.id)),l&&(e.cm.display.input.setUneditable(l),e.content.appendChild(l)),e.pos+=t,e.trailingSpace=!1}function Go(e,t,n){var i=e.markedSpans,l=e.text,a=0;if(i)for(var d,g,w,k,M,A,E,u=l.length,f=0,c=1,h="",m=0;;){if(m==f){w=k=M=g="",E=null,A=null,m=1/0;for(var W=[],H=void 0,z=0;z<i.length;++z){var Y=i[z],fe=Y.marker;if("bookmark"==fe.type&&Y.from==f&&fe.widgetNode)W.push(fe);else if(Y.from<=f&&(null==Y.to||Y.to>f||fe.collapsed&&Y.to==f&&Y.from==f)){if(null!=Y.to&&Y.to!=f&&m>Y.to&&(m=Y.to,k=""),fe.className&&(w+=" "+fe.className),fe.css&&(g=(g?g+";":"")+fe.css),fe.startStyle&&Y.from==f&&(M+=" "+fe.startStyle),fe.endStyle&&Y.to==m&&(H||(H=[])).push(fe.endStyle,Y.to),fe.title&&((E||(E={})).title=fe.title),fe.attributes)for(var ge in fe.attributes)(E||(E={}))[ge]=fe.attributes[ge];fe.collapsed&&(!A||zo(A.marker,fe)<0)&&(A=Y)}else Y.from>f&&m>Y.from&&(m=Y.from)}if(H)for(var Ke=0;Ke<H.length;Ke+=2)H[Ke+1]==m&&(k+=" "+H[Ke]);if(!A||A.from==f)for(var Ae=0;Ae<W.length;++Ae)El(t,0,W[Ae]);if(A&&(A.from||0)==f){if(El(t,(null==A.to?u+1:A.to)-f,A.marker,null==A.from),null==A.to)return;A.to==f&&(A=!1)}}if(f>=u)break;for(var Re=Math.min(u,m);;){if(h){var tt=f+h.length;if(!A){var De=tt>Re?h.slice(0,Re-f):h;t.addToken(t,De,d?d+w:w,M,f+De.length==m?k:"",g,E)}if(tt>=Re){h=h.slice(Re-f),f=Re;break}f=tt,M=""}h=l.slice(a,a=n[c++]),d=Wa(n[c++],t.cm.options)}}else for(var s=1;s<n.length;s+=2)t.addToken(t,l.slice(a,a=n[s]),Wa(n[s+1],t.cm.options))}function Rn(e,t,n){this.line=t,this.rest=function Oa(e){for(var t,n;t=$i(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?p(I(this.rest))-n+1:1,this.node=this.text=null,this.hidden=$t(e,t)}function qo(e,t,n){for(var l,i=[],a=t;a<n;a=l){var s=new Rn(e.doc,oe(e.doc,a),a);l=a+s.size,i.push(s)}return i}var wi=null,to=null;function Et(e,t){var n=Ve(e,t);if(n.length){var l,i=Array.prototype.slice.call(arguments,2);wi?l=wi.delayedCallbacks:to?l=to:(l=to=[],setTimeout(ro,0));for(var a=function(u){l.push(function(){return n[u].apply(null,i)})},s=0;s<n.length;++s)a(s)}}function ro(){var e=to;to=null;for(var t=0;t<e.length;++t)e[t]()}function Pa(e,t,n,i){for(var l=0;l<t.changes.length;l++){var a=t.changes[l];"text"==a?Ba(e,t):"gutter"==a?_a(e,t,n,i):"class"==a?Fl(e,t):"widget"==a&&Ra(e,t,i)}t.changes=null}function Ci(e){return e.node==e.text&&(e.node=J("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),de&&Se<8&&(e.node.style.zIndex=2)),e.node}function Zo(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ha(e,t)}function Ba(e,t){var n=t.text.className,i=Zo(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,Fl(e,t)):n&&(t.text.className=n)}function Fl(e,t){(function Bs(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=Ci(t);t.background=i.insertBefore(J("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}})(e,t),t.line.wrapClass?Ci(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className=""),t.text.className=(t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass)||""}function _a(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var l=Ci(t);t.gutterBackground=J("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),l.insertBefore(t.gutterBackground,t.text)}var a=t.line.gutterMarkers;if(e.options.lineNumbers||a){var s=Ci(t),u=t.gutter=J("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(u.setAttribute("aria-hidden","true"),e.display.input.setUneditable(u),s.insertBefore(u,t.text),t.line.gutterClass&&(u.className+=" "+t.line.gutterClass),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(t.lineNumber=u.appendChild(J("div",F(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),a)for(var f=0;f<e.display.gutterSpecs.length;++f){var c=e.display.gutterSpecs[f].className,h=a.hasOwnProperty(c)&&a[c];h&&u.appendChild(J("div",[h],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function Ra(e,t,n){t.alignable&&(t.alignable=null);for(var i=x("CodeMirror-linewidget"),l=t.node.firstChild,a=void 0;l;l=a)a=l.nextSibling,i.test(l.className)&&t.node.removeChild(l);Ua(e,t,n)}function za(e,t,n,i){var l=Zo(e,t);return t.text=t.node=l.pre,l.bgClass&&(t.bgClass=l.bgClass),l.textClass&&(t.textClass=l.textClass),Fl(e,t),_a(e,t,n,i),Ua(e,t,i),t.node}function Ua(e,t,n){if(Si(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)Si(e,t.rest[i],t,n,!1)}function Si(e,t,n,i,l){if(t.widgets)for(var a=Ci(n),s=0,u=t.widgets;s<u.length;++s){var f=u[s],c=J("div",[f.node],"CodeMirror-linewidget"+(f.className?" "+f.className:""));f.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Vr(f,c,n,i),e.display.input.setUneditable(c),l&&f.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),Et(f,"redraw")}}function Vr(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var l=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(l-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=l+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function bn(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!S(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),te(t.display.measure,J("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function Ir(e,t){for(var n=qi(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function no(e){return e.lineSpace.offsetTop}function xr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function wn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=te(e.measure,J("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(i.left)&&!isNaN(i.right)&&(e.cachedPaddingH=i),i}function br(e){return ae-e.display.nativeBarWidth}function zn(e){return e.display.scroller.clientWidth-br(e)-e.display.barWidth}function Ko(e){return e.display.scroller.clientHeight-br(e)-e.display.barHeight}function Wl(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var l=0;l<e.rest.length;l++)if(p(e.rest[l])>n)return{map:e.measure.maps[l],cache:e.measure.caches[l],before:!0}}}function Un(e,t,n,i){return Pr(e,Gn(e,t),n,i)}function wr(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[sr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Gn(e,t){var n=p(t),i=wr(e,n);i&&!i.text?i=null:i&&i.changes&&(Pa(e,i,n,$o(e)),e.curOp.forceUpdate=!0),i||(i=function Hl(e,t){var n=p(t=Gr(t)),i=e.display.externalMeasured=new Rn(e.doc,t,n);i.lineN=n;var l=i.built=Ha(e,i);return i.text=l.pre,te(e.display.lineMeasure,l.pre),i}(e,t));var l=Wl(i,t,n);return{line:t,view:i,rect:null,map:l.map,cache:l.cache,before:l.before,hasHeights:!1}}function Pr(e,t,n,i,l){t.before&&(n=-1);var s,a=n+(i||"");return t.cache.hasOwnProperty(a)?s=t.cache[a]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function _s(e,t,n){var i=e.options.lineWrapping,l=i&&zn(e);if(!t.measure.heights||i&&t.measure.width!=l){var a=t.measure.heights=[];if(i){t.measure.width=l;for(var s=t.text.firstChild.getClientRects(),u=0;u<s.length-1;u++){var f=s[u],c=s[u+1];Math.abs(f.bottom-c.bottom)>2&&a.push((f.bottom+c.top)/2-n.top)}}a.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),s=function Za(e,t,n,i){var c,l=qa(t.map,n,i),a=l.node,s=l.start,u=l.end,f=l.collapse;if(3==a.nodeType){for(var h=0;h<4;h++){for(;s&&Ee(t.line.text.charAt(l.coverStart+s));)--s;for(;l.coverStart+u<l.coverEnd&&Ee(t.line.text.charAt(l.coverStart+u));)++u;if((c=de&&Se<9&&0==s&&u==l.coverEnd-l.coverStart?a.parentNode.getBoundingClientRect():Rs(gt(a,s,u).getClientRects(),i)).left||c.right||0==s)break;u=s,s-=1,f="right"}de&&Se<11&&(c=function Ka(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function yn(e){if(null!=cr)return cr;var t=te(e,J("span","x")),n=t.getBoundingClientRect(),i=gt(t,0,1).getBoundingClientRect();return cr=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,c))}else{var d;s>0&&(f=i="right"),c=e.options.lineWrapping&&(d=a.getClientRects()).length>1?d["right"==i?d.length-1:0]:a.getBoundingClientRect()}if(de&&Se<9&&!s&&(!c||!c.left&&!c.right)){var g=a.parentNode.getClientRects()[0];c=g?{left:g.left,right:g.left+Sn(e.display),top:g.top,bottom:g.bottom}:Ga}for(var m=c.top-t.rect.top,w=c.bottom-t.rect.top,k=(m+w)/2,M=t.view.measure.heights,A=0;A<M.length-1&&!(k<M[A]);A++);var H={left:("right"==f?c.right:c.left)-t.rect.left,right:("left"==f?c.left:c.right)-t.rect.left,top:A?M[A-1]:0,bottom:M[A]};return!c.left&&!c.right&&(H.bogus=!0),e.options.singleCursorHeightPerLine||(H.rtop=m,H.rbottom=w),H}(e,t,n,i),s.bogus||(t.cache[a]=s)),{left:s.left,right:s.right,top:l?s.rtop:s.top,bottom:l?s.rbottom:s.bottom}}var Sr,Ga={left:0,right:0,top:0,bottom:0};function qa(e,t,n){for(var i,l,a,s,u,f,c=0;c<e.length;c+=3)if(f=e[c+1],t<(u=e[c])?(l=0,a=1,s="left"):t<f?a=1+(l=t-u):(c==e.length-3||t==f&&e[c+3]>t)&&(l=(a=f-u)-1,t>=f&&(s="right")),null!=l){if(i=e[c+2],u==f&&n==(i.insertLeft?"left":"right")&&(s=n),"left"==n&&0==l)for(;c&&e[c-2]==e[c-3]&&e[c-1].insertLeft;)i=e[2+(c-=3)],s="left";if("right"==n&&l==f-u)for(;c<e.length-3&&e[c+3]==e[c+4]&&!e[c+5].insertLeft;)i=e[(c+=3)+2],s="right";break}return{node:i,start:l,end:a,collapse:s,coverStart:u,coverEnd:f}}function Rs(e,t){var n=Ga;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var l=e.length-1;l>=0&&(n=e[l]).left==n.right;l--);return n}function ki(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Il(e){e.display.externalMeasure=null,P(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ki(e.display.view[t])}function Li(e){Il(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Yo(){return ut&&y?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function io(){return ut&&y?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Xo(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=bn(e.widgets[n]));return t}function qn(e,t,n,i,l){if(!l){var a=Xo(t);n.top+=a,n.bottom+=a}if("line"==i)return n;i||(i="local");var s=Hr(t);if("local"==i?s+=no(e.display):s-=e.display.viewOffset,"page"==i||"window"==i){var u=e.display.lineSpace.getBoundingClientRect();s+=u.top+("window"==i?0:io());var f=u.left+("window"==i?0:Yo());n.left+=f,n.right+=f}return n.top+=s,n.bottom+=s,n}function Cr(e,t,n){if("div"==n)return t;var i=t.left,l=t.top;if("page"==n)i-=Yo(),l-=io();else if("local"==n||!n){var a=e.display.sizer.getBoundingClientRect();i+=a.left,l+=a.top}var s=e.display.lineSpace.getBoundingClientRect();return{left:i-s.left,top:l-s.top}}function oo(e,t,n,i,l){return i||(i=oe(e.doc,t.line)),qn(e,i,Un(e,i,t.ch,l),n)}function hr(e,t,n,i,l,a){function s(w,k){var M=Pr(e,l,w,k?"right":"left",a);return k?M.left=M.right:M.right=M.left,qn(e,i,M,n)}i=i||oe(e.doc,t.line),l||(l=Gn(e,i));var u=Z(i,e.doc.direction),f=t.ch,c=t.sticky;if(f>=i.text.length?(f=i.text.length,c="before"):f<=0&&(f=0,c="after"),!u)return s("before"==c?f-1:f,"before"==c);function h(w,k,M){return s(M?w-1:w,1==u[k].level!=M)}var d=Qt(u,f,c),g=Bn,m=h(f,d,"before"==c);return null!=g&&(m.other=h(f,g,"before"!=c)),m}function jo(e,t){var n=0;t=ye(e.doc,t),e.options.lineWrapping||(n=Sn(e.display)*t.ch);var i=oe(e.doc,t.line),l=Hr(i)+no(e.display);return{left:n,right:n,top:l,bottom:l+i.height}}function Jo(e,t,n,i,l){var a=O(e,t,n);return a.xRel=l,i&&(a.outside=i),a}function Qo(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Jo(i.first,0,null,-1,-1);var l=b(i,n),a=i.first+i.size-1;if(l>a)return Jo(i.first+i.size-1,oe(i,a).text.length,null,1,1);t<0&&(t=0);for(var s=oe(i,l);;){var u=zs(e,s,l,t,n),f=Wr(s,u.ch+(u.xRel>0||u.outside>0?1:0));if(!f)return u;var c=f.find(1);if(c.line==l)return c;s=oe(i,l=c.line)}}function Vo(e,t,n,i){i-=Xo(t);var l=t.text.length,a=it(function(s){return Pr(e,n,s-1).bottom<=i},l,0);return{begin:a,end:l=it(function(s){return Pr(e,n,s).top>i},a,l)}}function Ya(e,t,n,i){return n||(n=Gn(e,t)),Vo(e,t,n,qn(e,t,Pr(e,n,i),"line").top)}function Pl(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function zs(e,t,n,i,l){l-=Hr(t);var a=Gn(e,t),s=Xo(t),u=0,f=t.text.length,c=!0,h=Z(t,e.doc.direction);if(h){var d=(e.options.lineWrapping?Ti:Zn)(e,t,n,a,h,i,l);u=(c=1!=d.level)?d.from:d.to-1,f=c?d.to:d.from-1}var k,M,g=null,m=null,w=it(function(z){var Y=Pr(e,a,z);return Y.top+=s,Y.bottom+=s,!!Pl(Y,i,l,!1)&&(Y.top<=l&&Y.left<=i&&(g=z,m=Y),!0)},u,f),A=!1;if(m){var E=i-m.left<m.right-i,W=E==c;w=g+(W?0:1),M=W?"after":"before",k=E?m.left:m.right}else{!c&&(w==f||w==u)&&w++,M=0==w?"after":w==t.text.length?"before":Pr(e,a,w-(c?1:0)).bottom+s<=l==c?"after":"before";var H=hr(e,O(n,w,M),"line",t,a);k=H.left,A=l<H.top?-1:l>=H.bottom?1:0}return Jo(n,w=Wt(t.text,w,1),M,A,i-k)}function Zn(e,t,n,i,l,a,s){var u=it(function(d){var g=l[d],m=1!=g.level;return Pl(hr(e,O(n,m?g.to:g.from,m?"before":"after"),"line",t,i),a,s,!0)},0,l.length-1),f=l[u];if(u>0){var c=1!=f.level,h=hr(e,O(n,c?f.from:f.to,c?"after":"before"),"line",t,i);Pl(h,a,s,!0)&&h.top>s&&(f=l[u-1])}return f}function Ti(e,t,n,i,l,a,s){var u=Vo(e,t,i,s),f=u.begin,c=u.end;/\s/.test(t.text.charAt(c-1))&&c--;for(var h=null,d=null,g=0;g<l.length;g++){var m=l[g];if(!(m.from>=c||m.to<=f)){var k=Pr(e,i,1!=m.level?Math.min(c,m.to)-1:Math.max(f,m.from)).right,M=k<a?a-k+1e9:k-a;(!h||d>M)&&(h=m,d=M)}}return h||(h=l[l.length-1]),h.from<f&&(h={from:f,to:h.to,level:h.level}),h.to>c&&(h={from:h.from,to:c,level:h.level}),h}function Cn(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Sr){Sr=J("pre",null,"CodeMirror-line-like");for(var t=0;t<49;++t)Sr.appendChild(document.createTextNode("x")),Sr.appendChild(J("br"));Sr.appendChild(document.createTextNode("x"))}te(e.measure,Sr);var n=Sr.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),P(e.measure),n||1}function Sn(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=J("span","xxxxxxxxxx"),n=J("pre",[t],"CodeMirror-line-like");te(e.measure,n);var i=t.getBoundingClientRect(),l=(i.right-i.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function $o(e){for(var t=e.display,n={},i={},l=t.gutters.clientLeft,a=t.gutters.firstChild,s=0;a;a=a.nextSibling,++s){var u=e.display.gutterSpecs[s].className;n[u]=a.offsetLeft+a.clientLeft+l,i[u]=a.clientWidth}return{fixedPos:lo(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function lo(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function kn(e){var t=Cn(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Sn(e.display)-3);return function(l){if($t(e.doc,l))return 0;var a=0;if(l.widgets)for(var s=0;s<l.widgets.length;s++)l.widgets[s].height&&(a+=l.widgets[s].height);return n?a+(Math.ceil(l.text.length/i)||1)*t:a+t}}function $r(e){var t=e.doc,n=kn(e);t.iter(function(i){var l=n(i);l!=i.height&&It(i,l)})}function Dt(e,t,n,i){var l=e.display;if(!n&&"true"==qi(t).getAttribute("cm-not-content"))return null;var a,s,u=l.lineSpace.getBoundingClientRect();try{a=t.clientX-u.left,s=t.clientY-u.top}catch{return null}var c,f=Qo(e,a,s);if(i&&f.xRel>0&&(c=oe(e.doc,f.line).text).length==f.ch){var h=D(c,c.length,e.options.tabSize)-c.length;f=O(f.line,Math.max(0,Math.round((a-wn(e.display).left)/Sn(e.display))-h))}return f}function sr(e,t){if(t>=e.display.viewTo||(t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function St(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var l=e.display;if(i&&n<l.viewTo&&(null==l.updateLineNumbers||l.updateLineNumbers>t)&&(l.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=l.viewTo)Jr&&qr(e.doc,t)<l.viewTo&&Ln(e);else if(n<=l.viewFrom)Jr&&Uo(e.doc,n+i)>l.viewFrom?Ln(e):(l.viewFrom+=i,l.viewTo+=i);else if(t<=l.viewFrom&&n>=l.viewTo)Ln(e);else if(t<=l.viewFrom){var a=ao(e,n,n+i,1);a?(l.view=l.view.slice(a.index),l.viewFrom=a.lineN,l.viewTo+=i):Ln(e)}else if(n>=l.viewTo){var s=ao(e,t,t,-1);s?(l.view=l.view.slice(0,s.index),l.viewTo=s.lineN):Ln(e)}else{var u=ao(e,t,t,-1),f=ao(e,n,n+i,1);u&&f?(l.view=l.view.slice(0,u.index).concat(qo(e,u.lineN,f.lineN)).concat(l.view.slice(f.index)),l.viewTo+=i):Ln(e)}var c=l.externalMeasured;c&&(n<c.lineN?c.lineN+=i:t<c.lineN+c.size&&(l.externalMeasured=null))}function Br(e,t,n){e.curOp.viewChanged=!0;var i=e.display,l=e.display.externalMeasured;if(l&&t>=l.lineN&&t<l.lineN+l.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var a=i.view[sr(e,t)];if(null!=a.node){var s=a.changes||(a.changes=[]);-1==_(s,n)&&s.push(n)}}}function Ln(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function ao(e,t,n,i){var a,l=sr(e,t),s=e.display.view;if(!Jr||n==e.doc.first+e.doc.size)return{index:l,lineN:n};for(var u=e.display.viewFrom,f=0;f<l;f++)u+=s[f].size;if(u!=t){if(i>0){if(l==s.length-1)return null;a=u+s[l].size-t,l++}else a=u-t;t+=a,n+=a}for(;qr(e.doc,n)!=n;){if(l==(i<0?0:s.length-1))return null;n+=i*s[l-(i<0?1:0)].size,l+=i}return{index:l,lineN:n}}function Bl(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var l=t[i];!l.hidden&&(!l.node||l.changes)&&++n}return n}function Kn(e){e.display.input.showSelection(e.display.input.prepareSelection())}function uo(e,t){void 0===t&&(t=!0);var n=e.doc,i={},l=i.cursors=document.createDocumentFragment(),a=i.selection=document.createDocumentFragment(),s=e.options.$customCursor;s&&(t=!0);for(var u=0;u<n.sel.ranges.length;u++)if(t||u!=n.sel.primIndex){var f=n.sel.ranges[u];if(!(f.from().line>=e.display.viewTo||f.to().line<e.display.viewFrom)){var c=f.empty();if(s){var h=s(e,f);h&&_l(e,h,l)}else(c||e.options.showCursorWhenSelecting)&&_l(e,f.head,l);c||Xa(e,f,a)}}return i}function _l(e,t,n){var i=hr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),l=n.appendChild(J("div","\xa0","CodeMirror-cursor"));if(l.style.left=i.left+"px",l.style.top=i.top+"px",l.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var a=oo(e,t,"div",null,null),s=a.right-a.left;l.style.width=(s>0?s:e.defaultCharWidth())+"px"}if(i.other){var u=n.appendChild(J("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));u.style.display="",u.style.left=i.other.left+"px",u.style.top=i.other.top+"px",u.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Mi(e,t){return e.top-t.top||e.left-t.left}function Xa(e,t,n){var i=e.display,l=e.doc,a=document.createDocumentFragment(),s=wn(e.display),u=s.left,f=Math.max(i.sizerWidth,zn(e)-i.sizer.offsetLeft)-s.right,c="ltr"==l.direction;function h(W,H,z,Y){H<0&&(H=0),H=Math.round(H),Y=Math.round(Y),a.appendChild(J("div",null,"CodeMirror-selected","position: absolute; left: "+W+"px;\n                             top: "+H+"px; width: "+(z??f-W)+"px;\n                             height: "+(Y-H)+"px"))}function d(W,H,z){var ge,Ke,Y=oe(l,W),fe=Y.text.length;function Ae(De,ze){return oo(e,O(W,De),"div",Y,ze)}function Re(De,ze,Ne){var ke=Ya(e,Y,null,De),He="ltr"==ze==("after"==Ne)?"left":"right";return Ae("after"==Ne?ke.begin:ke.end-(/\s/.test(Y.text.charAt(ke.end-1))?2:1),He)[He]}var tt=Z(Y,l.direction);return function xt(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var l=!1,a=0;a<e.length;++a){var s=e[a];(s.from<n&&s.to>t||t==n&&s.to==t)&&(i(Math.max(s.from,t),Math.min(s.to,n),1==s.level?"rtl":"ltr",a),l=!0)}l||i(t,n,"ltr")}(tt,H||0,z??fe,function(De,ze,Ne,ke){var He="ltr"==Ne,lt=Ae(De,He?"left":"right"),Lt=Ae(ze-1,He?"right":"left"),Tt=null==H&&0==De,Xt=null==z&&ze==fe,Ie=0==ke,Mr=!tt||ke==tt.length-1;if(Lt.top-lt.top<=3){var ir=(c?Tt:Xt)&&Ie?u:(He?lt:Lt).left;h(ir,lt.top,((c?Xt:Tt)&&Mr?f:(He?Lt:lt).right)-ir,lt.bottom)}else{var Ar,Gt,Cl,fu;He?(Ar=c&&Tt&&Ie?u:lt.left,Gt=c?f:Re(De,Ne,"before"),Cl=c?u:Re(ze,Ne,"after"),fu=c&&Xt&&Mr?f:Lt.right):(Ar=c?Re(De,Ne,"before"):u,Gt=!c&&Tt&&Ie?f:lt.right,Cl=!c&&Xt&&Mr?u:Lt.left,fu=c?Re(ze,Ne,"after"):f),h(Ar,lt.top,Gt-Ar,lt.bottom),lt.bottom<Lt.top&&h(u,lt.bottom,null,Lt.top),h(Cl,Lt.top,fu-Cl,Lt.bottom)}(!ge||Mi(lt,ge)<0)&&(ge=lt),Mi(Lt,ge)<0&&(ge=Lt),(!Ke||Mi(lt,Ke)<0)&&(Ke=lt),Mi(Lt,Ke)<0&&(Ke=Lt)}),{start:ge,end:Ke}}var g=t.from(),m=t.to();if(g.line==m.line)d(g.line,g.ch,m.ch);else{var w=oe(l,g.line),k=oe(l,m.line),M=Gr(w)==Gr(k),A=d(g.line,g.ch,M?w.text.length+1:null).end,E=d(m.line,M?0:null,m.ch).start;M&&(A.top<E.top-2?(h(A.right,A.top,null,A.bottom),h(u,E.top,E.left,E.bottom)):h(A.right,A.top,E.left-A.right,A.bottom)),A.bottom<E.top&&h(u,A.bottom,null,E.top)}n.appendChild(a)}function fo(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){e.hasFocus()||Yn(e),t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function el(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||Ai(e))}function Tn(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&Yn(e))},100)}function Ai(e,t){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(mt(e,"focus",e,t),e.state.focused=!0,V(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),Xe&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),fo(e))}function Yn(e,t){e.state.delayingBlurEvent||(e.state.focused&&(mt(e,"blur",e,t),e.state.focused=!1,q(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Xn(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=Math.max(0,t.scroller.getBoundingClientRect().top),l=t.lineDiv.getBoundingClientRect().top,a=0,s=0;s<t.view.length;s++){var u=t.view[s],f=e.options.lineWrapping,c=void 0,h=0;if(!u.hidden){if(l+=u.line.height,de&&Se<8){var d=u.node.offsetTop+u.node.offsetHeight;c=d-n,n=d}else{var g=u.node.getBoundingClientRect();c=g.bottom-g.top,!f&&u.text.firstChild&&(h=u.text.firstChild.getBoundingClientRect().right-g.left-1)}var m=u.line.height-c;if((m>.005||m<-.005)&&(l<i&&(a-=m),It(u.line,c),ja(u.line),u.rest))for(var w=0;w<u.rest.length;w++)ja(u.rest[w]);if(h>e.display.sizerWidth){var k=Math.ceil(h/Sn(e.display));k>e.display.maxLineLength&&(e.display.maxLineLength=k,e.display.maxLine=u.line,e.display.maxLineChanged=!0)}}}Math.abs(a)>2&&(t.scroller.scrollTop+=a)}function ja(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function tl(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-no(e));var l=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,a=b(t,i),s=b(t,l);if(n&&n.ensure){var u=n.ensure.from.line,f=n.ensure.to.line;u<a?(a=u,s=b(t,Hr(oe(t,u))+e.wrapper.clientHeight)):Math.min(f,t.lastLine())>=s&&(a=b(t,Hr(oe(t,f))-e.wrapper.clientHeight),s=f)}return{from:a,to:Math.max(s,a+1)}}function Mn(e,t){var n=e.display,i=Cn(e.display);t.top<0&&(t.top=0);var l=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,a=Ko(e),s={};t.bottom-t.top>a&&(t.bottom=t.top+a);var u=e.doc.height+xr(n),c=t.bottom>u-i;if(t.top<l)s.scrollTop=t.top<i?0:t.top;else if(t.bottom>l+a){var h=Math.min(t.top,(c?u:t.bottom)-a);h!=l&&(s.scrollTop=h)}var d=e.options.fixedGutter?0:n.gutters.offsetWidth,g=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft-d,m=zn(e)-n.gutters.offsetWidth,w=t.right-t.left>m;return w&&(t.right=t.left+m),t.left<10?s.scrollLeft=0:t.left<g?s.scrollLeft=Math.max(0,t.left+d-(w?0:10)):t.right>m+g-3&&(s.scrollLeft=t.right+(w?0:10)-m),s}function jn(e,t){null!=t&&(Dn(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Di(e){Dn(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function An(e,t,n){(null!=t||null!=n)&&Dn(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Dn(e){var t=e.curOp.scrollToPos;t&&(e.curOp.scrollToPos=null,Ul(e,jo(e,t.from),jo(e,t.to),t.margin))}function Ul(e,t,n,i){var l=Mn(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});An(e,l.scrollLeft,l.scrollTop)}function _r(e,t){Math.abs(e.doc.scrollTop-t)<2||(Le||ho(e,{top:t}),Ni(e,t,!0),Le&&ho(e),On(e,100))}function Ni(e,t,n){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t)),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function dr(e,t,n,i){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),(!(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||i)&&(e.doc.scrollLeft=t,ol(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function en(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+xr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+br(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var kr=function(e,t,n){this.cm=n;var i=this.vert=J("div",[J("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),l=this.horiz=J("div",[J("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=l.tabIndex=-1,e(i),e(l),ne(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),ne(l,"scroll",function(){l.clientWidth&&t(l.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,de&&Se<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};kr.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;return n?(this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0",this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+(e.viewHeight-(t?i:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),t?(this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+(e.viewWidth-e.barLeft-(n?i:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},kr.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},kr.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},kr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Pe&&!jt?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new le,this.disableVert=new le},kr.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function i(){var l=e.getBoundingClientRect();("vert"==n?document.elementFromPoint(l.right-1,(l.top+l.bottom)/2):document.elementFromPoint((l.right+l.left)/2,l.bottom-1))!=e?e.style.pointerEvents="none":t.set(1e3,i)})},kr.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Oi=function(){};function Jn(e,t){t||(t=en(e));var n=e.display.barWidth,i=e.display.barHeight;Gl(e,t);for(var l=0;l<4&&n!=e.display.barWidth||i!=e.display.barHeight;l++)n!=e.display.barWidth&&e.options.lineWrapping&&Xn(e),Gl(e,en(e)),n=e.display.barWidth,i=e.display.barHeight}function Gl(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Oi.prototype.update=function(){return{bottom:0,right:0}},Oi.prototype.setScrollLeft=function(){},Oi.prototype.setScrollTop=function(){},Oi.prototype.clear=function(){};var Qa={native:kr,null:Oi};function Nn(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&q(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Qa[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ne(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?dr(e,t):_r(e,t)},e),e.display.scrollbars.addClass&&V(e.display.wrapper,e.display.scrollbars.addClass)}var Qn=0;function Vn(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qn,markArrays:null},function Ps(e){wi?wi.ops.push(e):e.ownsGroup=wi={ops:[e],delayedCallbacks:[]}}(e.curOp)}function $n(e){var t=e.curOp;t&&function Pt(e,t){var n=e.ownsGroup;if(n)try{!function eo(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var l=e.ops[i];if(l.cursorActivityHandlers)for(;l.cursorActivityCalled<l.cursorActivityHandlers.length;)l.cursorActivityHandlers[l.cursorActivityCalled++].call(null,l.cm)}}while(n<t.length)}(n)}finally{wi=null,t(n)}}(t,function(n){for(var i=0;i<n.ops.length;i++)n.ops[i].cm.curOp=null;!function Gs(e){for(var t=e.ops,n=0;n<t.length;n++)qs(t[n]);for(var i=0;i<t.length;i++)Zs(t[i]);for(var l=0;l<t.length;l++)Ks(t[l]);for(var a=0;a<t.length;a++)ur(t[a]);for(var s=0;s<t.length;s++)Bt(t[s])}(n)})}function qs(e){var t=e.cm,n=t.display;(function Xs(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=br(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=br(e)+"px",t.scrollbarsClipped=!0)})(t),e.updateMaxLine&&Ol(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new rl(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Zs(e){e.updatedDisplay=e.mustUpdate&&co(e.cm,e.update)}function Ks(e){var t=e.cm,n=t.display;e.updatedDisplay&&Xn(t),e.barMeasure=en(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Un(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+br(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-zn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function ur(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&dr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==v();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Jn(t,e.barMeasure),e.updatedDisplay&&il(t,e.barMeasure),e.selectionChanged&&fo(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&el(e.cm)}function Bt(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&$a(t,e.update),null!=n.wheelStartX&&(null!=e.scrollTop||null!=e.scrollLeft||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Ni(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&dr(t,e.scrollLeft,!0,!0),e.scrollToPos){var l=function Rl(e,t,n,i){var l;null==i&&(i=0),!e.options.lineWrapping&&t==n&&(n="before"==t.sticky?O(t.line,t.ch+1,"before"):t,t=t.ch?O(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t);for(var a=0;a<5;a++){var s=!1,u=hr(e,t),f=n&&n!=t?hr(e,n):u,c=Mn(e,l={left:Math.min(u.left,f.left),top:Math.min(u.top,f.top)-i,right:Math.max(u.left,f.left),bottom:Math.max(u.bottom,f.bottom)+i}),h=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=c.scrollTop&&(_r(e,c.scrollTop),Math.abs(e.doc.scrollTop-h)>1&&(s=!0)),null!=c.scrollLeft&&(dr(e,c.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(s=!0)),!s)break}return l}(t,ye(i,e.scrollToPos.from),ye(i,e.scrollToPos.to),e.scrollToPos.margin);!function Us(e,t){if(!Be(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),l=null;if(t.top+i.top<0?l=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null!=l&&!Jt){var a=J("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-no(e.display))+"px;\n                         height: "+(t.bottom-t.top+br(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(a),a.scrollIntoView(l),e.display.lineSpace.removeChild(a)}}}(t,l)}var a=e.maybeHiddenMarkers,s=e.maybeUnhiddenMarkers;if(a)for(var u=0;u<a.length;++u)a[u].lines.length||mt(a[u],"hide");if(s)for(var f=0;f<s.length;++f)s[f].lines.length&&mt(s[f],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&mt(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function et(e,t){if(e.curOp)return t();Vn(e);try{return t()}finally{$n(e)}}function Oe(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Vn(e);try{return t.apply(e,arguments)}finally{$n(e)}}}function Ft(e){return function(){if(this.curOp)return e.apply(this,arguments);Vn(this);try{return e.apply(this,arguments)}finally{$n(this)}}}function _t(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Vn(t);try{return e.apply(this,arguments)}finally{$n(t)}}}function On(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,Q(Ys,e))}function Ys(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=mi(e,t.highlightFrontier),l=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(a){if(i.line>=e.display.viewFrom){var s=a.styles,u=a.text.length>e.options.maxHighlightLength?Or(t.mode,i.state):null,f=gi(e,a,i,!0);u&&(i.state=u),a.styles=f.styles;var c=a.styleClasses,h=f.classes;h?a.styleClasses=h:c&&(a.styleClasses=null);for(var d=!s||s.length!=a.styles.length||c!=h&&(!c||!h||c.bgClass!=h.bgClass||c.textClass!=h.textClass),g=0;!d&&g<s.length;++g)d=s[g]!=a.styles[g];d&&l.push(i.line),a.stateAfter=i.save(),i.nextLine()}else a.text.length<=e.options.maxHighlightLength&&Ki(e,a.text,i),a.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return On(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),l.length&&et(e,function(){for(var a=0;a<l.length;a++)Br(e,l[a],"text")})}}var rl=function(e,t,n){var i=e.display;this.viewport=t,this.visible=tl(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=zn(e),this.force=n,this.dims=$o(e),this.events=[]};function co(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return Ln(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Bl(e))return!1;Kl(e)&&(Ln(e),t.dims=$o(e));var l=i.first+i.size,a=Math.max(t.visible.from-e.options.viewportMargin,i.first),s=Math.min(l,t.visible.to+e.options.viewportMargin);n.viewFrom<a&&a-n.viewFrom<20&&(a=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(l,n.viewTo)),Jr&&(a=qr(e.doc,a),s=Uo(e.doc,s));var u=a!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;(function so(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=qo(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=qo(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(sr(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(qo(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,sr(e,n)))),i.viewTo=n})(e,a,s),n.viewOffset=Hr(oe(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var f=Bl(e);if(!u&&0==f&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function ql(e){if(e.hasFocus())return null;var t=v();if(!t||!S(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&S(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return f>4&&(n.lineDiv.style.display="none"),function Zl(e,t,n){var i=e.display,l=e.options.lineNumbers,a=i.lineDiv,s=a.firstChild;function u(w){var k=w.nextSibling;return Xe&&Pe&&e.display.currentWheelTarget==w?w.style.display="none":w.parentNode.removeChild(w),k}for(var f=i.view,c=i.viewFrom,h=0;h<f.length;h++){var d=f[h];if(!d.hidden)if(d.node&&d.node.parentNode==a){for(;s!=d.node;)s=u(s);var m=l&&null!=t&&t<=c&&d.lineNumber;d.changes&&(_(d.changes,"gutter")>-1&&(m=!1),Pa(e,d,c,n)),m&&(P(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(F(e.options,c)))),s=d.node.nextSibling}else{var g=za(e,d,c,n);a.insertBefore(g,s)}c+=d.size}for(;s;)s=u(s)}(e,n.updateLineNumbers,t.dims),f>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function Va(e){if(e&&e.activeElt&&e.activeElt!=v()&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&S(document.body,e.anchorNode)&&S(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),P(n.cursorDiv),P(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,u&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,On(e,400)),n.updateLineNumbers=null,!0}function $a(e,t){for(var n=t.viewport,i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldDisplayWidth!=zn(e))i&&(t.visible=tl(e.display,e.doc,n));else if(n&&null!=n.top&&(n={top:Math.min(e.doc.height+xr(e.display)-Ko(e),n.top)}),t.visible=tl(e.display,e.doc,n),t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break;if(!co(e,t))break;Xn(e);var l=en(e);Kn(e),Jn(e,l),il(e,l),t.force=!1}t.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function ho(e,t){var n=new rl(e,t);if(co(e,n)){Xn(e),$a(e,n);var i=en(e);Kn(e),Jn(e,i),il(e,i),n.finish()}}function nl(e){e.sizer.style.marginLeft=e.gutters.offsetWidth+"px",Et(e,"gutterChanged",e)}function il(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+br(e)+"px"}function ol(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=lo(t)-t.scroller.scrollLeft+e.doc.scrollLeft,l=t.gutters.offsetWidth,a=i+"px",s=0;s<n.length;s++)if(!n[s].hidden){e.options.fixedGutter&&(n[s].gutter&&(n[s].gutter.style.left=a),n[s].gutterBackground&&(n[s].gutterBackground.style.left=a));var u=n[s].alignable;if(u)for(var f=0;f<u.length;f++)u[f].style.left=a}e.options.fixedGutter&&(t.gutters.style.left=i+l+"px")}}function Kl(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=F(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var l=i.measure.appendChild(J("div",[J("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=l.firstChild.offsetWidth,s=l.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",nl(e.display),!0}return!1}function ei(e,t){for(var n=[],i=!1,l=0;l<e.length;l++){var a=e[l],s=null;if("string"!=typeof a&&(s=a.style,a=a.className),"CodeMirror-linenumbers"==a){if(!t)continue;i=!0}n.push({className:a,style:s})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function es(e){var t=e.gutters,n=e.gutterSpecs;P(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var l=n[i],a=l.className,s=l.style,u=t.appendChild(J("div",null,"CodeMirror-gutter "+a));s&&(u.style.cssText=s),"CodeMirror-linenumbers"==a&&(e.lineGutter=u,u.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",nl(e)}function En(e){es(e.display),St(e),ol(e)}function tn(e,t,n,i){var l=this;this.input=n,l.scrollbarFiller=J("div",null,"CodeMirror-scrollbar-filler"),l.scrollbarFiller.setAttribute("cm-not-content","true"),l.gutterFiller=J("div",null,"CodeMirror-gutter-filler"),l.gutterFiller.setAttribute("cm-not-content","true"),l.lineDiv=nt("div",null,"CodeMirror-code"),l.selectionDiv=J("div",null,null,"position: relative; z-index: 1"),l.cursorDiv=J("div",null,"CodeMirror-cursors"),l.measure=J("div",null,"CodeMirror-measure"),l.lineMeasure=J("div",null,"CodeMirror-measure"),l.lineSpace=nt("div",[l.measure,l.lineMeasure,l.selectionDiv,l.cursorDiv,l.lineDiv],null,"position: relative; outline: none");var a=nt("div",[l.lineSpace],"CodeMirror-lines");l.mover=J("div",[a],null,"position: relative"),l.sizer=J("div",[l.mover],"CodeMirror-sizer"),l.sizerWidth=null,l.heightForcer=J("div",null,null,"position: absolute; height: "+ae+"px; width: 1px;"),l.gutters=J("div",null,"CodeMirror-gutters"),l.lineGutter=null,l.scroller=J("div",[l.sizer,l.heightForcer,l.gutters],"CodeMirror-scroll"),l.scroller.setAttribute("tabIndex","-1"),l.wrapper=J("div",[l.scrollbarFiller,l.gutterFiller,l.scroller],"CodeMirror"),l.wrapper.setAttribute("translate","no"),de&&Se<8&&(l.gutters.style.zIndex=-1,l.scroller.style.paddingRight=0),!Xe&&!(Le&&vt)&&(l.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(l.wrapper):e(l.wrapper)),l.viewFrom=l.viewTo=t.first,l.reportedViewFrom=l.reportedViewTo=t.first,l.view=[],l.renderedView=null,l.externalMeasured=null,l.viewOffset=0,l.lastWrapHeight=l.lastWrapWidth=0,l.updateLineNumbers=null,l.nativeBarWidth=l.barHeight=l.barWidth=0,l.scrollbarsClipped=!1,l.lineNumWidth=l.lineNumInnerWidth=l.lineNumChars=null,l.alignWidgets=!1,l.cachedCharWidth=l.cachedTextHeight=l.cachedPaddingH=null,l.maxLine=null,l.maxLineLength=0,l.maxLineChanged=!1,l.wheelDX=l.wheelDY=l.wheelStartX=l.wheelStartY=null,l.shift=!1,l.selForContextMenu=null,l.activeTouch=null,l.gutterSpecs=ei(i.gutters,i.lineNumbers),es(l),n.init(l)}rl.prototype.signal=function(e,t){ot(e,t)&&this.events.push(arguments)},rl.prototype.finish=function(){for(var e=0;e<this.events.length;e++)mt.apply(null,this.events[e])};var po=0,rn=null;function Yl(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function pr(e){var t=Yl(e);return t.x*=rn,t.y*=rn,t}function qe(e,t){var n=Yl(t),i=n.x,l=n.y,a=rn;0===t.deltaMode&&(i=t.deltaX,l=t.deltaY,a=1);var s=e.display,u=s.scroller,c=u.scrollHeight>u.clientHeight;if(i&&u.scrollWidth>u.clientWidth||l&&c){if(l&&Pe&&Xe)e:for(var h=t.target,d=s.view;h!=u;h=h.parentNode)for(var g=0;g<d.length;g++)if(d[g].node==h){e.display.currentWheelTarget=h;break e}if(i&&!Le&&!he&&null!=a)return l&&c&&_r(e,Math.max(0,u.scrollTop+l*a)),dr(e,Math.max(0,u.scrollLeft+i*a)),(!l||l&&c)&&Ht(t),void(s.wheelStartX=null);if(l&&null!=a){var m=l*a,w=e.doc.scrollTop,k=w+s.wrapper.clientHeight;m<0?w=Math.max(0,w+m-50):k=Math.min(e.doc.height,k+m+50),ho(e,{top:w,bottom:k})}po<20&&0!==t.deltaMode&&(null==s.wheelStartX?(s.wheelStartX=u.scrollLeft,s.wheelStartY=u.scrollTop,s.wheelDX=i,s.wheelDY=l,setTimeout(function(){if(null!=s.wheelStartX){var M=u.scrollLeft-s.wheelStartX,A=u.scrollTop-s.wheelStartY,E=A&&s.wheelDY&&A/s.wheelDY||M&&s.wheelDX&&M/s.wheelDX;s.wheelStartX=s.wheelStartY=null,E&&(rn=(rn*po+E)/(po+1),++po)}},200)):(s.wheelDX+=i,s.wheelDY+=l))}}de?rn=-.53:Le?rn=15:ut?rn=-.7:je&&(rn=-1/3);var bt=function(e,t){this.ranges=e,this.primIndex=t};bt.prototype.primary=function(){return this.ranges[this.primIndex]},bt.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!We(n.anchor,i.anchor)||!We(n.head,i.head))return!1}return!0},bt.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new Me(Ct(this.ranges[t].anchor),Ct(this.ranges[t].head));return new bt(e,this.primIndex)},bt.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},bt.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(X(t,i.from())>=0&&X(e,i.to())<=0)return n}return-1};var Me=function(e,t){this.anchor=e,this.head=t};function zt(e,t,n){var i=e&&e.options.selectionsMayTouch,l=t[n];t.sort(function(g,m){return X(g.from(),m.from())}),n=_(t,l);for(var a=1;a<t.length;a++){var s=t[a],u=t[a-1],f=X(u.to(),s.from());if(i&&!s.empty()?f>0:f>=0){var c=ve(u.from(),s.from()),h=Vt(u.to(),s.to()),d=u.empty()?s.from()==s.head:u.from()==u.head;a<=n&&--n,t.splice(--a,2,new Me(d?h:c,d?c:h))}}return new bt(t,n)}function nn(e,t){return new bt([new Me(e,t||e)],0)}function Zr(e){return e.text?O(e.from.line+e.text.length-1,I(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Xl(e,t){if(X(e,t.from)<0)return e;if(X(e,t.to)<=0)return Zr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=Zr(t).ch-t.to.ch),O(n,i)}function jl(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var l=e.sel.ranges[i];n.push(new Me(Xl(l.anchor,t),Xl(l.head,t)))}return zt(e.cm,n,e.sel.primIndex)}function ll(e,t,n){return e.line==t.line?O(n.line,e.ch-t.ch+n.ch):O(n.line+(e.line-t.line),e.ch)}function al(e){e.doc.mode=vi(e.options,e.doc.modeOption),ti(e)}function ti(e){e.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,On(e,100),e.state.modeGen++,e.curOp&&St(e)}function on(e,t){return 0==t.from.ch&&0==t.to.ch&&""==I(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function sl(e,t,n,i){function l(E){return n?n[E]:null}function a(E,W,H){(function Es(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),ji(e),Ji(e,n);var l=i?i(e):1;l!=e.height&&It(e,l)})(E,W,H,i),Et(E,"change",E,t)}function s(E,W){for(var H=[],z=E;z<W;++z)H.push(new bi(c[z],l(z),i));return H}var u=t.from,f=t.to,c=t.text,h=oe(e,u.line),d=oe(e,f.line),g=I(c),m=l(c.length-1),w=f.line-u.line;if(t.full)e.insert(0,s(0,c.length)),e.remove(c.length,e.size-c.length);else if(on(e,t)){var k=s(0,c.length-1);a(d,d.text,m),w&&e.remove(u.line,w),k.length&&e.insert(u.line,k)}else if(h==d)if(1==c.length)a(h,h.text.slice(0,u.ch)+g+h.text.slice(f.ch),m);else{var M=s(1,c.length-1);M.push(new bi(g+h.text.slice(f.ch),m,i)),a(h,h.text.slice(0,u.ch)+c[0],l(0)),e.insert(u.line+1,M)}else if(1==c.length)a(h,h.text.slice(0,u.ch)+c[0]+d.text.slice(f.ch),l(0)),e.remove(u.line+1,w);else{a(h,h.text.slice(0,u.ch)+c[0],l(0)),a(d,g+d.text.slice(f.ch),m);var A=s(1,c.length-1);w>1&&e.remove(u.line+1,w-1),e.insert(u.line+1,A)}Et(e,"change",e,t)}function ln(e,t,n){!function i(l,a,s){if(l.linked)for(var u=0;u<l.linked.length;++u){var f=l.linked[u];if(f.doc!=a){var c=s&&f.sharedHist;n&&!c||(t(f.doc,c),i(f.doc,l,c))}}}(e,null,!0)}function ts(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,$r(e),al(e),go(e),e.options.direction=t.direction,e.options.lineWrapping||Ol(e),e.options.mode=t.modeOption,St(e)}function go(e){("rtl"==e.doc.direction?V:q)(e.display.lineDiv,"CodeMirror-rtl")}function mo(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ql(e,t){var n={from:Ct(t.from),to:Zr(t),text:Rt(e,t.from,t.to)};return is(e,n,t.from.line,t.to.line+1),ln(e,function(i){return is(i,n,t.from.line,t.to.line+1)},!0),n}function Vl(e){for(;e.length&&I(e).ranges;)e.pop()}function rs(e,t,n,i){var l=e.history;l.undone.length=0;var s,u,a=+new Date;if((l.lastOp==i||l.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&l.lastModTime>a-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(s=function js(e,t){return t?(Vl(e.done),I(e.done)):e.done.length&&!I(e.done).ranges?I(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),I(e.done)):void 0}(l,l.lastOp==i)))u=I(s.changes),0==X(t.from,t.to)&&0==X(t.from,u.to)?u.to=Zr(t):s.changes.push(Ql(e,t));else{var f=I(l.done);for((!f||!f.ranges)&&fl(e.sel,l.done),s={changes:[Ql(e,t)],generation:l.generation},l.done.push(s);l.done.length>l.undoDepth;)l.done.shift(),l.done[0].ranges||l.done.shift()}l.done.push(n),l.generation=++l.maxGeneration,l.lastModTime=l.lastSelTime=a,l.lastOp=l.lastSelOp=i,l.lastOrigin=l.lastSelOrigin=t.origin,u||mt(e,"historyAdded")}function fl(e,t){var n=I(t);n&&n.ranges&&n.equals(e)||t.push(e)}function is(e,t,n,i){var l=t["spans_"+e.id],a=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(s){s.markedSpans&&((l||(l=t["spans_"+e.id]={}))[a]=s.markedSpans),++a})}function os(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function cl(e,t){var n=function Ei(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],l=0;l<t.text.length;++l)i.push(os(n[l]));return i}(e,t),i=Al(e,t);if(!n)return i;if(!i)return n;for(var l=0;l<n.length;++l){var a=n[l],s=i[l];if(a&&s)e:for(var u=0;u<s.length;++u){for(var f=s[u],c=0;c<a.length;++c)if(a[c].marker==f.marker)continue e;a.push(f)}else s&&(n[l]=s)}return n}function an(e,t,n){for(var i=[],l=0;l<e.length;++l){var a=e[l];if(a.ranges)i.push(n?bt.prototype.deepCopy.call(a):a);else{var s=a.changes,u=[];i.push({changes:u});for(var f=0;f<s.length;++f){var c=s[f],h=void 0;if(u.push({from:c.from,to:c.to,text:c.text}),t)for(var d in c)(h=d.match(/^spans_(\d+)$/))&&_(t,Number(h[1]))>-1&&(I(u)[d]=c[d],delete c[d])}}}return i}function hl(e,t,n,i){if(i){var l=e.anchor;if(n){var a=X(t,l)<0;a!=X(n,l)<0?(l=t,t=n):a!=X(t,n)<0&&(t=n)}return new Me(l,t)}return new Me(n||t,t)}function Fi(e,t,n,i,l){null==l&&(l=e.cm&&(e.cm.display.shift||e.extend)),Ut(e,new bt([hl(e.sel.primary(),t,n,l)],0),i)}function $l(e,t,n){for(var i=[],l=e.cm&&(e.cm.display.shift||e.extend),a=0;a<e.sel.ranges.length;a++)i[a]=hl(e.sel.ranges[a],t[a],null,l);Ut(e,zt(e.cm,i,e.sel.primIndex),n)}function ea(e,t,n,i){var l=e.sel.ranges.slice(0);l[t]=n,Ut(e,zt(e.cm,l,e.sel.primIndex),i)}function ta(e,t,n,i){Ut(e,nn(t,n),i)}function yo(e,t,n){var i=e.history.done,l=I(i);l&&l.ranges?(i[i.length-1]=t,xo(e,t,n)):Ut(e,t,n)}function Ut(e,t,n){xo(e,t,n),function ns(e,t,n,i){var l=e.history,a=i&&i.origin;n==l.lastSelOp||a&&l.lastSelOrigin==a&&(l.lastModTime==l.lastSelTime&&l.lastOrigin==a||function ul(e,t,n,i){var l=t.charAt(0);return"*"==l||"+"==l&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,a,I(l.done),t))?l.done[l.done.length-1]=t:fl(t,l.done),l.lastSelTime=+new Date,l.lastSelOrigin=a,l.lastSelOp=n,i&&!1!==i.clearRedo&&Vl(l.undone)}(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function xo(e,t,n){(ot(e,"beforeSelectionChange")||e.cm&&ot(e.cm,"beforeSelectionChange"))&&(t=function Yt(e,t,n){var i={ranges:t.ranges,update:function(l){this.ranges=[];for(var a=0;a<l.length;a++)this.ranges[a]=new Me(ye(e,l[a].anchor),ye(e,l[a].head))},origin:n&&n.origin};return mt(e,"beforeSelectionChange",e,i),e.cm&&mt(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?zt(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(X(t.primary().head,e.sel.primary().head)<0?-1:1);ra(e,bo(e,t,i,!0)),(!n||!1!==n.scroll)&&e.cm&&"nocursor"!=e.cm.getOption("readOnly")&&Di(e.cm)}function ra(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Zt(e.cm)),Et(e,"cursorActivity",e))}function ri(e){ra(e,bo(e,e.sel,null,!1))}function bo(e,t,n,i){for(var l,a=0;a<t.ranges.length;a++){var s=t.ranges[a],u=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[a],f=wo(e,s.anchor,u&&u.anchor,n,i),c=wo(e,s.head,u&&u.head,n,i);(l||f!=s.anchor||c!=s.head)&&(l||(l=t.ranges.slice(0,a)),l[a]=new Me(f,c))}return l?zt(e.cm,l,t.primIndex):t}function ni(e,t,n,i,l){var a=oe(e,t.line);if(a.markedSpans)for(var s=0;s<a.markedSpans.length;++s){var u=a.markedSpans[s],f=u.marker,c="selectLeft"in f?!f.selectLeft:f.inclusiveLeft,h="selectRight"in f?!f.selectRight:f.inclusiveRight;if((null==u.from||(c?u.from<=t.ch:u.from<t.ch))&&(null==u.to||(h?u.to>=t.ch:u.to>t.ch))){if(l&&(mt(f,"beforeCursorEnter"),f.explicitlyCleared)){if(a.markedSpans){--s;continue}break}if(!f.atomic)continue;if(n){var d=f.find(i<0?1:-1),g=void 0;if((i<0?h:c)&&(d=na(e,d,-i,d&&d.line==t.line?a:null)),d&&d.line==t.line&&(g=X(d,n))&&(i<0?g<0:g>0))return ni(e,d,t,i,l)}var m=f.find(i<0?-1:1);return(i<0?c:h)&&(m=na(e,m,i,m.line==t.line?a:null)),m?ni(e,m,t,i,l):null}}return t}function wo(e,t,n,i,l){var a=i||1;return ni(e,t,n,a,l)||!l&&ni(e,t,n,a,!0)||ni(e,t,n,-a,l)||!l&&ni(e,t,n,-a,!0)||(e.cantEdit=!0,O(e.first,0))}function na(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?ye(e,O(t.line-1)):null:n>0&&t.ch==(i||oe(e,t.line)).text.length?t.line<e.first+e.size-1?O(t.line+1,0):null:new O(t.line,t.ch+n)}function ii(e){e.setSelection(O(e.firstLine(),0),O(e.lastLine()),yt)}function ia(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(l,a,s,u){l&&(i.from=ye(e,l)),a&&(i.to=ye(e,a)),s&&(i.text=s),void 0!==u&&(i.origin=u)}),mt(e,"beforeChange",e,i),e.cm&&mt(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function sn(e,t,n){if(e.cm){if(!e.cm.curOp)return Oe(e.cm,sn)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"))||(t=ia(e,t,!0))){var i=Ta&&!n&&function Aa(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(m){if(m.markedSpans)for(var w=0;w<m.markedSpans.length;++w){var k=m.markedSpans[w].marker;k.readOnly&&(!i||-1==_(i,k))&&(i||(i=[])).push(k)}}),!i)return null;for(var l=[{from:t,to:n}],a=0;a<i.length;++a)for(var s=i[a],u=s.find(0),f=0;f<l.length;++f){var c=l[f];if(!(X(c.to,u.from)<0||X(c.from,u.to)>0)){var h=[f,1],d=X(c.from,u.from),g=X(c.to,u.to);(d<0||!s.inclusiveLeft&&!d)&&h.push({from:c.from,to:u.from}),(g>0||!s.inclusiveRight&&!g)&&h.push({from:u.to,to:c.to}),l.splice.apply(l,h),f+=h.length-3}}return l}(e,t.from,t.to);if(i)for(var l=i.length-1;l>=0;--l)oa(e,{from:i[l].from,to:i[l].to,text:l?[""]:t.text,origin:t.origin});else oa(e,t)}}function oa(e,t){if(1!=t.text.length||""!=t.text[0]||0!=X(t.from,t.to)){var n=jl(e,t);rs(e,t,n,e.cm?e.cm.curOp.id:NaN),Kr(e,t,n,Al(e,t));var i=[];ln(e,function(l,a){!a&&-1==_(i,l.history)&&(Hi(l.history,t),i.push(l.history)),Kr(l,t,null,Al(l,t))})}}function Fn(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var a,l=e.history,s=e.sel,u="undo"==t?l.done:l.undone,f="undo"==t?l.undone:l.done,c=0;c<u.length&&(a=u[c],!(n?a.ranges&&!a.equals(e.sel):!a.ranges));c++);if(c!=u.length){for(l.lastOrigin=l.lastSelOrigin=null;;){if(!(a=u.pop()).ranges){if(i)return void u.push(a);break}if(fl(a,f),n&&!a.equals(e.sel))return void Ut(e,a,{clearRedo:!1});s=a}var h=[];fl(s,f),f.push({changes:h,generation:l.generation}),l.generation=a.generation||++l.maxGeneration;for(var d=ot(e,"beforeChange")||e.cm&&ot(e.cm,"beforeChange"),g=function(k){var M=a.changes[k];if(M.origin=t,d&&!ia(e,M,!1))return u.length=0,{};h.push(Ql(e,M));var A=k?jl(e,M):I(u);Kr(e,M,A,cl(e,M)),!k&&e.cm&&e.cm.scrollIntoView({from:M.from,to:Zr(M)});var E=[];ln(e,function(W,H){!H&&-1==_(E,W.history)&&(Hi(W.history,M),E.push(W.history)),Kr(W,M,null,cl(W,M))})},m=a.changes.length-1;m>=0;--m){var w=g(m);if(w)return w.v}}}}function ls(e,t){if(0!=t&&(e.first+=t,e.sel=new bt(pe(e.sel.ranges,function(l){return new Me(O(l.anchor.line+t,l.anchor.ch),O(l.head.line+t,l.head.ch))}),e.sel.primIndex),e.cm)){St(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)Br(e.cm,i,"gutter")}}function Kr(e,t,n,i){if(e.cm&&!e.cm.curOp)return Oe(e.cm,Kr)(e,t,n,i);if(t.to.line<e.first)ls(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var l=t.text.length-1-(e.first-t.from.line);ls(e,l),t={from:O(e.first,0),to:O(t.to.line+l,t.to.ch),text:[I(t.text)],origin:t.origin}}var a=e.lastLine();t.to.line>a&&(t={from:t.from,to:O(a,oe(e,a).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Rt(e,t.from,t.to),n||(n=jl(e,t)),e.cm?function as(e,t,n){var i=e.doc,l=e.display,a=t.from,s=t.to,u=!1,f=a.line;e.options.lineWrapping||(f=p(Gr(oe(i,a.line))),i.iter(f,s.line+1,function(m){if(m==l.maxLine)return u=!0,!0})),i.sel.contains(t.from,t.to)>-1&&Zt(e),sl(i,t,n,kn(e)),e.options.lineWrapping||(i.iter(f,a.line+t.text.length,function(m){var w=Qr(m);w>l.maxLineLength&&(l.maxLine=m,l.maxLineLength=w,l.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),function jr(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var l=oe(e,i).stateAfter;if(l&&(!(l instanceof Zi)||i+l.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,a.line),On(e,400);var c=t.text.length-(s.line-a.line)-1;t.full?St(e):a.line!=s.line||1!=t.text.length||on(e.doc,t)?St(e,a.line,s.line+1,c):Br(e,a.line,"text");var h=ot(e,"changes"),d=ot(e,"change");if(d||h){var g={from:a,to:s,text:t.text,removed:t.removed,origin:t.origin};d&&Et(e,"change",e,g),h&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(g)}e.display.selForContextMenu=null}(e.cm,t,i):sl(e,t,i),xo(e,n,yt),e.cantEdit&&wo(e,O(e.firstLine(),0))&&(e.cantEdit=!1)}}function oi(e,t,n,i,l){var a;i||(i=n),X(i,n)<0&&(n=(a=[i,n])[0],i=a[1]),"string"==typeof t&&(t=e.splitLines(t)),sn(e,{from:n,to:i,text:t,origin:l})}function la(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function Wi(e,t,n,i){for(var l=0;l<e.length;++l){var a=e[l],s=!0;if(a.ranges){a.copied||((a=e[l]=a.deepCopy()).copied=!0);for(var u=0;u<a.ranges.length;u++)la(a.ranges[u].anchor,t,n,i),la(a.ranges[u].head,t,n,i)}else{for(var f=0;f<a.changes.length;++f){var c=a.changes[f];if(n<c.from.line)c.from=O(c.from.line+i,c.from.ch),c.to=O(c.to.line+i,c.to.ch);else if(t<=c.to.line){s=!1;break}}s||(e.splice(0,l+1),l=0)}}}function Hi(e,t){var n=t.from.line,i=t.to.line,l=t.text.length-(i-n)-1;Wi(e.done,n,i,l),Wi(e.undone,n,i,l)}function un(e,t,n,i){var l=t,a=t;return"number"==typeof t?a=oe(e,Ca(e,t)):l=p(t),null==l?null:(i(a,l)&&e.cm&&Br(e.cm,l,n),a)}function fn(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function Ii(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var l=e[i];t+=l.chunkSize(),n+=l.height,l.parent=this}this.size=t,this.height=n,this.parent=null}Me.prototype.from=function(){return ve(this.anchor,this.head)},Me.prototype.to=function(){return Vt(this.anchor,this.head)},Me.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},fn.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var l=this.lines[n];this.height-=l.height,Fs(l),Et(l,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},Ii.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],l=i.chunkSize();if(e<l){var a=Math.min(t,l-e),s=i.height;if(i.removeInner(e,a),this.height-=s-i.height,l==a&&(this.children.splice(n--,1),i.parent=null),0==(t-=a))break;e=0}else e-=l}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof fn))){var u=[];this.collapse(u),this.children=[new fn(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var l=this.children[i],a=l.chunkSize();if(e<=a){if(l.insertInner(e,t,n),l.lines&&l.lines.length>50){for(var s=l.lines.length%25+25,u=s;u<l.lines.length;){var f=new fn(l.lines.slice(u,u+=25));l.height-=f.height,this.children.splice(++i,0,f),f.parent=this}l.lines=l.lines.slice(0,s),this.maybeSpill()}break}e-=a}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=new Ii(e.children.splice(e.children.length-5,5));if(e.parent){e.size-=n.size,e.height-=n.height;var l=_(e.parent.children,e);e.parent.children.splice(l+1,0,n)}else{var i=new Ii(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var l=this.children[i],a=l.chunkSize();if(e<a){var s=Math.min(t,a-e);if(l.iterN(e,s,n))return!0;if(0==(t-=s))break;e=0}else e-=a}}};var Co=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function aa(e,t,n){Hr(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&jn(e,n)}Co.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=p(n);if(null!=i&&t){for(var l=0;l<t.length;++l)t[l]==this&&t.splice(l--,1);t.length||(n.widgets=null);var a=bn(this);It(n,Math.max(0,n.height-a)),e&&(et(e,function(){aa(e,n,-a),Br(e,i,"widget")}),Et(e,"lineWidgetCleared",e,this,i))}},Co.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var l=bn(this)-t;l&&($t(this.doc,i)||It(i,i.height+l),n&&et(n,function(){n.curOp.forceUpdate=!0,aa(n,i,l),Et(n,"lineWidgetChanged",n,e,p(i))}))},mr(Co);var li=0,Lr=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++li};function Pi(e,t,n,i,l){if(i&&i.shared)return function Js(e,t,n,i,l){(i=N(i)).shared=!1;var a=[Pi(e,t,n,i,l)],s=a[0],u=i.widgetNode;return ln(e,function(f){u&&(i.widgetNode=u.cloneNode(!0)),a.push(Pi(f,ye(f,t),ye(f,n),i,l));for(var c=0;c<f.linked.length;++c)if(f.linked[c].isParent)return;s=I(a)}),new Bi(a,s)}(e,t,n,i,l);if(e.cm&&!e.cm.curOp)return Oe(e.cm,Pi)(e,t,n,i,l);var a=new Lr(e,l),s=X(t,n);if(i&&N(i,a,!1),s>0||0==s&&!1!==a.clearWhenEmpty)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=nt("span",[a.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(Na(e,t.line,t,n,a)||t.line!=n.line&&Na(e,n.line,t,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Yi(){Jr=!0}()}a.addToHistory&&rs(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var c,u=t.line,f=e.cm;if(e.iter(u,n.line+1,function(d){f&&a.collapsed&&!f.options.lineWrapping&&Gr(d)==f.display.maxLine&&(c=!0),a.collapsed&&u!=t.line&&It(d,0),function Os(e,t,n){var i=n&&window.WeakSet&&(n.markedSpans||(n.markedSpans=new WeakSet));i&&i.has(e.markedSpans)?e.markedSpans.push(t):(e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],i&&i.add(e.markedSpans)),t.marker.attachLine(e)}(d,new Ro(a,u==t.line?t.ch:null,u==n.line?n.ch:null),e.cm&&e.cm.curOp),++u}),a.collapsed&&e.iter(t.line,n.line+1,function(d){$t(e,d)&&It(d,0)}),a.clearOnEnter&&ne(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(function _o(){Ta=!0}(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),a.collapsed&&(a.id=++li,a.atomic=!0),f){if(c&&(f.curOp.updateMaxLine=!0),a.collapsed)St(f,t.line,n.line+1);else if(a.className||a.startStyle||a.endStyle||a.css||a.attributes||a.title)for(var h=t.line;h<=n.line;h++)Br(f,h,"text");a.atomic&&ri(f.doc),Et(f,"markerAdded",f,a)}return a}Lr.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&Vn(e),ot(this,"clear")){var n=this.find();n&&Et(this,"clear",n.from,n.to)}for(var i=null,l=null,a=0;a<this.lines.length;++a){var s=this.lines[a],u=Xi(s.markedSpans,this);e&&!this.collapsed?Br(e,p(s),"text"):e&&(null!=u.to&&(l=p(s)),null!=u.from&&(i=p(s))),s.markedSpans=Ns(s.markedSpans,u),null==u.from&&this.collapsed&&!$t(this.doc,s)&&e&&It(s,Cn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var c=Gr(this.lines[f]),h=Qr(c);h>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=h,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&St(e,i,l+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ri(e.doc)),e&&Et(e,"markerCleared",e,this,i,l),t&&$n(e),this.parent&&this.parent.clear()}},Lr.prototype.find=function(e,t){null==e&&"bookmark"==this.type&&(e=1);for(var n,i,l=0;l<this.lines.length;++l){var a=this.lines[l],s=Xi(a.markedSpans,this);if(null!=s.from&&(n=O(t?a:p(a),s.from),-1==e))return n;if(null!=s.to&&(i=O(t?a:p(a),s.to),1==e))return i}return n&&{from:n,to:i}},Lr.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;!t||!i||et(i,function(){var l=t.line,a=p(t.line),s=wr(i,a);if(s&&(ki(s),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!$t(n.doc,l)&&null!=n.height){var u=n.height;n.height=null;var f=bn(n)-u;f&&It(l,l.height+f)}Et(i,"markerChanged",i,e)})},Lr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||-1==_(t.maybeHiddenMarkers,this))&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Lr.prototype.detachLine=function(e){if(this.lines.splice(_(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},mr(Lr);var Bi=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function ss(e){return e.findMarks(O(e.first,0),e.clipPos(O(e.lastLine())),function(t){return t.parent})}function rr(e){for(var t=function(i){var l=e[i],a=[l.primary.doc];ln(l.primary.doc,function(f){return a.push(f)});for(var s=0;s<l.markers.length;s++){var u=l.markers[s];-1==_(a,u.doc)&&(u.parent=null,l.markers.splice(s--,1))}},n=0;n<e.length;n++)t(n)}Bi.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Et(this,"clear")}},Bi.prototype.find=function(e,t){return this.primary.find(e,t)},mr(Bi);var us=0,nr=function(e,t,n,i,l){if(!(this instanceof nr))return new nr(e,t,n,i,l);null==n&&(n=0),Ii.call(this,[new fn([new bi("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var a=O(n,0);this.sel=nn(a),this.history=new mo(null),this.id=++us,this.modeOption=t,this.lineSep=i,this.direction="rtl"==l?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),sl(this,{from:a,to:a,text:e}),Ut(this,nn(a),yt)};nr.prototype=re(Ii.prototype,{constructor:nr,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=_e(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:_t(function(e){var t=O(this.first,0),n=this.first+this.size-1;sn(this,{from:t,to:O(n,oe(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&An(this.cm,0,0),Ut(this,nn(t),yt)}),replaceRange:function(e,t,n,i){oi(this,e,t=ye(this,t),n=n?ye(this,n):t,i)},getRange:function(e,t,n){var i=Rt(this,ye(this,e),ye(this,t));return!1===n?i:i.join(""===n?"":n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(C(this,e))return oe(this,e)},getLineNumber:function(e){return p(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=oe(this,e)),Gr(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return ye(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:_t(function(e,t,n){ta(this,ye(this,"number"==typeof e?O(e,t||0):e),null,n)}),setSelection:_t(function(e,t,n){ta(this,ye(this,e),ye(this,t||e),n)}),extendSelection:_t(function(e,t,n){Fi(this,ye(this,e),t&&ye(this,t),n)}),extendSelections:_t(function(e,t){$l(this,Er(this,e),t)}),extendSelectionsBy:_t(function(e,t){$l(this,Er(this,pe(this.sel.ranges,e)),t)}),setSelections:_t(function(e,t,n){if(e.length){for(var i=[],l=0;l<e.length;l++)i[l]=new Me(ye(this,e[l].anchor),ye(this,e[l].head||e[l].anchor));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Ut(this,zt(this.cm,i,t),n)}}),addSelection:_t(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new Me(ye(this,e),ye(this,t||e))),Ut(this,zt(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var n,t=this.sel.ranges,i=0;i<t.length;i++){var l=Rt(this,t[i].from(),t[i].to());n=n?n.concat(l):l}return!1===e?n:n.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var l=Rt(this,n[i].from(),n[i].to());!1!==e&&(l=l.join(e||this.lineSeparator())),t[i]=l}return t},replaceSelection:function(e,t,n){for(var i=[],l=0;l<this.sel.ranges.length;l++)i[l]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:_t(function(e,t,n){for(var i=[],l=this.sel,a=0;a<l.ranges.length;a++){var s=l.ranges[a];i[a]={from:s.from(),to:s.to(),text:this.splitLines(e[a]),origin:n}}for(var u=t&&"end"!=t&&function vo(e,t,n){for(var i=[],l=O(e.first,0),a=l,s=0;s<t.length;s++){var u=t[s],f=ll(u.from,l,a),c=ll(Zr(u),l,a);if(l=u.to,a=c,"around"==n){var h=e.sel.ranges[s],d=X(h.head,h.anchor)<0;i[s]=new Me(d?c:f,d?f:c)}else i[s]=new Me(f,f)}return new bt(i,e.sel.primIndex)}(this,i,t),f=i.length-1;f>=0;f--)sn(this,i[f]);u?yo(this,u):this.cm&&Di(this.cm)}),undo:_t(function(){Fn(this,"undo")}),redo:_t(function(){Fn(this,"redo")}),undoSelection:_t(function(){Fn(this,"undo",!0)}),redoSelection:_t(function(){Fn(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var l=0;l<e.undone.length;l++)e.undone[l].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){var e=this;this.history=new mo(this.history),ln(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:an(this.history.done),undone:an(this.history.undone)}},setHistory:function(e){var t=this.history=new mo(this.history);t.done=an(e.done.slice(0),null,!0),t.undone=an(e.undone.slice(0),null,!0)},setGutterMarker:_t(function(e,t,n){return un(this,e,"gutter",function(i){var l=i.gutterMarkers||(i.gutterMarkers={});return l[t]=n,!n&&or(l)&&(i.gutterMarkers=null),!0})}),clearGutter:_t(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&un(t,n,"gutter",function(){return n.gutterMarkers[e]=null,or(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!(C(this,e)&&(t=e,e=oe(this,e))))return null}else if(null==(t=p(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:_t(function(e,t,n){return un(this,e,"gutter"==t?"gutter":"class",function(i){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(i[l]){if(x(n).test(i[l]))return!1;i[l]+=" "+n}else i[l]=n;return!0})}),removeLineClass:_t(function(e,t,n){return un(this,e,"gutter"==t?"gutter":"class",function(i){var l="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",a=i[l];if(!a)return!1;if(null==n)i[l]=null;else{var s=a.match(x(n));if(!s)return!1;var u=s.index+s[0].length;i[l]=a.slice(0,s.index)+(s.index&&u!=a.length?" ":"")+a.slice(u)||null}return!0})}),addLineWidget:_t(function(e,t,n){return function Wn(e,t,n,i){var l=new Co(e,n,i),a=e.cm;return a&&l.noHScroll&&(a.display.alignWidgets=!0),un(e,t,"widget",function(s){var u=s.widgets||(s.widgets=[]);if(null==l.insertAt?u.push(l):u.splice(Math.min(u.length,Math.max(0,l.insertAt)),0,l),l.line=s,a&&!$t(e,s)){var f=Hr(s)<e.scrollTop;It(s,s.height+bn(l)),f&&jn(a,l.height),a.curOp.forceUpdate=!0}return!0}),a&&Et(a,"lineWidgetAdded",a,l,"number"==typeof t?t:p(t)),l}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Pi(this,ye(this,e),ye(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return Pi(this,e=ye(this,e),e,n,"bookmark")},findMarksAt:function(e){var t=[],n=oe(this,(e=ye(this,e)).line).markedSpans;if(n)for(var i=0;i<n.length;++i){var l=n[i];(null==l.from||l.from<=e.ch)&&(null==l.to||l.to>=e.ch)&&t.push(l.marker.parent||l.marker)}return t},findMarks:function(e,t,n){e=ye(this,e),t=ye(this,t);var i=[],l=e.line;return this.iter(e.line,t.line+1,function(a){var s=a.markedSpans;if(s)for(var u=0;u<s.length;u++){var f=s[u];!(null!=f.to&&l==e.line&&e.ch>=f.to||null==f.from&&l!=e.line||null!=f.from&&l==t.line&&f.from>=t.ch)&&(!n||n(f.marker))&&i.push(f.marker.parent||f.marker)}++l}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(l){var a=l.text.length+i;if(a>e)return t=e,!0;e-=a,++n}),ye(this,O(n,t))},indexFromPos:function(e){var t=(e=ye(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(i){t+=i.text.length+n}),t},copy:function(e){var t=new nr(_e(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new nr(_e(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function Qs(e,t){for(var n=0;n<t.length;n++){var i=t[n],l=i.find(),a=e.clipPos(l.from),s=e.clipPos(l.to);if(X(a,s)){var u=Pi(e,a,s,i.primary,i.primary.type);i.markers.push(u),u.parent=i}}}(i,ss(this)),i},unlinkDoc:function(e){if(e instanceof at&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t)if(this.linked[t].doc==e){this.linked.splice(t,1),e.unlinkDoc(this),rr(ss(this));break}if(e.history==this.history){var i=[e.id];ln(e,function(l){return i.push(l.id)},!0),e.history=new mo(null),e.history.done=an(this.history.done,i),e.history.undone=an(this.history.undone,i)}},iterLinkedDocs:function(e){ln(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):yr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:_t(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(t){return t.order=null}),this.cm&&function Jl(e){et(e,function(){go(e),St(e)})}(this.cm))})}),nr.prototype.eachLine=nr.prototype.iter;var fs=0;function Vs(e){var t=this;if(sa(t),!Be(t,e)&&!Ir(t.display,e)){Ht(e),de&&(fs=+new Date);var n=Dt(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var l=i.length,a=Array(l),s=0,u=function(){++s==l&&Oe(t,function(){var m={from:n=ye(t.doc,n),to:n,text:t.doc.splitLines(a.filter(function(w){return null!=w}).join(t.doc.lineSeparator())),origin:"paste"};sn(t.doc,m),yo(t.doc,nn(ye(t.doc,n),ye(t.doc,Zr(m))))})()},f=function(m,w){if(t.options.allowDropFileTypes&&-1==_(t.options.allowDropFileTypes,m.type))u();else{var k=new FileReader;k.onerror=function(){return u()},k.onload=function(){var M=k.result;/[\x00-\x08\x0e-\x1f]{2}/.test(M)||(a[w]=M),u()},k.readAsText(m)}},c=0;c<i.length;c++)f(i[c],c);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var h=e.dataTransfer.getData("Text");if(h){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),xo(t.doc,nn(n,n)),d)for(var g=0;g<d.length;++g)oi(t.doc,"",d[g].anchor,d[g].head,"drag");t.replaceSelection(h,"around","paste"),t.display.input.focus()}}catch{}}}}function sa(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function ds(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var l=t[i].CodeMirror;l&&n.push(l)}n.length&&n[0].operation(function(){for(var a=0;a<n.length;a++)e(n[a])})}}var ps=!1;function So(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Rr={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},cn=0;cn<10;cn++)Rr[cn+48]=Rr[cn+96]=String(cn);for(var Tr=65;Tr<=90;Tr++)Rr[Tr]=String.fromCharCode(Tr);for(var ko=1;ko<=12;ko++)Rr[ko+111]=Rr[ko+63235]="F"+ko;var hn={};function _i(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,i,l,a,s=0;s<t.length-1;s++){var u=t[s];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else{if(!/^s(hift)?$/i.test(u))throw new Error("Unrecognized modifier name: "+u);l=!0}}return n&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Cmd-"+e),l&&(e="Shift-"+e),e}function vs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var l=pe(n.split(" "),_i),a=0;a<l.length;a++){var s=void 0,u=void 0;a==l.length-1?(u=l.join(" "),s=i):(u=l.slice(0,a+1).join(" "),s="...");var f=t[u];if(f){if(f!=s)throw new Error("Inconsistent bindings for "+u)}else t[u]=s}delete e[n]}for(var c in t)e[c]=t[c];return e}function ai(e,t,n,i){var l=(t=Ri(t)).call?t.call(e,i):t[e];if(!1===l)return"nothing";if("..."===l)return"multi";if(null!=l&&n(l))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return ai(e,t.fallthrough,n,i);for(var a=0;a<t.fallthrough.length;a++){var s=ai(e,t.fallthrough[a],n,i);if(s)return s}}}function ua(e){var t="string"==typeof e?e:Rr[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function Lo(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(T?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(T?t.ctrlKey:t.metaKey)&&"Mod"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function si(e,t){if(he&&34==e.keyCode&&e.char)return!1;var n=Rr[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),Lo(n,e,t))}function Ri(e){return"string"==typeof e?hn[e]:e}function In(e,t){for(var n=e.doc.sel.ranges,i=[],l=0;l<n.length;l++){for(var a=t(n[l]);i.length&&X(a.from,I(i).to)<=0;){var s=i.pop();if(X(s.from,a.from)<0){a.from=s.from;break}}i.push(a)}et(e,function(){for(var u=i.length-1;u>=0;u--)oi(e.doc,"",i[u].from,i[u].to,"+delete");Di(e)})}function To(e,t,n){var i=Wt(e.text,t+n,n);return i<0||i>e.text.length?null:i}function fa(e,t,n){var i=To(e,t.ch,n);return null==i?null:new O(t.line,i,n<0?"after":"before")}function ui(e,t,n,i,l){if(e){"rtl"==t.doc.direction&&(l=-l);var a=Z(n,t.doc.direction);if(a){var c,s=l<0?I(a):a[0],f=l<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var h=Gn(t,n),d=Pr(t,h,c=l<0?n.text.length-1:0).top;c=it(function(g){return Pr(t,h,g).top==d},l<0==(1==s.level)?s.from:s.to-1,c),"before"==f&&(c=To(n,c,1))}else c=l<0?s.to:s.from;return new O(i,c,f)}}return new O(i,l<0?n.text.length:0,l<0?"before":"after")}hn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},hn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},hn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},hn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},hn.default=Pe?hn.macDefault:hn.pcDefault;var Mo={selectAll:ii,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),yt)},killLine:function(e){return In(e,function(t){if(t.empty()){var n=oe(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:O(t.head.line+1,0)}:{from:t.head,to:O(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return In(e,function(t){return{from:O(t.from().line,0),to:ye(e.doc,O(t.to().line+1,0))}})},delLineLeft:function(e){return In(e,function(t){return{from:O(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(e){return In(e,function(t){var n=e.charCoords(t.head,"div").top+5;return{from:e.coordsChar({left:0,top:n},"div"),to:t.from()}})},delWrappedLineRight:function(e){return In(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(O(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(O(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return ca(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return ms(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function dl(e,t){var n=oe(e.doc,t),i=function Nl(e){for(var t;t=$i(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=p(i)),ui(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},wt)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},wt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?ms(e,t.head):i},wt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,l=0;l<n.length;l++){var a=n[l].from(),s=D(e.getLine(a.line),a.ch,i);t.push(tr(i-s%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return et(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var l=t[i].head,a=oe(e.doc,l.line).text;if(a)if(l.ch==a.length&&(l=new O(l.line,l.ch-1)),l.ch>0)l=new O(l.line,l.ch+1),e.replaceRange(a.charAt(l.ch-1)+a.charAt(l.ch-2),O(l.line,l.ch-2),l,"+transpose");else if(l.line>e.doc.first){var s=oe(e.doc,l.line-1).text;s&&(l=new O(l.line,1),e.replaceRange(a.charAt(0)+e.doc.lineSeparator()+s.charAt(s.length-1),O(l.line-1,s.length-1),l,"+transpose"))}n.push(new Me(l,l))}e.setSelections(n)})},newlineAndIndent:function(e){return et(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Di(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function ca(e,t){var n=oe(e.doc,t),i=Gr(n);return i!=n&&(t=p(i)),ui(!0,e,i,t,1)}function ms(e,t){var n=ca(e,t.line),i=oe(e.doc,n.line),l=Z(i,e.doc.direction);if(!l||0==l[0].level){var a=Math.max(n.ch,i.text.search(/\S/));return O(n.line,t.line==n.line&&t.ch<=a&&t.ch?0:a,n.sticky)}return n}function pl(e,t,n){if("string"==typeof t&&!(t=Mo[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,l=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),l=t(e)!=Ce}finally{e.display.shift=i,e.state.suppressEdits=!1}return l}var ys=new le;function zi(e,t,n,i){var l=e.state.keySeq;if(l){if(ua(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ys.set(50,function(){e.state.keySeq==l&&(e.state.keySeq=null,e.display.input.reset())}),xs(e,l+" "+t,n,i))return!0}return xs(e,t,n,i)}function xs(e,t,n,i){var l=function Ao(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var l=ai(t,e.state.keyMaps[i],n,e);if(l)return l}return e.options.extraKeys&&ai(t,e.options.extraKeys,n,e)||ai(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==l&&(e.state.keySeq=t),"handled"==l&&Et(e,"keyHandled",e,t,n),("handled"==l||"multi"==l)&&(Ht(n),fo(e)),!!l}function vl(e,t){var n=si(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?zi(e,"Shift-"+n,t,function(i){return pl(e,i,!0)})||zi(e,n,t,function(i){if("string"==typeof i?/^go[A-Z]/.test(i):i.motion)return pl(e,i)}):zi(e,n,t,function(i){return pl(e,i)}))}var ha=null;function da(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||(t.curOp.focus=v(),Be(t,e)))){de&&Se<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=vl(t,e);he&&(ha=i?n:null,!i&&88==n&&!Ho&&(Pe?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),Le&&!Pe&&!i&&46==n&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==n&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&function ws(e){var t=e.display.lineDiv;function n(i){(18==i.keyCode||!i.altKey)&&(q(t,"CodeMirror-crosshair"),Fe(document,"keyup",n),Fe(document,"mouseover",n))}V(t,"CodeMirror-crosshair"),ne(document,"keyup",n),ne(document,"mouseover",n)}(t)}}function Cs(e){16==e.keyCode&&(this.doc.sel.shift=!1),Be(this,e)}function gl(e){var t=this;if(!(e.target&&e.target!=t.display.input.getField()||Ir(t.display,e)||Be(t,e)||e.ctrlKey&&!e.altKey||Pe&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(he&&n==ha)return ha=null,void Ht(e);if(!he||e.which&&!(e.which<10)||!vl(t,e)){var l=String.fromCharCode(i??n);"\b"!=l&&(function bs(e,t,n){return zi(e,"'"+n+"'",t,function(i){return pl(e,i,!0)})}(t,e,l)||t.display.input.onKeyPress(e))}}}var No,Ui,fi=function(e,t,n){this.time=e,this.pos=t,this.button=n};function Ss(e){var t=this,n=t.display;if(!(Be(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,Ir(n,e))return void(Xe||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!ga(t,e)){var i=Dt(t,e),l=fr(e),a=i?function eu(e,t){var n=+new Date;return Ui&&Ui.compare(n,e,t)?(No=Ui=null,"triple"):No&&No.compare(n,e,t)?(Ui=new fi(n,e,t),No=null,"double"):(No=new fi(n,e,t),Ui=null,"single")}(i,l):"single";window.focus(),1==l&&t.state.selectingText&&t.state.selectingText(e),(!i||!function tu(e,t,n,i,l){var a="Click";return"double"==i?a="Double"+a:"triple"==i&&(a="Triple"+a),zi(e,Lo(a=(1==t?"Left":2==t?"Middle":"Right")+a,l),l,function(s){if("string"==typeof s&&(s=Mo[s]),!s)return!1;var u=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),u=s(e,n)!=Ce}finally{e.state.suppressEdits=!1}return u})}(t,l,i,a,e))&&(1==l?i?function ks(e,t,n,i){de?setTimeout(Q(el,e),0):e.curOp.focus=v();var s,l=function ru(e,t,n){var i=e.getOption("configureMouse"),l=i?i(e,t,n):{};return null==l.unit&&(l.unit=(Nt?n.shiftKey&&n.metaKey:n.altKey)?"rectangle":"single"==t?"char":"double"==t?"word":"line"),(null==l.extend||e.doc.extend)&&(l.extend=e.doc.extend||n.shiftKey),null==l.addNew&&(l.addNew=Pe?n.metaKey:n.ctrlKey),null==l.moveOnDrag&&(l.moveOnDrag=!(Pe?n.altKey:n.ctrlKey)),l}(e,n,i),a=e.doc.sel;e.options.dragDrop&&Sl&&!e.isReadOnly()&&"single"==n&&(s=a.contains(t))>-1&&(X((s=a.ranges[s]).from(),t)<0||t.xRel>0)&&(X(s.to(),t)>0||t.xRel<0)?function nu(e,t,n,i){var l=e.display,a=!1,s=Oe(e,function(c){Xe&&(l.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Tn(e)),Fe(l.wrapper.ownerDocument,"mouseup",s),Fe(l.wrapper.ownerDocument,"mousemove",u),Fe(l.scroller,"dragstart",f),Fe(l.scroller,"drop",s),a||(Ht(c),i.addNew||Fi(e.doc,n,null,null,i.extend),Xe&&!je||de&&9==Se?setTimeout(function(){l.wrapper.ownerDocument.body.focus({preventScroll:!0}),l.input.focus()},20):l.input.focus())}),u=function(c){a=a||Math.abs(t.clientX-c.clientX)+Math.abs(t.clientY-c.clientY)>=10},f=function(){return a=!0};Xe&&(l.scroller.draggable=!0),e.state.draggingText=s,s.copy=!i.moveOnDrag,ne(l.wrapper.ownerDocument,"mouseup",s),ne(l.wrapper.ownerDocument,"mousemove",u),ne(l.scroller,"dragstart",f),ne(l.scroller,"drop",s),e.state.delayingBlurEvent=!0,setTimeout(function(){return l.input.focus()},20),l.scroller.dragDrop&&l.scroller.dragDrop()}(e,i,t,l):function Ts(e,t,n,i){de&&Tn(e);var l=e.display,a=e.doc;Ht(t);var s,u,f=a.sel,c=f.ranges;if(i.addNew&&!i.extend?(u=a.sel.contains(n),s=u>-1?c[u]:new Me(n,n)):(s=a.sel.primary(),u=a.sel.primIndex),"rectangle"==i.unit)i.addNew||(s=new Me(n,n)),n=Dt(e,t,!0,!0),u=-1;else{var h=Ls(e,n,i.unit);s=i.extend?hl(s,h.anchor,h.head,i.extend):h}i.addNew?-1==u?(u=c.length,Ut(a,zt(e,c.concat([s]),u),{scroll:!1,origin:"*mouse"})):c.length>1&&c[u].empty()&&"char"==i.unit&&!i.extend?(Ut(a,zt(e,c.slice(0,u).concat(c.slice(u+1)),0),{scroll:!1,origin:"*mouse"}),f=a.sel):ea(a,u,s,er):(u=0,Ut(a,new bt([s],0),er),f=a.sel);var d=n;var m=l.wrapper.getBoundingClientRect(),w=0;function k(W){var H=++w,z=Dt(e,W,!0,"rectangle"==i.unit);if(z)if(0!=X(z,d)){e.curOp.focus=v(),function g(W){if(0!=X(d,W))if(d=W,"rectangle"==i.unit){for(var H=[],z=e.options.tabSize,Y=D(oe(a,n.line).text,n.ch,z),fe=D(oe(a,W.line).text,W.ch,z),ge=Math.min(Y,fe),Ke=Math.max(Y,fe),Ae=Math.min(n.line,W.line),Re=Math.min(e.lastLine(),Math.max(n.line,W.line));Ae<=Re;Ae++){var tt=oe(a,Ae).text,De=At(tt,ge,z);ge==Ke?H.push(new Me(O(Ae,De),O(Ae,De))):tt.length>De&&H.push(new Me(O(Ae,De),O(Ae,At(tt,Ke,z))))}H.length||H.push(new Me(n,n)),Ut(a,zt(e,f.ranges.slice(0,u).concat(H),u),{origin:"*mouse",scroll:!1}),e.scrollIntoView(W)}else{var He,ze=s,Ne=Ls(e,W,i.unit),ke=ze.anchor;X(Ne.anchor,ke)>0?(He=Ne.head,ke=ve(ze.from(),Ne.anchor)):(He=Ne.anchor,ke=Vt(ze.to(),Ne.head));var lt=f.ranges.slice(0);lt[u]=function pa(e,t){var n=t.anchor,i=t.head,l=oe(e.doc,n.line);if(0==X(n,i)&&n.sticky==i.sticky)return t;var a=Z(l);if(!a)return t;var s=Qt(a,n.ch,n.sticky),u=a[s];if(u.from!=n.ch&&u.to!=n.ch)return t;var c,f=s+(u.from==n.ch==(1!=u.level)?0:1);if(0==f||f==a.length)return t;if(i.line!=n.line)c=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var h=Qt(a,i.ch,i.sticky),d=h-s||(i.ch-n.ch)*(1==u.level?-1:1);c=h==f-1||h==f?d<0:d>0}var g=a[f+(c?-1:0)],m=c==(1==g.level),w=m?g.from:g.to,k=m?"after":"before";return n.ch==w&&n.sticky==k?t:new Me(new O(n.line,w,k),i)}(e,new Me(ye(a,ke),He)),Ut(a,zt(e,lt,u),er)}}(z);var Y=tl(l,a);(z.line>=Y.to||z.line<Y.from)&&setTimeout(Oe(e,function(){w==H&&k(W)}),150)}else{var fe=W.clientY<m.top?-20:W.clientY>m.bottom?20:0;fe&&setTimeout(Oe(e,function(){w==H&&(l.scroller.scrollTop+=fe,k(W))}),50)}}function M(W){e.state.selectingText=!1,w=1/0,W&&(Ht(W),l.input.focus()),Fe(l.wrapper.ownerDocument,"mousemove",A),Fe(l.wrapper.ownerDocument,"mouseup",E),a.history.lastSelOrigin=null}var A=Oe(e,function(W){0!==W.buttons&&fr(W)?k(W):M(W)}),E=Oe(e,M);e.state.selectingText=E,ne(l.wrapper.ownerDocument,"mousemove",A),ne(l.wrapper.ownerDocument,"mouseup",E)}(e,i,t,l)}(t,i,a,e):qi(e)==n.scroller&&Ht(e):2==l?(i&&Fi(t.doc,i),setTimeout(function(){return n.input.focus()},20)):3==l&&(ee?t.display.input.onContextMenu(e):Tn(t)))}}}function Ls(e,t,n){if("char"==n)return new Me(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new Me(O(t.line,0),ye(e.doc,O(t.line+1,0)));var i=n(e,t);return new Me(i.from,i.to)}function va(e,t,n,i){var l,a;if(t.touches)l=t.touches[0].clientX,a=t.touches[0].clientY;else try{l=t.clientX,a=t.clientY}catch{return!1}if(l>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Ht(t);var s=e.display,u=s.lineDiv.getBoundingClientRect();if(a>u.bottom||!ot(e,n))return Kt(t);a-=u.top-s.viewOffset;for(var f=0;f<e.display.gutterSpecs.length;++f){var c=s.gutters.childNodes[f];if(c&&c.getBoundingClientRect().right>=l)return mt(e,n,e,b(e.doc,a),e.display.gutterSpecs[f].className,t),Kt(t)}}function ga(e,t){return va(e,t,"gutterClick",!0)}function ma(e,t){Ir(e.display,t)||function Gi(e,t){return!!ot(e,"gutterContextMenu")&&va(e,t,"gutterContextMenu",!1)}(e,t)||Be(e,t,"contextmenu")||ee||e.display.input.onContextMenu(t)}function ya(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Li(e)}fi.prototype.compare=function(e,t,n){return this.time+400>e&&0==X(t,this.pos)&&n==this.button};var dn={toString:function(){return"CodeMirror.Init"}},Ms={},ml={};function ht(e,t,n){if(!t!=!(n&&n!=dn)){var l=e.display.dragFunctions,a=t?ne:Fe;a(e.display.scroller,"dragstart",l.start),a(e.display.scroller,"dragenter",l.enter),a(e.display.scroller,"dragover",l.over),a(e.display.scroller,"dragleave",l.leave),a(e.display.scroller,"drop",l.drop)}}function ou(e){e.options.lineWrapping?(V(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(q(e.display.wrapper,"CodeMirror-wrap"),Ol(e)),$r(e),St(e),Li(e),setTimeout(function(){return Jn(e)},100)}function at(e,t){var n=this;if(!(this instanceof at))return new at(e,t);this.options=t=t?N(t):{},N(Ms,t,!1);var i=t.value;"string"==typeof i?i=new nr(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var l=new at.inputStyles[t.inputStyle](this),a=this.display=new tn(e,i,l,t);for(var s in a.wrapper.CodeMirror=this,ya(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Nn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new le,keySeq:null,specialChars:null},t.autofocus&&!vt&&a.input.focus(),de&&Se<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function Oo(e){var t=e.display;ne(t.scroller,"mousedown",Oe(e,Ss)),ne(t.scroller,"dblclick",de&&Se<11?Oe(e,function(f){if(!Be(e,f)){var c=Dt(e,f);if(c&&!ga(e,f)&&!Ir(e.display,f)){Ht(f);var h=e.findWordAt(c);Fi(e.doc,h.anchor,h.head)}}}):function(f){return Be(e,f)||Ht(f)}),ne(t.scroller,"contextmenu",function(f){return ma(e,f)}),ne(t.input.getField(),"contextmenu",function(f){t.scroller.contains(f.target)||ma(e,f)});var n,i={end:0};function l(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(i=t.activeTouch).end=+new Date)}function s(f,c){if(null==c.left)return!0;var h=c.left-f.left,d=c.top-f.top;return h*h+d*d>400}ne(t.scroller,"touchstart",function(f){if(!Be(e,f)&&!function a(f){if(1!=f.touches.length)return!1;var c=f.touches[0];return c.radiusX<=1&&c.radiusY<=1}(f)&&!ga(e,f)){t.input.ensurePolled(),clearTimeout(n);var c=+new Date;t.activeTouch={start:c,moved:!1,prev:c-i.end<=300?i:null},1==f.touches.length&&(t.activeTouch.left=f.touches[0].pageX,t.activeTouch.top=f.touches[0].pageY)}}),ne(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),ne(t.scroller,"touchend",function(f){var c=t.activeTouch;if(c&&!Ir(t,f)&&null!=c.left&&!c.moved&&new Date-c.start<300){var d,h=e.coordsChar(t.activeTouch,"page");d=!c.prev||s(c,c.prev)?new Me(h,h):!c.prev.prev||s(c,c.prev.prev)?e.findWordAt(h):new Me(O(h.line,0),ye(e.doc,O(h.line+1,0))),e.setSelection(d.anchor,d.head),e.focus(),Ht(f)}l()}),ne(t.scroller,"touchcancel",l),ne(t.scroller,"scroll",function(){t.scroller.clientHeight&&(_r(e,t.scroller.scrollTop),dr(e,t.scroller.scrollLeft,!0),mt(e,"scroll",e))}),ne(t.scroller,"mousewheel",function(f){return qe(e,f)}),ne(t.scroller,"DOMMouseScroll",function(f){return qe(e,f)}),ne(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(f){Be(e,f)||Yr(f)},over:function(f){Be(e,f)||(function hs(e,t){var n=Dt(e,t);if(n){var i=document.createDocumentFragment();_l(e,n,i),e.display.dragCursor||(e.display.dragCursor=J("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),te(e.display.dragCursor,i)}}(e,f),Yr(f))},start:function(f){return function cs(e,t){if(de&&(!e.state.draggingText||+new Date-fs<100))Yr(t);else if(!Be(e,t)&&!Ir(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!je)){var n=J("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",he&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),he&&n.parentNode.removeChild(n)}}(e,f)},drop:Oe(e,Vs),leave:function(f){Be(e,f)||sa(e)}};var u=t.input.getField();ne(u,"keyup",function(f){return Cs.call(e,f)}),ne(u,"keydown",Oe(e,da)),ne(u,"keypress",Oe(e,gl)),ne(u,"focus",function(f){return Ai(e,f)}),ne(u,"blur",function(f){return Yn(e,f)})}(this),function $s(){ps||(function Hn(){var e;ne(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,ds(So)},100))}),ne(window,"blur",function(){return ds(Yn)})}(),ps=!0)}(),Vn(this),this.curOp.forceUpdate=!0,ts(this,i),t.autofocus&&!vt||this.hasFocus()?setTimeout(function(){n.hasFocus()&&!n.state.focused&&Ai(n)},20):Yn(this),ml)ml.hasOwnProperty(s)&&ml[s](this,t[s],dn);Kl(this),t.finishInit&&t.finishInit(this);for(var u=0;u<vr.length;++u)vr[u](this);$n(this),Xe&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(a.lineDiv).textRendering&&(a.lineDiv.style.textRendering="auto")}at.defaults=Ms,at.optionHandlers=ml;var vr=[];function Pn(e,t,n,i){var a,l=e.doc;null==n&&(n="add"),"smart"==n&&(l.mode.indent?a=mi(e,t).state:n="prev");var s=e.options.tabSize,u=oe(l,t),f=D(u.text,null,s);u.stateAfter&&(u.stateAfter=null);var h,c=u.text.match(/^\s*/)[0];if(i||/\S/.test(u.text)){if("smart"==n&&((h=l.mode.indent(a,u.text.slice(c.length),u.text))==Ce||h>150)){if(!i)return;n="prev"}}else h=0,n="not";"prev"==n?h=t>l.first?D(oe(l,t-1).text,null,s):0:"add"==n?h=f+e.options.indentUnit:"subtract"==n?h=f-e.options.indentUnit:"number"==typeof n&&(h=f+n),h=Math.max(0,h);var d="",g=0;if(e.options.indentWithTabs)for(var m=Math.floor(h/s);m;--m)g+=s,d+="\t";if(g<h&&(d+=tr(h-g)),d!=c)return oi(l,d,O(t,0),O(t,c.length),"+input"),u.stateAfter=null,!0;for(var w=0;w<l.sel.ranges.length;w++){var k=l.sel.ranges[w];if(k.head.line==t&&k.head.ch<c.length){var M=O(t,c.length);ea(l,w,new Me(M,M));break}}}at.defineInitHook=function(e){return vr.push(e)};var gr=null;function Eo(e){gr=e}function yl(e,t,n,i,l){var a=e.doc;e.display.shift=!1,i||(i=a.sel);var s=+new Date-200,u="paste"==l||e.state.pasteIncoming>s,f=yr(t),c=null;if(u&&i.ranges.length>1)if(gr&&gr.text.join("\n")==t){if(i.ranges.length%gr.text.length==0){c=[];for(var h=0;h<gr.text.length;h++)c.push(a.splitLines(gr.text[h]))}}else f.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(c=pe(f,function(A){return[A]}));for(var d=e.curOp.updateInput,g=i.ranges.length-1;g>=0;g--){var m=i.ranges[g],w=m.from(),k=m.to();m.empty()&&(n&&n>0?w=O(w.line,w.ch-n):e.state.overwrite&&!u?k=O(k.line,Math.min(oe(a,k.line).text.length,k.ch+I(f).length)):u&&gr&&gr.lineWise&&gr.text.join("\n")==f.join("\n")&&(w=k=O(w.line,0)));var M={from:w,to:k,text:c?c[g%c.length]:f,origin:l||(u?"paste":e.state.cutIncoming>s?"cut":"+input")};sn(e.doc,M),Et(e,"inputRead",e,M)}t&&!u&&xl(e,t),Di(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function xa(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),!t.isReadOnly()&&!t.options.disableInput&&et(t,function(){return yl(t,n,0,null,"paste")}),!0}function xl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var l=n.ranges[i];if(!(l.head.ch>100||i&&n.ranges[i-1].head.line==l.head.line)){var a=e.getModeAt(l.head),s=!1;if(a.electricChars){for(var u=0;u<a.electricChars.length;u++)if(t.indexOf(a.electricChars.charAt(u))>-1){s=Pn(e,l.head.line,"smart");break}}else a.electricInput&&a.electricInput.test(oe(e.doc,l.head.line).text.slice(0,l.head.ch))&&(s=Pn(e,l.head.line,"smart"));s&&Et(e,"electricInput",e,l.head.line)}}}function ba(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var l=e.doc.sel.ranges[i].head.line,a={anchor:O(l,0),head:O(l+1,0)};n.push(a),t.push(e.getRange(a.anchor,a.head))}return{text:t,ranges:n}}function As(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function bl(){var e=J("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),t=J("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Xe?e.style.width="1000px":e.setAttribute("wrap","off"),rt&&(e.style.border="1px solid black"),As(e),t}function Ze(e,t,n,i,l){var a=t,s=n,u=oe(e,t.line),f=l&&"rtl"==e.direction?-n:n;function h(E){var W;if("codepoint"==i){var H=u.text.charCodeAt(t.ch+(n>0?0:-1));W=isNaN(H)?null:new O(t.line,Math.max(0,Math.min(u.text.length,t.ch+n*((n>0?H>=55296&&H<56320:H>=56320&&H<57343)?2:1))),-n)}else W=l?function gs(e,t,n,i){var l=Z(t,e.doc.direction);if(!l)return fa(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var a=Qt(l,n.ch,n.sticky),s=l[a];if("ltr"==e.doc.direction&&s.level%2==0&&(i>0?s.to>n.ch:s.from<n.ch))return fa(t,n,i);var f,u=function(A,E){return To(t,A instanceof O?A.ch:A,E)},c=function(A){return e.options.lineWrapping?(f=f||Gn(e,t),Ya(e,t,f,A)):{begin:0,end:t.text.length}},h=c("before"==n.sticky?u(n,-1):n.ch);if("rtl"==e.doc.direction||1==s.level){var d=1==s.level==i<0,g=u(n,d?1:-1);if(null!=g&&(d?g<=s.to&&g<=h.end:g>=s.from&&g>=h.begin))return new O(n.line,g,d?"before":"after")}var w=function(A,E,W){for(;A>=0&&A<l.length;A+=E){var z=l[A],Y=E>0==(1!=z.level),fe=Y?W.begin:u(W.end,-1);if(z.from<=fe&&fe<z.to||(fe=Y?z.from:u(z.to,-1),W.begin<=fe&&fe<W.end))return ge=fe,Y?new O(n.line,u(ge,1),"before"):new O(n.line,ge,"after")}var ge},k=w(a+i,i,h);if(k)return k;var M=i>0?h.end:u(h.begin,-1);return null==M||i>0&&M==t.text.length||!(k=w(i>0?0:l.length-1,i,c(M)))?null:k}(e.cm,u,t,n):fa(u,t,n);if(null==W){if(E||!function c(){var E=t.line+f;return!(E<e.first||E>=e.first+e.size)&&(t=new O(E,t.ch,t.sticky),u=oe(e,E))}())return!1;t=ui(l,e.cm,u,t.line,f)}else t=W;return!0}if("char"==i||"codepoint"==i)h();else if("column"==i)h(!0);else if("word"==i||"group"==i)for(var d=null,g="group"==i,m=e.cm&&e.cm.getHelper(t,"wordChars"),w=!0;!(n<0)||h(!w);w=!1){var k=u.text.charAt(t.ch)||"\n",M=qt(k,m)?"w":g&&"\n"==k?"n":!g||/\s/.test(k)?null:"p";if(g&&!w&&!M&&(M="s"),d&&d!=M){n<0&&(n=1,h(),t.sticky="after");break}if(M&&(d=M),n>0&&!h(!w))break}var A=wo(e,t,a,s,!0);return We(a,A)&&(A.hitSide=!0),A}function wa(e,t,n,i){var s,c,l=e.doc,a=t.left;if("page"==i){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),f=Math.max(u-.5*Cn(e.display),3);s=(n>0?t.bottom:t.top)+n*f}else"line"==i&&(s=n>0?t.bottom+3:t.top-3);for(;(c=Qo(e,a,s)).outside;){if(n<0?s<=0:s>=l.height){c.hitSide=!0;break}s+=5*n}return c}var Qe=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new le,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function ci(e,t){var n=wr(e,t.line);if(!n||n.hidden)return null;var i=oe(e.doc,t.line),l=Wl(n,i,t.line),a=Z(i,e.doc.direction),s="left";a&&(s=Qt(a,t.ch)%2?"right":"left");var f=qa(l.map,t.ch,s);return f.offset="right"==f.collapse?f.end:f.start,f}function pn(e,t){return t&&(e.bad=!0),e}function dt(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return pn(e.clipPos(O(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var l=0;l<e.display.view.length;l++){var a=e.display.view[l];if(a.node==i)return su(a,t,n)}}function su(e,t,n){var i=e.text.firstChild,l=!1;if(!t||!S(i,t))return pn(O(p(e.line),0),!0);if(t==i&&(l=!0,t=i.childNodes[n],n=0,!t)){var a=e.rest?I(e.rest):e.line;return pn(O(p(a),a.text.length),l)}var s=3==t.nodeType?t:null,u=t;for(!s&&1==t.childNodes.length&&3==t.firstChild.nodeType&&(s=t.firstChild,n&&(n=s.nodeValue.length));u.parentNode!=i;)u=u.parentNode;var f=e.measure,c=f.maps;function h(M,A,E){for(var W=-1;W<(c?c.length:0);W++)for(var H=W<0?f.map:c[W],z=0;z<H.length;z+=3){var Y=H[z+2];if(Y==M||Y==A){var fe=p(W<0?e.line:e.rest[W]),ge=H[z]+E;return(E<0||Y!=M)&&(ge=H[z+(E?1:0)]),O(fe,ge)}}}var d=h(s,u,n);if(d)return pn(d,l);for(var g=u.nextSibling,m=s?s.nodeValue.length-n:0;g;g=g.nextSibling){if(d=h(g,g.firstChild,0))return pn(O(d.line,d.ch-m),l);m+=g.textContent.length}for(var w=u.previousSibling,k=n;w;w=w.previousSibling){if(d=h(w,w.firstChild,-1))return pn(O(d.line,d.ch+k),l);k+=w.textContent.length}}Qe.prototype.init=function(e){var t=this,n=this,i=n.cm,l=n.div=e.lineDiv;function a(u){for(var f=u.target;f;f=f.parentNode){if(f==l)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(f.className))break}return!1}function s(u){if(a(u)&&!Be(i,u)){if(i.somethingSelected())Eo({lineWise:!1,text:i.getSelections()}),"cut"==u.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var f=ba(i);Eo({lineWise:!0,text:f.text}),"cut"==u.type&&i.operation(function(){i.setSelections(f.ranges,0,yt),i.replaceSelection("",null,"cut")})}if(u.clipboardData){u.clipboardData.clearData();var c=gr.text.join("\n");if(u.clipboardData.setData("Text",c),u.clipboardData.getData("Text")==c)return void u.preventDefault()}var h=bl(),d=h.firstChild;i.display.lineSpace.insertBefore(h,i.display.lineSpace.firstChild),d.value=gr.text.join("\n");var g=v();U(d),setTimeout(function(){i.display.lineSpace.removeChild(h),g.focus(),g==l&&n.showPrimarySelection()},50)}}l.contentEditable=!0,As(l,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),ne(l,"paste",function(u){!a(u)||Be(i,u)||xa(u,i)||Se<=11&&setTimeout(Oe(i,function(){return t.updateFromDOM()}),20)}),ne(l,"compositionstart",function(u){t.composing={data:u.data,done:!1}}),ne(l,"compositionupdate",function(u){t.composing||(t.composing={data:u.data,done:!1})}),ne(l,"compositionend",function(u){t.composing&&(u.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),ne(l,"touchstart",function(){return n.forceCompositionEnd()}),ne(l,"input",function(){t.composing||t.readFromDOMSoon()}),ne(l,"copy",s),ne(l,"cut",s)},Qe.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},Qe.prototype.prepareSelection=function(){var e=uo(this.cm,!1);return e.focus=v()==this.div,e},Qe.prototype.showSelection=function(e,t){!e||!this.cm.display.view.length||((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Qe.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Qe.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,n=t.doc.sel.primary(),i=n.from(),l=n.to();if(t.display.viewTo==t.display.viewFrom||i.line>=t.display.viewTo||l.line<t.display.viewFrom)e.removeAllRanges();else{var a=dt(t,e.anchorNode,e.anchorOffset),s=dt(t,e.focusNode,e.focusOffset);if(!a||a.bad||!s||s.bad||0!=X(ve(a,s),i)||0!=X(Vt(a,s),l)){var u=t.display.view,f=i.line>=t.display.viewFrom&&ci(t,i)||{node:u[0].measure.map[2],offset:0},c=l.line<t.display.viewTo&&ci(t,l);if(!c){var h=u[u.length-1].measure,d=h.maps?h.maps[h.maps.length-1]:h.map;c={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}}if(!f||!c)return void e.removeAllRanges();var m,g=e.rangeCount&&e.getRangeAt(0);try{m=gt(f.node,f.offset,c.offset,c.node)}catch{}m&&(!Le&&t.state.focused?(e.collapse(f.node,f.offset),m.collapsed||(e.removeAllRanges(),e.addRange(m))):(e.removeAllRanges(),e.addRange(m)),g&&null==e.anchorNode?e.addRange(g):Le&&this.startGracePeriod()),this.rememberSelection()}}},Qe.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Qe.prototype.showMultipleSelections=function(e){te(this.cm.display.cursorDiv,e.cursors),te(this.cm.display.selectionDiv,e.selection)},Qe.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Qe.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return S(this.div,t)},Qe.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||v()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Qe.prototype.blur=function(){this.div.blur()},Qe.prototype.getField=function(){return this.div},Qe.prototype.supportsTouch=function(){return!0},Qe.prototype.receivedFocus=function(){var e=this,t=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):et(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function n(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,n))})},Qe.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Qe.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(y&&ut&&this.cm.display.gutterSpecs.length&&function lu(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=dt(t,e.anchorNode,e.anchorOffset),i=dt(t,e.focusNode,e.focusOffset);n&&i&&et(t,function(){Ut(t.doc,nn(n,i),yt),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},Qe.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a,s,u,e=this.cm,t=e.display,n=e.doc.sel.primary(),i=n.from(),l=n.to();if(0==i.ch&&i.line>e.firstLine()&&(i=O(i.line-1,oe(e.doc,i.line-1).length)),l.ch==oe(e.doc,l.line).text.length&&l.line<e.lastLine()&&(l=O(l.line+1,0)),i.line<t.viewFrom||l.line>t.viewTo-1)return!1;i.line==t.viewFrom||0==(a=sr(e,i.line))?(s=p(t.view[0].line),u=t.view[0].node):(s=p(t.view[a].line),u=t.view[a-1].node.nextSibling);var c,h,f=sr(e,l.line);if(f==t.view.length-1?(c=t.viewTo-1,h=t.lineDiv.lastChild):(c=p(t.view[f+1].line)-1,h=t.view[f+1].node.previousSibling),!u)return!1;for(var d=e.doc.splitLines(function au(e,t,n,i,l){var a="",s=!1,u=e.doc.lineSeparator(),f=!1;function h(){s&&(a+=u,f&&(a+=u),s=f=!1)}function d(m){m&&(h(),a+=m)}function g(m){if(1==m.nodeType){var w=m.getAttribute("cm-text");if(w)return void d(w);var M,k=m.getAttribute("cm-marker");if(k){var A=e.findMarks(O(i,0),O(l+1,0),function c(m){return function(w){return w.id==m}}(+k));return void(A.length&&(M=A[0].find(0))&&d(Rt(e.doc,M.from,M.to).join(u)))}if("false"==m.getAttribute("contenteditable"))return;var E=/^(pre|div|p|li|table|br)$/i.test(m.nodeName);if(!/^br$/i.test(m.nodeName)&&0==m.textContent.length)return;E&&h();for(var W=0;W<m.childNodes.length;W++)g(m.childNodes[W]);/^(pre|p)$/i.test(m.nodeName)&&(f=!0),E&&(s=!0)}else 3==m.nodeType&&d(m.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;g(t),t!=n;)t=t.nextSibling,f=!1;return a}(e,u,h,s,c)),g=Rt(e.doc,O(s,0),O(c,oe(e.doc,c).text.length));d.length>1&&g.length>1;)if(I(d)==I(g))d.pop(),g.pop(),c--;else{if(d[0]!=g[0])break;d.shift(),g.shift(),s++}for(var m=0,w=0,k=d[0],M=g[0],A=Math.min(k.length,M.length);m<A&&k.charCodeAt(m)==M.charCodeAt(m);)++m;for(var E=I(d),W=I(g),H=Math.min(E.length-(1==d.length?m:0),W.length-(1==g.length?m:0));w<H&&E.charCodeAt(E.length-w-1)==W.charCodeAt(W.length-w-1);)++w;if(1==d.length&&1==g.length&&s==i.line)for(;m&&m>i.ch&&E.charCodeAt(E.length-w-1)==W.charCodeAt(W.length-w-1);)m--,w++;d[d.length-1]=E.slice(0,E.length-w).replace(/^\u200b+/,""),d[0]=d[0].slice(m).replace(/\u200b+$/,"");var z=O(s,m),Y=O(c,g.length?I(g).length-w:0);return d.length>1||d[0]||X(z,Y)?(oi(e.doc,d,z,Y,"+input"),!0):void 0},Qe.prototype.ensurePolled=function(){this.forceCompositionEnd()},Qe.prototype.reset=function(){this.forceCompositionEnd()},Qe.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Qe.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Qe.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&et(this.cm,function(){return St(e.cm)})},Qe.prototype.setUneditable=function(e){e.contentEditable="false"},Qe.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Oe(this.cm,yl)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Qe.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Qe.prototype.onContextMenu=function(){},Qe.prototype.resetPosition=function(){},Qe.prototype.needsContentAttribute=!0;var kt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new le,this.hasSelection=!1,this.composing=null};kt.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var l=this.textarea;function a(s){if(!Be(i,s)){if(i.somethingSelected())Eo({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var u=ba(i);Eo({lineWise:!0,text:u.text}),"cut"==s.type?i.setSelections(u.ranges,null,yt):(n.prevInput="",l.value=u.text.join("\n"),U(l))}"cut"==s.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),rt&&(l.style.width="0px"),ne(l,"input",function(){de&&Se>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),ne(l,"paste",function(s){Be(i,s)||xa(s,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())}),ne(l,"cut",a),ne(l,"copy",a),ne(e.scroller,"paste",function(s){if(!Ir(e,s)&&!Be(i,s)){if(!l.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var u=new Event("paste");u.clipboardData=s.clipboardData,l.dispatchEvent(u)}}),ne(e.lineSpace,"selectstart",function(s){Ir(e,s)||Ht(s)}),ne(l,"compositionstart",function(){var s=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:s,range:i.markText(s,i.getCursor("to"),{className:"CodeMirror-composing"})}}),ne(l,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},kt.prototype.createField=function(e){this.wrapper=bl(),this.textarea=this.wrapper.firstChild},kt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},kt.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=uo(e);if(e.options.moveInputWithCursor){var l=hr(e,n.sel.primary().head,"div"),a=t.wrapper.getBoundingClientRect(),s=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,l.top+s.top-a.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,l.left+s.left-a.left))}return i},kt.prototype.showSelection=function(e){var n=this.cm.display;te(n.cursorDiv,e.cursors),te(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},kt.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&U(this.textarea),de&&Se>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",de&&Se>=9&&(this.hasSelection=null))}},kt.prototype.getField=function(){return this.textarea},kt.prototype.supportsTouch=function(){return!1},kt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!vt||v()!=this.textarea))try{this.textarea.focus()}catch{}},kt.prototype.blur=function(){this.textarea.blur()},kt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},kt.prototype.receivedFocus=function(){this.slowPoll()},kt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},kt.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){t.poll()||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},kt.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ur(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var l=n.value;if(l==i&&!t.somethingSelected())return!1;if(de&&Se>=9&&this.hasSelection===l||Pe&&/[\uf700-\uf7ff]/.test(l))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var a=l.charCodeAt(0);if(8203==a&&!i&&(i="\u200b"),8666==a)return this.reset(),this.cm.execCommand("undo")}for(var s=0,u=Math.min(i.length,l.length);s<u&&i.charCodeAt(s)==l.charCodeAt(s);)++s;return et(t,function(){yl(t,l.slice(s),i.length-s,null,e.composing?"*compose":null),l.length>1e3||l.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=l,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},kt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},kt.prototype.onKeyPress=function(){de&&Se>=9&&(this.hasSelection=null),this.fastPoll()},kt.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,l=t.textarea;t.contextMenuPending&&t.contextMenuPending();var a=Dt(n,e),s=i.scroller.scrollTop;if(a&&!he){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(a)&&Oe(n,Ut)(n.doc,nn(a),yt);var d,f=l.style.cssText,c=t.wrapper.style.cssText,h=t.wrapper.offsetParent.getBoundingClientRect();if(t.wrapper.style.cssText="position: static",l.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(de?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Xe&&(d=window.scrollY),i.input.focus(),Xe&&window.scrollTo(null,d),i.input.reset(),n.somethingSelected()||(l.value=t.prevInput=" "),t.contextMenuPending=m,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),de&&Se>=9&&g(),ee){Yr(e);var w=function(){Fe(window,"mouseup",w),setTimeout(m,20)};ne(window,"mouseup",w)}else setTimeout(m,50)}function g(){if(null!=l.selectionStart){var k=n.somethingSelected(),M="\u200b"+(k?l.value:"");l.value="\u21da",l.value=M,t.prevInput=k?"":"\u200b",l.selectionStart=1,l.selectionEnd=M.length,i.selForContextMenu=n.doc.sel}}function m(){if(t.contextMenuPending==m&&(t.contextMenuPending=!1,t.wrapper.style.cssText=c,l.style.cssText=f,de&&Se<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=s),null!=l.selectionStart)){(!de||de&&Se<9)&&g();var k=0,M=function(){i.selForContextMenu==n.doc.sel&&0==l.selectionStart&&l.selectionEnd>0&&"\u200b"==t.prevInput?Oe(n,ii)(n):k++<10?i.detectingSelectAll=setTimeout(M,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(M,200)}}},kt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e,this.textarea.readOnly=!!e},kt.prototype.setUneditable=function(){},kt.prototype.needsContentAttribute=!1,function iu(e){var t=e.optionHandlers;function n(i,l,a,s){e.defaults[i]=l,a&&(t[i]=s?function(u,f,c){c!=dn&&a(u,f,c)}:a)}e.defineOption=n,e.Init=dn,n("value","",function(i,l){return i.setValue(l)},!0),n("mode",null,function(i,l){i.doc.modeOption=l,al(i)},!0),n("indentUnit",2,al,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(i){ti(i),Li(i),St(i)},!0),n("lineSeparator",null,function(i,l){if(i.doc.lineSep=l,l){var a=[],s=i.doc.first;i.doc.iter(function(f){for(var c=0;;){var h=f.text.indexOf(l,c);if(-1==h)break;c=h+l.length,a.push(O(s,h))}s++});for(var u=a.length-1;u>=0;u--)oi(i.doc,l,a[u],O(a[u].line,a[u].ch+l.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(i,l,a){i.state.specialChars=new RegExp(l.source+(l.test("\t")?"":"|\t"),"g"),a!=dn&&i.refresh()}),n("specialCharPlaceholder",Ws,function(i){return i.refresh()},!0),n("electricChars",!0),n("inputStyle",vt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(i,l){return i.getInputField().spellcheck=l},!0),n("autocorrect",!1,function(i,l){return i.getInputField().autocorrect=l},!0),n("autocapitalize",!1,function(i,l){return i.getInputField().autocapitalize=l},!0),n("rtlMoveVisually",!se),n("wholeLineUpdateBefore",!0),n("theme","default",function(i){ya(i),En(i)},!0),n("keyMap","default",function(i,l,a){var s=Ri(l),u=a!=dn&&Ri(a);u&&u.detach&&u.detach(i,s),s.attach&&s.attach(i,u||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,ou,!0),n("gutters",[],function(i,l){i.display.gutterSpecs=ei(l,i.options.lineNumbers),En(i)},!0),n("fixedGutter",!0,function(i,l){i.display.gutters.style.left=l?lo(i.display)+"px":"0",i.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(i){return Jn(i)},!0),n("scrollbarStyle","native",function(i){Nn(i),Jn(i),i.display.scrollbars.setScrollTop(i.doc.scrollTop),i.display.scrollbars.setScrollLeft(i.doc.scrollLeft)},!0),n("lineNumbers",!1,function(i,l){i.display.gutterSpecs=ei(i.options.gutters,l),En(i)},!0),n("firstLineNumber",1,En,!0),n("lineNumberFormatter",function(i){return i},En,!0),n("showCursorWhenSelecting",!1,Kn,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(i,l){"nocursor"==l&&(Yn(i),i.display.input.blur()),i.display.input.readOnlyChanged(l)}),n("screenReaderLabel",null,function(i,l){i.display.input.screenReaderLabelChanged(l=""===l?null:l)}),n("disableInput",!1,function(i,l){l||i.display.input.reset()},!0),n("dragDrop",!0,ht),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,Kn,!0),n("singleCursorHeightPerLine",!0,Kn,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,ti,!0),n("addModeClass",!1,ti,!0),n("pollInterval",100),n("undoDepth",200,function(i,l){return i.doc.history.undoDepth=l}),n("historyEventDelay",1250),n("viewportMargin",10,function(i){return i.refresh()},!0),n("maxHighlightLength",1e4,ti,!0),n("moveInputWithCursor",!0,function(i,l){l||i.display.input.resetPosition()}),n("tabindex",null,function(i,l){return i.display.input.getField().tabIndex=l||""}),n("autofocus",null),n("direction","ltr",function(i,l){return i.doc.setDirection(l)},!0),n("phrases",null)}(at),function Ds(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(i,l){var a=this.options,s=a[i];a[i]==l&&"mode"!=i||(a[i]=l,t.hasOwnProperty(i)&&Oe(this,t[i])(this,l,s),mt(this,"optionChange",this,i))},getOption:function(i){return this.options[i]},getDoc:function(){return this.doc},addKeyMap:function(i,l){this.state.keyMaps[l?"push":"unshift"](Ri(i))},removeKeyMap:function(i){for(var l=this.state.keyMaps,a=0;a<l.length;++a)if(l[a]==i||l[a].name==i)return l.splice(a,1),!0},addOverlay:Ft(function(i,l){var a=i.token?i:e.getMode(this.options,i);if(a.startState)throw new Error("Overlays may not be stateful.");(function L(e,t,n){for(var i=0,l=n(t);i<e.length&&n(e[i])<=l;)i++;e.splice(i,0,t)})(this.state.overlays,{mode:a,modeSpec:i,opaque:l&&l.opaque,priority:l&&l.priority||0},function(s){return s.priority}),this.state.modeGen++,St(this)}),removeOverlay:Ft(function(i){for(var l=this.state.overlays,a=0;a<l.length;++a){var s=l[a].modeSpec;if(s==i||"string"==typeof i&&s.name==i)return l.splice(a,1),this.state.modeGen++,void St(this)}}),indentLine:Ft(function(i,l,a){"string"!=typeof l&&"number"!=typeof l&&(l=null==l?this.options.smartIndent?"smart":"prev":l?"add":"subtract"),C(this.doc,i)&&Pn(this,i,l,a)}),indentSelection:Ft(function(i){for(var l=this.doc.sel.ranges,a=-1,s=0;s<l.length;s++){var u=l[s];if(u.empty())u.head.line>a&&(Pn(this,u.head.line,i,!0),a=u.head.line,s==this.doc.sel.primIndex&&Di(this));else{var f=u.from(),c=u.to(),h=Math.max(a,f.line);a=Math.min(this.lastLine(),c.line-(c.ch?0:1))+1;for(var d=h;d<a;++d)Pn(this,d,i);var g=this.doc.sel.ranges;0==f.ch&&l.length==g.length&&g[s].from().ch>0&&ea(this.doc,s,new Me(f,g[s].to()),yt)}}}),getTokenAt:function(i,l){return Tl(this,i,l)},getLineTokens:function(i,l){return Tl(this,O(i),l,!0)},getTokenTypeAt:function(i){i=ye(this.doc,i);var f,l=Po(this,oe(this.doc,i.line)),a=0,s=(l.length-1)/2,u=i.ch;if(0==u)f=l[2];else for(;;){var c=a+s>>1;if((c?l[2*c-1]:0)>=u)s=c;else{if(!(l[2*c+1]<u)){f=l[2*c+2];break}a=c+1}}var h=f?f.indexOf("overlay "):-1;return h<0?f:0==h?null:f.slice(0,h-1)},getModeAt:function(i){var l=this.doc.mode;return l.innerMode?e.innerMode(l,this.getTokenAt(i).state).mode:l},getHelper:function(i,l){return this.getHelpers(i,l)[0]},getHelpers:function(i,l){var a=[];if(!n.hasOwnProperty(l))return a;var s=n[l],u=this.getModeAt(i);if("string"==typeof u[l])s[u[l]]&&a.push(s[u[l]]);else if(u[l])for(var f=0;f<u[l].length;f++){var c=s[u[l][f]];c&&a.push(c)}else u.helperType&&s[u.helperType]?a.push(s[u.helperType]):s[u.name]&&a.push(s[u.name]);for(var h=0;h<s._global.length;h++){var d=s._global[h];d.pred(u,this)&&-1==_(a,d.val)&&a.push(d.val)}return a},getStateAfter:function(i,l){var a=this.doc;return mi(this,(i=Ca(a,i??a.first+a.size-1))+1,l).state},cursorCoords:function(i,l){var s=this.doc.sel.primary();return hr(this,null==i?s.head:"object"==typeof i?ye(this.doc,i):i?s.from():s.to(),l||"page")},charCoords:function(i,l){return oo(this,ye(this.doc,i),l||"page")},coordsChar:function(i,l){return Qo(this,(i=Cr(this,i,l||"page")).left,i.top)},lineAtHeight:function(i,l){return i=Cr(this,{top:i,left:0},l||"page").top,b(this.doc,i+this.display.viewOffset)},heightAtLine:function(i,l,a){var u,s=!1;if("number"==typeof i){var f=this.doc.first+this.doc.size-1;i<this.doc.first?i=this.doc.first:i>f&&(i=f,s=!0),u=oe(this.doc,i)}else u=i;return qn(this,u,{top:0,left:0},l||"page",a||s).top+(s?this.doc.height-Hr(u):0)},defaultTextHeight:function(){return Cn(this.display)},defaultCharWidth:function(){return Sn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(i,l,a,s,u){var f=this.display,c=(i=hr(this,ye(this.doc,i))).bottom,h=i.left;if(l.style.position="absolute",l.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(l),f.sizer.appendChild(l),"over"==s)c=i.top;else if("above"==s||"near"==s){var d=Math.max(f.wrapper.clientHeight,this.doc.height),g=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==s||i.bottom+l.offsetHeight>d)&&i.top>l.offsetHeight?c=i.top-l.offsetHeight:i.bottom+l.offsetHeight<=d&&(c=i.bottom),h+l.offsetWidth>g&&(h=g-l.offsetWidth)}l.style.top=c+"px",l.style.left=l.style.right="","right"==u?(h=f.sizer.clientWidth-l.offsetWidth,l.style.right="0px"):("left"==u?h=0:"middle"==u&&(h=(f.sizer.clientWidth-l.offsetWidth)/2),l.style.left=h+"px"),a&&function zl(e,t){var n=Mn(e,t);null!=n.scrollTop&&_r(e,n.scrollTop),null!=n.scrollLeft&&dr(e,n.scrollLeft)}(this,{left:h,top:c,right:h+l.offsetWidth,bottom:c+l.offsetHeight})},triggerOnKeyDown:Ft(da),triggerOnKeyPress:Ft(gl),triggerOnKeyUp:Cs,triggerOnMouseDown:Ft(Ss),execCommand:function(i){if(Mo.hasOwnProperty(i))return Mo[i].call(null,this)},triggerElectric:Ft(function(i){xl(this,i)}),findPosH:function(i,l,a,s){var u=1;l<0&&(u=-1,l=-l);for(var f=ye(this.doc,i),c=0;c<l&&!(f=Ze(this.doc,f,u,a,s)).hitSide;++c);return f},moveH:Ft(function(i,l){var a=this;this.extendSelectionsBy(function(s){return a.display.shift||a.doc.extend||s.empty()?Ze(a.doc,s.head,i,l,a.options.rtlMoveVisually):i<0?s.from():s.to()},wt)}),deleteH:Ft(function(i,l){var s=this.doc;this.doc.sel.somethingSelected()?s.replaceSelection("",null,"+delete"):In(this,function(u){var f=Ze(s,u.head,i,l,!1);return i<0?{from:f,to:u.head}:{from:u.head,to:f}})}),findPosV:function(i,l,a,s){var u=1,f=s;l<0&&(u=-1,l=-l);for(var c=ye(this.doc,i),h=0;h<l;++h){var d=hr(this,c,"div");if(null==f?f=d.left:d.left=f,(c=wa(this,d,u,a)).hitSide)break}return c},moveV:Ft(function(i,l){var a=this,s=this.doc,u=[],f=!this.display.shift&&!s.extend&&s.sel.somethingSelected();if(s.extendSelectionsBy(function(h){if(f)return i<0?h.from():h.to();var d=hr(a,h.head,"div");null!=h.goalColumn&&(d.left=h.goalColumn),u.push(d.left);var g=wa(a,d,i,l);return"page"==l&&h==s.sel.primary()&&jn(a,oo(a,g,"div").top-d.top),g},wt),u.length)for(var c=0;c<s.sel.ranges.length;c++)s.sel.ranges[c].goalColumn=u[c]}),findWordAt:function(i){var a=oe(this.doc,i.line).text,s=i.ch,u=i.ch;if(a){var f=this.getHelper(i,"wordChars");"before"!=i.sticky&&u!=a.length||!s?++u:--s;for(var c=a.charAt(s),h=qt(c,f)?function(d){return qt(d,f)}:/\s/.test(c)?function(d){return/\s/.test(d)}:function(d){return!/\s/.test(d)&&!qt(d)};s>0&&h(a.charAt(s-1));)--s;for(;u<a.length&&h(a.charAt(u));)++u}return new Me(O(i.line,s),O(i.line,u))},toggleOverwrite:function(i){null!=i&&i==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?V(this.display.cursorDiv,"CodeMirror-overwrite"):q(this.display.cursorDiv,"CodeMirror-overwrite"),mt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==v()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Ft(function(i,l){An(this,i,l)}),getScrollInfo:function(){var i=this.display.scroller;return{left:i.scrollLeft,top:i.scrollTop,height:i.scrollHeight-br(this)-this.display.barHeight,width:i.scrollWidth-br(this)-this.display.barWidth,clientHeight:Ko(this),clientWidth:zn(this)}},scrollIntoView:Ft(function(i,l){null==i?(i={from:this.doc.sel.primary().head,to:null},null==l&&(l=this.options.cursorScrollMargin)):"number"==typeof i?i={from:O(i,0),to:null}:null==i.from&&(i={from:i,to:null}),i.to||(i.to=i.from),i.margin=l||0,null!=i.from.line?function Ja(e,t){Dn(e),e.curOp.scrollToPos=t}(this,i):Ul(this,i.from,i.to,i.margin)}),setSize:Ft(function(i,l){var a=this,s=function(f){return"number"==typeof f||/^\d+$/.test(String(f))?f+"px":f};null!=i&&(this.display.wrapper.style.width=s(i)),null!=l&&(this.display.wrapper.style.height=s(l)),this.options.lineWrapping&&Il(this);var u=this.display.viewFrom;this.doc.iter(u,this.display.viewTo,function(f){if(f.widgets)for(var c=0;c<f.widgets.length;c++)if(f.widgets[c].noHScroll){Br(a,u,"widget");break}++u}),this.curOp.forceUpdate=!0,mt(this,"refresh",this)}),operation:function(i){return et(this,i)},startOperation:function(){return Vn(this)},endOperation:function(){return $n(this)},refresh:Ft(function(){var i=this.display.cachedTextHeight;St(this),this.curOp.forceUpdate=!0,Li(this),An(this,this.doc.scrollLeft,this.doc.scrollTop),nl(this.display),(null==i||Math.abs(i-Cn(this.display))>.5||this.options.lineWrapping)&&$r(this),mt(this,"refresh",this)}),swapDoc:Ft(function(i){var l=this.doc;return l.cm=null,this.state.selectingText&&this.state.selectingText(),ts(this,i),Li(this),this.display.input.reset(),An(this,i.scrollLeft,i.scrollTop),this.curOp.forceScroll=!0,Et(this,"swapDoc",this,l),l}),phrase:function(i){var l=this.options.phrases;return l&&Object.prototype.hasOwnProperty.call(l,i)?l[i]:i},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},mr(e),e.registerHelper=function(i,l,a){n.hasOwnProperty(i)||(n[i]=e[i]={_global:[]}),n[i][l]=a},e.registerGlobalHelper=function(i,l,a,s){e.registerHelper(i,l,s),n[i]._global.push({pred:a,val:s})}}(at);var r="iter insert remove copy getEditor constructor".split(" ");for(var o in nr.prototype)nr.prototype.hasOwnProperty(o)&&_(r,o)<0&&(at.prototype[o]=function(e){return function(){return e.apply(this.doc,arguments)}}(nr.prototype[o]));return mr(nr),at.inputStyles={textarea:kt,contenteditable:Qe},at.defineMode=function(e){!at.defaults.mode&&"null"!=e&&(at.defaults.mode=e),lr.apply(this,arguments)},at.defineMIME=function Xr(e,t){Dr[e]=t},at.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),at.defineMIME("text/plain","null"),at.defineExtension=function(e,t){at.prototype[e]=t},at.defineDocExtension=function(e,t){nr.prototype[e]=t},at.fromTextArea=function uu(e,t){if((t=t?N(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=v();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=u.getValue()}var l;if(e.form&&(ne(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var a=e.form;l=a.submit;try{var s=a.submit=function(){i(),a.submit=l,a.submit(),a.submit=s}}catch{}}t.finishInit=function(f){f.save=i,f.getTextArea=function(){return e},f.toTextArea=function(){f.toTextArea=isNaN,i(),e.parentNode.removeChild(f.getWrapperElement()),e.style.display="",e.form&&(Fe(e.form,"submit",i),!t.leaveSubmitMethodAlone&&"function"==typeof e.form.submit&&(e.form.submit=l))}},e.style.display="none";var u=at(function(f){return e.parentNode.insertBefore(f,e.nextSibling)},t);return u},function wl(e){e.off=Fe,e.on=ne,e.wheelEventPixels=pr,e.Doc=nr,e.splitLines=yr,e.countColumn=D,e.findColumn=At,e.isWordChar=Ge,e.Pass=Ce,e.signal=mt,e.Line=bi,e.changeEnd=Zr,e.scrollbarModel=Qa,e.Pos=O,e.cmpPos=X,e.modes=pi,e.mimeModes=Dr,e.resolveMode=Nr,e.getMode=vi,e.modeExtensions=ar,e.extendMode=xn,e.copyState=Or,e.startState=ie,e.innerMode=ct,e.commands=Mo,e.keyMap=hn,e.keyName=si,e.isModifierKey=ua,e.lookupKey=ai,e.normalizeKeyMap=vs,e.StringStream=$e,e.SharedTextMarker=Bi,e.TextMarker=Lr,e.LineWidget=Co,e.e_preventDefault=Ht,e.e_stopPropagation=zr,e.e_stop=Yr,e.addClass=V,e.contains=S,e.rmClass=q,e.keyNames=Rr}(at),at.version="5.65.0",at},"object"==typeof $&&typeof ue<"u"?ue.exports=B():void 0!==(Ye="function"==typeof(j=B)?j.call($,xe,$,ue):j)&&(ue.exports=Ye)},{}]},{},[1])},8266:function(hi){hi.exports=function(){"use strict";var pt=navigator.userAgent,xe=navigator.platform,j=/gecko\/\d/i.test(pt),Ye=/MSIE \d/.test(pt),G=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pt),ue=/Edge\/(\d+)/.exec(pt),$=Ye||G||ue,K=$&&(Ye?document.documentMode||6:+(ue||G)[1]),B=!ue&&/WebKit\//.test(pt),Le=B&&/Qt\/\d+\.\d+/.test(pt),ce=!ue&&/Chrome\/(\d+)/.exec(pt),Ue=ce&&+ce[1],we=/Opera\//.test(pt),de=/Apple Computer/.test(navigator.vendor),Se=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(pt),Xe=/PhantomJS/.test(pt),ft=de&&(/Mobile\/\w+/.test(pt)||navigator.maxTouchPoints>2),ut=/Android/.test(pt),he=ft||ut||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(pt),je=ft||/Mac/.test(xe),jt=/\bCrOS\b/.test(pt),Jt=/win/i.test(xe),rt=we&&pt.match(/Version\/(\d*\.\d*)/);rt&&(rt=Number(rt[1])),rt&&rt>=15&&(we=!1,B=!0);var y=je&&(Le||we&&(null==rt||rt<12.11)),vt=j||$&&K>=9;function Pe(r){return new RegExp("(^|\\s)"+r+"(?:$|\\s)\\s*")}var x,Nt=function(r,o){var e=r.className,t=Pe(o).exec(e);if(t){var n=e.slice(t.index+t[0].length);r.className=e.slice(0,t.index)+(n?t[1]+n:"")}};function se(r){for(var o=r.childNodes.length;o>0;--o)r.removeChild(r.firstChild);return r}function Je(r,o){return se(r).appendChild(o)}function T(r,o,e,t){var n=document.createElement(r);if(e&&(n.className=e),t&&(n.style.cssText=t),"string"==typeof o)n.appendChild(document.createTextNode(o));else if(o)for(var i=0;i<o.length;++i)n.appendChild(o[i]);return n}function ee(r,o,e,t){var n=T(r,o,e,t);return n.setAttribute("role","presentation"),n}function q(r,o){if(3==o.nodeType&&(o=o.parentNode),r.contains)return r.contains(o);do{if(11==o.nodeType&&(o=o.host),o==r)return!0}while(o=o.parentNode)}function P(r){var e,o=r.ownerDocument||r;try{e=r.activeElement}catch{e=o.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function te(r,o){var e=r.className;Pe(o).test(e)||(r.className+=(e?" ":"")+o)}function J(r,o){for(var e=r.split(" "),t=0;t<e.length;t++)e[t]&&!Pe(e[t]).test(o)&&(o+=" "+e[t]);return o}x=document.createRange?function(r,o,e,t){var n=document.createRange();return n.setEnd(t||r,e),n.setStart(r,o),n}:function(r,o,e){var t=document.body.createTextRange();try{t.moveToElementText(r.parentNode)}catch{return t}return t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",o),t};var nt=function(r){r.select()};function gt(r){return r.display.wrapper.ownerDocument}function S(r){return v(r.display.wrapper)}function v(r){return r.getRootNode?r.getRootNode():r.ownerDocument}function V(r){return gt(r).defaultView}function be(r){var o=Array.prototype.slice.call(arguments,1);return function(){return r.apply(null,o)}}function U(r,o,e){for(var t in o||(o={}),r)r.hasOwnProperty(t)&&(!1!==e||!o.hasOwnProperty(t))&&(o[t]=r[t]);return o}function Q(r,o,e,t,n){null==o&&-1==(o=r.search(/[^\s\u00a0]/))&&(o=r.length);for(var i=t||0,l=n||0;;){var a=r.indexOf("\t",i);if(a<0||a>=o)return l+(o-i);l+=a-i,l+=e-l%e,i=a+1}}ft?nt=function(r){r.selectionStart=0,r.selectionEnd=r.value.length}:$&&(nt=function(r){try{r.select()}catch{}});var N=function(){this.id=null,this.f=null,this.time=0,this.handler=be(this.onTimeout,this)};function D(r,o){for(var e=0;e<r.length;++e)if(r[e]==o)return e;return-1}N.prototype.onTimeout=function(r){r.id=0,r.time<=+new Date?r.f():setTimeout(r.handler,r.time-+new Date)},N.prototype.set=function(r,o){this.f=o;var e=+new Date+r;(!this.id||e<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,r),this.time=e)};var le=50,_={toString:function(){return"CodeMirror.Pass"}},ae={scroll:!1},Ce={origin:"*mouse"},yt={origin:"+move"};function er(r,o,e){for(var t=0,n=0;;){var i=r.indexOf("\t",t);-1==i&&(i=r.length);var l=i-t;if(i==r.length||n+l>=o)return t+Math.min(l,o-n);if(n+=i-t,t=i+1,(n+=e-n%e)>=o)return t}}var wt=[""];function At(r){for(;wt.length<=r;)wt.push(me(wt)+" ");return wt[r]}function me(r){return r[r.length-1]}function tr(r,o){for(var e=[],t=0;t<r.length;t++)e[t]=o(r[t],t);return e}function pe(){}function L(r,o){var e;return Object.create?e=Object.create(r):(pe.prototype=r,e=new pe),o&&U(o,e),e}var R=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function re(r){return/\w/.test(r)||r>"\x80"&&(r.toUpperCase()!=r.toLowerCase()||R.test(r))}function Te(r,o){return o?!!(o.source.indexOf("\\w")>-1&&re(r))||o.test(r):re(r)}function Ge(r){for(var o in r)if(r.hasOwnProperty(o)&&r[o])return!1;return!0}var qt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function or(r){return r.charCodeAt(0)>=768&&qt.test(r)}function Ot(r,o,e){for(;(e<0?o>0:o<r.length)&&or(r.charAt(o));)o+=e;return o}function Ee(r,o,e){for(var t=o>e?-1:1;;){if(o==e)return o;var n=(o+e)/2,i=t<0?Math.ceil(n):Math.floor(n);if(i==o)return r(i)?o:e;r(i)?e=i:o=i+t}}var it=null;function xt(r,o,e){var t;it=null;for(var n=0;n<r.length;++n){var i=r[n];if(i.from<o&&i.to>o)return n;i.to==o&&(i.from!=i.to&&"before"==e?t=n:it=n),i.from==o&&(i.from!=i.to&&"before"!=e?t=n:it=n)}return t??it}var Bn=function(){var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",o="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function e(u){return u<=247?r.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?o.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L"}var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,n=/[stwN]/,i=/[LRr]/,l=/[Lb1n]/,a=/[1n]/;function s(u,f,c){this.level=u,this.from=f,this.to=c}return function(u,f){var c="ltr"==f?"L":"R";if(0==u.length||"ltr"==f&&!t.test(u))return!1;for(var h=u.length,d=[],g=0;g<h;++g)d.push(e(u.charCodeAt(g)));for(var m=0,w=c;m<h;++m){var k=d[m];"m"==k?d[m]=w:w=k}for(var M=0,A=c;M<h;++M){var E=d[M];"1"==E&&"r"==A?d[M]="n":i.test(E)&&(A=E,"r"==E&&(d[M]="R"))}for(var W=1,H=d[0];W<h-1;++W){var z=d[W];"+"==z&&"1"==H&&"1"==d[W+1]?d[W]="1":","==z&&H==d[W+1]&&("1"==H||"n"==H)&&(d[W]=H),H=z}for(var Y=0;Y<h;++Y){var fe=d[Y];if(","==fe)d[Y]="N";else if("%"==fe){var ge=void 0;for(ge=Y+1;ge<h&&"%"==d[ge];++ge);for(var Ke=Y&&"!"==d[Y-1]||ge<h&&"1"==d[ge]?"1":"N",Ae=Y;Ae<ge;++Ae)d[Ae]=Ke;Y=ge-1}}for(var Re=0,tt=c;Re<h;++Re){var De=d[Re];"L"==tt&&"1"==De?d[Re]="L":i.test(De)&&(tt=De)}for(var ze=0;ze<h;++ze)if(n.test(d[ze])){var Ne=void 0;for(Ne=ze+1;Ne<h&&n.test(d[Ne]);++Ne);for(var ke="L"==(ze?d[ze-1]:c),lt=ke==("L"==(Ne<h?d[Ne]:c))?ke?"L":"R":c,Lt=ze;Lt<Ne;++Lt)d[Lt]=lt;ze=Ne-1}for(var Xt,Tt=[],Ie=0;Ie<h;)if(l.test(d[Ie])){var Mr=Ie;for(++Ie;Ie<h&&l.test(d[Ie]);++Ie);Tt.push(new s(0,Mr,Ie))}else{var st=Ie,vn=Tt.length,ir="rtl"==f?1:0;for(++Ie;Ie<h&&"L"!=d[Ie];++Ie);for(var Mt=st;Mt<Ie;)if(a.test(d[Mt])){st<Mt&&(Tt.splice(vn,0,new s(1,st,Mt)),vn+=ir);var Ar=Mt;for(++Mt;Mt<Ie&&a.test(d[Mt]);++Mt);Tt.splice(vn,0,new s(2,Ar,Mt)),vn+=ir,st=Mt}else++Mt;st<Ie&&Tt.splice(vn,0,new s(1,st,Ie))}return"ltr"==f&&(1==Tt[0].level&&(Xt=u.match(/^\s+/))&&(Tt[0].from=Xt[0].length,Tt.unshift(new s(0,0,Xt[0].length))),1==me(Tt).level&&(Xt=u.match(/\s+$/))&&(me(Tt).to-=Xt[0].length,Tt.push(new s(0,h-Xt[0].length,h)))),"rtl"==f?Tt.reverse():Tt}}();function Qt(r,o){var e=r.order;return null==e&&(e=r.order=Bn(r.text,o)),e}var Fo=[],Z=function(r,o,e){if(r.addEventListener)r.addEventListener(o,e,!1);else if(r.attachEvent)r.attachEvent("on"+o,e);else{var t=r._handlers||(r._handlers={});t[o]=(t[o]||Fo).concat(e)}};function di(r,o){return r._handlers&&r._handlers[o]||Fo}function ne(r,o,e){if(r.removeEventListener)r.removeEventListener(o,e,!1);else if(r.detachEvent)r.detachEvent("on"+o,e);else{var t=r._handlers,n=t&&t[o];if(n){var i=D(n,e);i>-1&&(t[o]=n.slice(0,i).concat(n.slice(i+1)))}}}function Ve(r,o){var e=di(r,o);if(e.length)for(var t=Array.prototype.slice.call(arguments,2),n=0;n<e.length;++n)e[n].apply(null,t)}function Fe(r,o,e){return"string"==typeof o&&(o={type:o,preventDefault:function(){this.defaultPrevented=!0}}),Ve(r,e||o.type,r,o),Ht(o)||o.codemirrorIgnore}function mt(r){var o=r._handlers&&r._handlers.cursorActivity;if(o)for(var e=r.curOp.cursorActivityHandlers||(r.curOp.cursorActivityHandlers=[]),t=0;t<o.length;++t)-1==D(e,o[t])&&e.push(o[t])}function Be(r,o){return di(r,o).length>0}function Zt(r){r.prototype.on=function(o,e){Z(this,o,e)},r.prototype.off=function(o,e){ne(this,o,e)}}function ot(r){r.preventDefault?r.preventDefault():r.returnValue=!1}function mr(r){r.stopPropagation?r.stopPropagation():r.cancelBubble=!0}function Ht(r){return null!=r.defaultPrevented?r.defaultPrevented:0==r.returnValue}function zr(r){ot(r),mr(r)}function Kt(r){return r.target||r.srcElement}function Yr(r){var o=r.which;return null==o&&(1&r.button?o=1:2&r.button?o=3:4&r.button&&(o=2)),je&&r.ctrlKey&&1==o&&(o=3),o}var fr,gn,qi=function(){if($&&K<9)return!1;var r=T("div");return"draggable"in r||"dragDrop"in r}();function Sl(r){if(null==fr){var o=T("span","\u200b");Je(r,T("span",[o,document.createTextNode("x")])),0!=r.firstChild.offsetHeight&&(fr=o.offsetWidth<=1&&o.offsetHeight>2&&!($&&K<8))}var e=fr?T("span","\u200b"):T("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return e.setAttribute("cm-text",""),e}function Wo(r){if(null!=gn)return gn;var o=Je(r,document.createTextNode("A\u062eA")),e=x(o,0,1).getBoundingClientRect(),t=x(o,1,2).getBoundingClientRect();return se(r),!(!e||e.left==e.right)&&(gn=t.right-e.right<3)}var r,_n=3!="\n\nb".split(/\n/).length?function(r){for(var o=0,e=[],t=r.length;o<=t;){var n=r.indexOf("\n",o);-1==n&&(n=r.length);var i=r.slice(o,"\r"==r.charAt(n-1)?n-1:n),l=i.indexOf("\r");-1!=l?(e.push(i.slice(0,l)),o+=l+1):(e.push(i),o=n+1)}return e}:function(r){return r.split(/\r\n?|\n/)},mn=window.getSelection?function(r){try{return r.selectionStart!=r.selectionEnd}catch{return!1}}:function(r){var o;try{o=r.ownerDocument.selection.createRange()}catch{}return!(!o||o.parentElement()!=r)&&0!=o.compareEndPoints("StartToEnd",o)},yr="oncopy"in(r=T("div"))||(r.setAttribute("oncopy","return;"),"function"==typeof r.oncopy),Ur=null;var cr={},yn={};function pi(r,o){arguments.length>2&&(o.dependencies=Array.prototype.slice.call(arguments,2)),cr[r]=o}function lr(r){if("string"==typeof r&&yn.hasOwnProperty(r))r=yn[r];else if(r&&"string"==typeof r.name&&yn.hasOwnProperty(r.name)){var o=yn[r.name];"string"==typeof o&&(o={name:o}),(r=L(o,r)).name=o.name}else{if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+xml$/.test(r))return lr("application/xml");if("string"==typeof r&&/^[\w\-]+\/[\w\-]+\+json$/.test(r))return lr("application/json")}return"string"==typeof r?{name:r}:r||{name:"null"}}function Xr(r,o){o=lr(o);var e=cr[o.name];if(!e)return Xr(r,"text/plain");var t=e(r,o);if(Nr.hasOwnProperty(o.name)){var n=Nr[o.name];for(var i in n)n.hasOwnProperty(i)&&(t.hasOwnProperty(i)&&(t["_"+i]=t[i]),t[i]=n[i])}if(t.name=o.name,o.helperType&&(t.helperType=o.helperType),o.modeProps)for(var l in o.modeProps)t[l]=o.modeProps[l];return t}var Nr={};function vi(r,o){U(o,Nr.hasOwnProperty(r)?Nr[r]:Nr[r]={})}function ar(r,o){if(!0===o)return o;if(r.copyState)return r.copyState(o);var e={};for(var t in o){var n=o[t];n instanceof Array&&(n=n.concat([])),e[t]=n}return e}function xn(r,o){for(var e;r.innerMode&&(e=r.innerMode(o))&&e.mode!=r;)o=e.state,r=e.mode;return e||{mode:r,state:o}}function Or(r,o,e){return!r.startState||r.startState(o,e)}var ct=function(r,o,e){this.pos=this.start=0,this.string=r,this.tabSize=o||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=e};function ie(r,o){if((o-=r.first)<0||o>=r.size)throw new Error("There is no line "+(o+r.first)+" in the document.");for(var e=r;!e.lines;)for(var t=0;;++t){var n=e.children[t],i=n.chunkSize();if(o<i){e=n;break}o-=i}return e.lines[o]}function $e(r,o,e){var t=[],n=o.line;return r.iter(o.line,e.line+1,function(i){var l=i.text;n==e.line&&(l=l.slice(0,e.ch)),n==o.line&&(l=l.slice(o.ch)),t.push(l),++n}),t}function oe(r,o,e){var t=[];return r.iter(o,e,function(n){t.push(n.text)}),t}function Rt(r,o){var e=o-r.height;if(e)for(var t=r;t;t=t.parent)t.height+=e}function _e(r){if(null==r.parent)return null;for(var o=r.parent,e=D(o.lines,r),t=o.parent;t;o=t,t=t.parent)for(var n=0;t.children[n]!=o;++n)e+=t.children[n].chunkSize();return e+o.first}function It(r,o){var e=r.first;e:do{for(var t=0;t<r.children.length;++t){var n=r.children[t],i=n.height;if(o<i){r=n;continue e}o-=i,e+=n.chunkSize()}return e}while(!r.lines);for(var l=0;l<r.lines.length;++l){var s=r.lines[l].height;if(o<s)break;o-=s}return e+l}function p(r,o){return o>=r.first&&o<r.first+r.size}function b(r,o){return String(r.lineNumberFormatter(o+r.firstLineNumber))}function C(r,o,e){if(void 0===e&&(e=null),!(this instanceof C))return new C(r,o,e);this.line=r,this.ch=o,this.sticky=e}function F(r,o){return r.line-o.line||r.ch-o.ch}function O(r,o){return r.sticky==o.sticky&&0==F(r,o)}function X(r){return C(r.line,r.ch)}function We(r,o){return F(r,o)<0?o:r}function Ct(r,o){return F(r,o)<0?r:o}function Vt(r,o){return Math.max(r.first,Math.min(o,r.first+r.size-1))}function ve(r,o){if(o.line<r.first)return C(r.first,0);var e=r.first+r.size-1;return o.line>e?C(e,ie(r,e).text.length):function Ca(r,o){var e=r.ch;return null==e||e>o?C(r.line,o):e<0?C(r.line,0):r}(o,ie(r,o.line).text.length)}function ye(r,o){for(var e=[],t=0;t<o.length;t++)e[t]=ve(r,o[t]);return e}ct.prototype.eol=function(){return this.pos>=this.string.length},ct.prototype.sol=function(){return this.pos==this.lineStart},ct.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ct.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ct.prototype.eat=function(r){var o=this.string.charAt(this.pos);if("string"==typeof r?o==r:o&&(r.test?r.test(o):r(o)))return++this.pos,o},ct.prototype.eatWhile=function(r){for(var o=this.pos;this.eat(r););return this.pos>o},ct.prototype.eatSpace=function(){for(var r=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>r},ct.prototype.skipToEnd=function(){this.pos=this.string.length},ct.prototype.skipTo=function(r){var o=this.string.indexOf(r,this.pos);if(o>-1)return this.pos=o,!0},ct.prototype.backUp=function(r){this.pos-=r},ct.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Q(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Q(this.string,this.lineStart,this.tabSize):0)},ct.prototype.indentation=function(){return Q(this.string,null,this.tabSize)-(this.lineStart?Q(this.string,this.lineStart,this.tabSize):0)},ct.prototype.match=function(r,o,e){if("string"!=typeof r){var i=this.string.slice(this.pos).match(r);return i&&i.index>0?null:(i&&!1!==o&&(this.pos+=i[0].length),i)}var t=function(l){return e?l.toLowerCase():l};if(t(this.string.substr(this.pos,r.length))==t(r))return!1!==o&&(this.pos+=r.length),!0},ct.prototype.current=function(){return this.string.slice(this.start,this.pos)},ct.prototype.hideFirstChars=function(r,o){this.lineStart+=r;try{return o()}finally{this.lineStart-=r}},ct.prototype.lookAhead=function(r){var o=this.lineOracle;return o&&o.lookAhead(r)},ct.prototype.baseToken=function(){var r=this.lineOracle;return r&&r.baseToken(this.pos)};var Io=function(r,o){this.state=r,this.lookAhead=o},Er=function(r,o,e,t){this.state=o,this.doc=r,this.line=e,this.maxLookAhead=t||0,this.baseTokens=null,this.baseTokenPos=1};function Zi(r,o,e,t){var n=[r.state.modeGen],i={};Tl(r,o.text,r.doc.mode,e,function(u,f){return n.push(u,f)},i,t);for(var l=e.state,a=function(u){e.baseTokens=n;var f=r.state.overlays[u],c=1,h=0;e.state=!0,Tl(r,o.text,f.mode,e,function(d,g){for(var m=c;h<d;){var w=n[c];w>d&&n.splice(c,1,d,n[c+1],w),c+=2,h=Math.min(d,w)}if(g)if(f.opaque)n.splice(m,c-m,d,"overlay "+g),c=m+2;else for(;m<c;m+=2){var k=n[m+1];n[m+1]=(k?k+" ":"")+"overlay "+g}},i),e.state=l,e.baseTokens=null,e.baseTokenPos=1},s=0;s<r.state.overlays.length;++s)a(s);return{styles:n,classes:i.bgClass||i.textClass?i:null}}function Fr(r,o,e){if(!o.styles||o.styles[0]!=r.state.modeGen){var t=gi(r,_e(o)),n=o.text.length>r.options.maxHighlightLength&&ar(r.doc.mode,t.state),i=Zi(r,o,t);n&&(t.state=n),o.stateAfter=t.save(!n),o.styles=i.styles,i.classes?o.styleClasses=i.classes:o.styleClasses&&(o.styleClasses=null),e===r.doc.highlightFrontier&&(r.doc.modeFrontier=Math.max(r.doc.modeFrontier,++r.doc.highlightFrontier))}return o.styles}function gi(r,o,e){var t=r.doc,n=r.display;if(!t.mode.startState)return new Er(t,!0,o);var i=function Sa(r,o,e){for(var t,n,i=r.doc,l=e?-1:o-(r.doc.mode.innerMode?1e3:100),a=o;a>l;--a){if(a<=i.first)return i.first;var s=ie(i,a-1),u=s.stateAfter;if(u&&(!e||a+(u instanceof Io?u.lookAhead:0)<=i.modeFrontier))return a;var f=Q(s.text,null,r.options.tabSize);(null==n||t>f)&&(n=a-1,t=f)}return n}(r,o,e),l=i>t.first&&ie(t,i-1).stateAfter,a=l?Er.fromSaved(t,l,i):new Er(t,Or(t.mode),i);return t.iter(i,o,function(s){Po(r,s.text,a);var u=a.line;s.stateAfter=u==o-1||u%5==0||u>=n.viewFrom&&u<n.viewTo?a.save():null,a.nextLine()}),e&&(t.modeFrontier=a.line),a}function Po(r,o,e,t){var n=r.doc.mode,i=new ct(o,r.options.tabSize,e);for(i.start=i.pos=t||0,""==o&&mi(n,e.state);!i.eol();)Ki(n,i,e.state),i.start=i.pos}function mi(r,o){if(r.blankLine)return r.blankLine(o);if(r.innerMode){var e=xn(r,o);if(e.mode.blankLine)return e.mode.blankLine(e.state)}}function Ki(r,o,e,t){for(var n=0;n<10;n++){t&&(t[0]=xn(r,e).mode);var i=r.token(o,e);if(o.pos>o.start)return i}throw new Error("Mode "+r.name+" failed to advance stream.")}Er.prototype.lookAhead=function(r){var o=this.doc.getLine(this.line+r);return null!=o&&r>this.maxLookAhead&&(this.maxLookAhead=r),o},Er.prototype.baseToken=function(r){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=r;)this.baseTokenPos+=2;var o=this.baseTokens[this.baseTokenPos+1];return{type:o&&o.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-r}},Er.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Er.fromSaved=function(r,o,e){return o instanceof Io?new Er(r,ar(r.mode,o.state),e,o.lookAhead):new Er(r,ar(r.mode,o),e)},Er.prototype.save=function(r){var o=!1!==r?ar(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Io(o,this.maxLookAhead):o};var kl=function(r,o,e){this.start=r.start,this.end=r.pos,this.string=r.current(),this.type=o||null,this.state=e};function Bo(r,o,e,t){var l,f,n=r.doc,i=n.mode,a=ie(n,(o=ve(n,o)).line),s=gi(r,o.line,e),u=new ct(a.text,r.options.tabSize,s);for(t&&(f=[]);(t||u.pos<o.ch)&&!u.eol();)u.start=u.pos,l=Ki(i,u,s.state),t&&f.push(new kl(u,l,ar(n.mode,s.state)));return t?f:new kl(u,l,s.state)}function Ll(r,o){if(r)for(;;){var e=r.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!e)break;r=r.slice(0,e.index)+r.slice(e.index+e[0].length);var t=e[1]?"bgClass":"textClass";null==o[t]?o[t]=e[2]:new RegExp("(?:^|\\s)"+e[2]+"(?:$|\\s)").test(o[t])||(o[t]+=" "+e[2])}return r}function Tl(r,o,e,t,n,i,l){var a=e.flattenSpans;null==a&&(a=r.options.flattenSpans);var c,s=0,u=null,f=new ct(o,r.options.tabSize,t),h=r.options.addModeClass&&[null];for(""==o&&Ll(mi(e,t.state),i);!f.eol();){if(f.pos>r.options.maxHighlightLength?(a=!1,l&&Po(r,o,t,f.pos),f.pos=o.length,c=null):c=Ll(Ki(e,f,t.state,h),i),h){var d=h[0].name;d&&(c="m-"+(c?d+" "+c:d))}if(!a||u!=c){for(;s<f.start;)n(s=Math.min(f.start,s+5e3),u);u=c}f.start=f.pos}for(;s<f.pos;){var g=Math.min(f.pos,s+5e3);n(g,u),s=g}}var La=!1,jr=!1;function _o(r,o,e){this.marker=r,this.from=o,this.to=e}function Yi(r,o){if(r)for(var e=0;e<r.length;++e){var t=r[e];if(t.marker==o)return t}}function Ro(r,o){for(var e,t=0;t<r.length;++t)r[t]!=o&&(e||(e=[])).push(r[t]);return e}function Ml(r,o){if(o.full)return null;var e=p(r,o.from.line)&&ie(r,o.from.line).markedSpans,t=p(r,o.to.line)&&ie(r,o.to.line).markedSpans;if(!e&&!t)return null;var n=o.from.ch,i=o.to.ch,l=0==F(o.from,o.to),a=function Ns(r,o,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],l=i.marker;null!=i.from&&!(l.inclusiveLeft?i.from<=o:i.from<o)&&(i.from!=o||"bookmark"!=l.type||e&&i.marker.insertLeft)||(t||(t=[])).push(new _o(l,i.from,null==i.to||(l.inclusiveRight?i.to>=o:i.to>o)?null:i.to))}return t}(e,n,l),s=function Os(r,o,e){var t;if(r)for(var n=0;n<r.length;++n){var i=r[n],l=i.marker;(null==i.to||(l.inclusiveRight?i.to>=o:i.to>o)||i.from==o&&"bookmark"==l.type&&(!e||i.marker.insertLeft))&&(t||(t=[])).push(new _o(l,null==i.from||(l.inclusiveLeft?i.from<=o:i.from<o)?null:i.from-o,null==i.to?null:i.to-o))}return t}(t,i,l),u=1==o.text.length,f=me(o.text).length+(u?n:0);if(a)for(var c=0;c<a.length;++c){var h=a[c];if(null==h.to){var d=Yi(s,h.marker);d?u&&(h.to=null==d.to?null:d.to+f):h.to=n}}if(s)for(var g=0;g<s.length;++g){var m=s[g];null!=m.to&&(m.to+=f),null==m.from?Yi(a,m.marker)||(m.from=f,u&&(a||(a=[])).push(m)):(m.from+=f,u&&(a||(a=[])).push(m))}a&&(a=Ma(a)),s&&s!=a&&(s=Ma(s));var k=[a];if(!u){var A,M=o.text.length-2;if(M>0&&a)for(var E=0;E<a.length;++E)null==a[E].to&&(A||(A=[])).push(new _o(a[E].marker,null,null));for(var W=0;W<M;++W)k.push(A);k.push(s)}return k}function Ma(r){for(var o=0;o<r.length;++o){var e=r[o];null!=e.from&&e.from==e.to&&!1!==e.marker.clearWhenEmpty&&r.splice(o--,1)}return r.length?r:null}function Dl(r){var o=r.markedSpans;if(o){for(var e=0;e<o.length;++e)o[e].marker.detachLine(r);r.markedSpans=null}}function Aa(r,o){if(o){for(var e=0;e<o.length;++e)o[e].marker.attachLine(r);r.markedSpans=o}}function ji(r){return r.inclusiveLeft?-1:0}function Ji(r){return r.inclusiveRight?1:0}function yi(r,o){var e=r.lines.length-o.lines.length;if(0!=e)return e;var t=r.find(),n=o.find(),i=F(t.from,n.from)||ji(r)-ji(o);return i?-i:F(t.to,n.to)||Ji(r)-Ji(o)||o.id-r.id}function Qi(r,o){var t,e=jr&&r.markedSpans;if(e)for(var n=void 0,i=0;i<e.length;++i)(n=e[i]).marker.collapsed&&null==(o?n.from:n.to)&&(!t||yi(t,n.marker)<0)&&(t=n.marker);return t}function zo(r){return Qi(r,!0)}function Vi(r){return Qi(r,!1)}function Da(r,o){var t,e=jr&&r.markedSpans;if(e)for(var n=0;n<e.length;++n){var i=e[n];i.marker.collapsed&&(null==i.from||i.from<o)&&(null==i.to||i.to>o)&&(!t||yi(t,i.marker)<0)&&(t=i.marker)}return t}function $i(r,o,e,t,n){var i=ie(r,o),l=jr&&i.markedSpans;if(l)for(var a=0;a<l.length;++a){var s=l[a];if(s.marker.collapsed){var u=s.marker.find(0),f=F(u.from,e)||ji(s.marker)-ji(n),c=F(u.to,t)||Ji(s.marker)-Ji(n);if(!(f>=0&&c<=0||f<=0&&c>=0)&&(f<=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?F(u.to,e)>=0:F(u.to,e)>0)||f>=0&&(s.marker.inclusiveRight&&n.inclusiveLeft?F(u.from,t)<=0:F(u.from,t)<0)))return!0}}}function Wr(r){for(var o;o=zo(r);)r=o.find(-1,!0).line;return r}function Nl(r,o){var e=ie(r,o),t=Wr(e);return e==t?o:_e(t)}function Oa(r,o){if(o>r.lastLine())return o;var t,e=ie(r,o);if(!qr(r,e))return o;for(;t=Vi(e);)e=t.find(1,!0).line;return _e(e)+1}function qr(r,o){var e=jr&&o.markedSpans;if(e)for(var t=void 0,n=0;n<e.length;++n)if((t=e[n]).marker.collapsed){if(null==t.from)return!0;if(!t.marker.widgetNode&&0==t.from&&t.marker.inclusiveLeft&&Uo(r,o,t))return!0}}function Uo(r,o,e){if(null==e.to){var t=e.marker.find(1,!0);return Uo(r,t.line,Yi(t.line.markedSpans,e.marker))}if(e.marker.inclusiveRight&&e.to==o.text.length)return!0;for(var n=void 0,i=0;i<o.markedSpans.length;++i)if((n=o.markedSpans[i]).marker.collapsed&&!n.marker.widgetNode&&n.from==e.to&&(null==n.to||n.to!=e.from)&&(n.marker.inclusiveLeft||e.marker.inclusiveRight)&&Uo(r,o,n))return!0}function $t(r){for(var o=0,e=(r=Wr(r)).parent,t=0;t<e.lines.length;++t){var n=e.lines[t];if(n==r)break;o+=n.height}for(var i=e.parent;i;i=(e=i).parent)for(var l=0;l<i.children.length;++l){var a=i.children[l];if(a==e)break;o+=a.height}return o}function xi(r){if(0==r.height)return 0;for(var e,o=r.text.length,t=r;e=zo(t);){var n=e.find(0,!0);t=n.from.line,o+=n.from.ch-n.to.ch}for(t=r;e=Vi(t);){var i=e.find(0,!0);o-=t.text.length-i.from.ch,o+=(t=i.to.line).text.length-i.to.ch}return o}function Hr(r){var o=r.display,e=r.doc;o.maxLine=ie(e,e.first),o.maxLineLength=xi(o.maxLine),o.maxLineChanged=!0,e.iter(function(t){var n=xi(t);n>o.maxLineLength&&(o.maxLineLength=n,o.maxLine=t)})}var Qr=function(r,o,e){this.text=r,Aa(this,o),this.height=e?e(this):1};function bi(r){r.parent=null,Dl(r)}Qr.prototype.lineNo=function(){return _e(this)},Zt(Qr);var Es={},Fs={};function Ea(r,o){if(!r||/^\s*$/.test(r))return null;var e=o.addModeClass?Fs:Es;return e[r]||(e[r]=r.replace(/\S+/g,"cm-$&"))}function Fa(r,o){var e=ee("span",null,null,B?"padding-right: .1px":null),t={pre:ee("pre",[e],"CodeMirror-line"),content:e,col:0,pos:0,cm:r,trailingSpace:!1,splitSpaces:r.getOption("lineWrapping")};o.measure={};for(var n=0;n<=(o.rest?o.rest.length:0);n++){var i=n?o.rest[n-1]:o.line,l=void 0;t.pos=0,t.addToken=Ha,Wo(r.display.measure)&&(l=Qt(i,r.doc.direction))&&(t.addToken=Hs(t.addToken,l)),t.map=[],Is(i,t,Fr(r,i,o!=r.display.externalMeasured&&_e(i))),i.styleClasses&&(i.styleClasses.bgClass&&(t.bgClass=J(i.styleClasses.bgClass,t.bgClass||"")),i.styleClasses.textClass&&(t.textClass=J(i.styleClasses.textClass,t.textClass||""))),0==t.map.length&&t.map.push(0,0,t.content.appendChild(Sl(r.display.measure))),0==n?(o.measure.map=t.map,o.measure.cache={}):((o.measure.maps||(o.measure.maps=[])).push(t.map),(o.measure.caches||(o.measure.caches=[])).push({}))}if(B){var s=t.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(t.content.className="cm-tab-wrap-hack")}return Ve(r,"renderLine",r,o.line,t.pre),t.pre.className&&(t.textClass=J(t.pre.className,t.textClass||"")),t}function Wa(r){var o=T("span","\u2022","cm-invalidchar");return o.title="\\u"+r.charCodeAt(0).toString(16),o.setAttribute("aria-label",o.title),o}function Ha(r,o,e,t,n,i,l){if(o){var f,a=r.splitSpaces?function Ws(r,o){if(r.length>1&&!/  /.test(r))return r;for(var e=o,t="",n=0;n<r.length;n++){var i=r.charAt(n);" "==i&&e&&(n==r.length-1||32==r.charCodeAt(n+1))&&(i="\xa0"),t+=i,e=" "==i}return t}(o,r.trailingSpace):o,s=r.cm.state.specialChars,u=!1;if(s.test(o)){f=document.createDocumentFragment();for(var c=0;;){s.lastIndex=c;var h=s.exec(o),d=h?h.index-c:o.length-c;if(d){var g=document.createTextNode(a.slice(c,c+d));f.appendChild($&&K<9?T("span",[g]):g),r.map.push(r.pos,r.pos+d,g),r.col+=d,r.pos+=d}if(!h)break;c+=d+1;var m=void 0;if("\t"==h[0]){var w=r.cm.options.tabSize,k=w-r.col%w;(m=f.appendChild(T("span",At(k),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),r.col+=k}else"\r"==h[0]||"\n"==h[0]?((m=f.appendChild(T("span","\r"==h[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",h[0]),r.col+=1):((m=r.cm.options.specialCharPlaceholder(h[0])).setAttribute("cm-text",h[0]),f.appendChild($&&K<9?T("span",[m]):m),r.col+=1);r.map.push(r.pos,r.pos+1,m),r.pos++}}else r.col+=o.length,f=document.createTextNode(a),r.map.push(r.pos,r.pos+o.length,f),$&&K<9&&(u=!0),r.pos+=o.length;if(r.trailingSpace=32==a.charCodeAt(o.length-1),e||t||n||u||i||l){var M=e||"";t&&(M+=t),n&&(M+=n);var A=T("span",[f],M,i);if(l)for(var E in l)l.hasOwnProperty(E)&&"style"!=E&&"class"!=E&&A.setAttribute(E,l[E]);return r.content.appendChild(A)}r.content.appendChild(f)}}function Hs(r,o){return function(e,t,n,i,l,a,s){n=n?n+" cm-force-border":"cm-force-border";for(var u=e.pos,f=u+t.length;;){for(var c=void 0,h=0;h<o.length&&!((c=o[h]).to>u&&c.from<=u);h++);if(c.to>=f)return r(e,t,n,i,l,a,s);r(e,t.slice(0,c.to-u),n,i,null,a,s),i=null,t=t.slice(c.to-u),u=c.to}}}function Ia(r,o,e,t){var n=!t&&e.widgetNode;n&&r.map.push(r.pos,r.pos+o,n),!t&&r.cm.display.input.needsContentAttribute&&(n||(n=r.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",e.id)),n&&(r.cm.display.input.setUneditable(n),r.content.appendChild(n)),r.pos+=o,r.trailingSpace=!1}function Is(r,o,e){var t=r.markedSpans,n=r.text,i=0;if(t)for(var c,h,g,m,w,k,M,a=n.length,s=0,u=1,f="",d=0;;){if(d==s){g=m=w=h="",M=null,k=null,d=1/0;for(var A=[],E=void 0,W=0;W<t.length;++W){var H=t[W],z=H.marker;if("bookmark"==z.type&&H.from==s&&z.widgetNode)A.push(z);else if(H.from<=s&&(null==H.to||H.to>s||z.collapsed&&H.to==s&&H.from==s)){if(null!=H.to&&H.to!=s&&d>H.to&&(d=H.to,m=""),z.className&&(g+=" "+z.className),z.css&&(h=(h?h+";":"")+z.css),z.startStyle&&H.from==s&&(w+=" "+z.startStyle),z.endStyle&&H.to==d&&(E||(E=[])).push(z.endStyle,H.to),z.title&&((M||(M={})).title=z.title),z.attributes)for(var Y in z.attributes)(M||(M={}))[Y]=z.attributes[Y];z.collapsed&&(!k||yi(k.marker,z)<0)&&(k=H)}else H.from>s&&d>H.from&&(d=H.from)}if(E)for(var fe=0;fe<E.length;fe+=2)E[fe+1]==d&&(m+=" "+E[fe]);if(!k||k.from==s)for(var ge=0;ge<A.length;++ge)Ia(o,0,A[ge]);if(k&&(k.from||0)==s){if(Ia(o,(null==k.to?a+1:k.to)-s,k.marker,null==k.from),null==k.to)return;k.to==s&&(k=!1)}}if(s>=a)break;for(var Ke=Math.min(a,d);;){if(f){var Ae=s+f.length;if(!k){var Re=Ae>Ke?f.slice(0,Ke-s):f;o.addToken(o,Re,c?c+g:g,w,s+Re.length==d?m:"",h,M)}if(Ae>=Ke){f=f.slice(Ke-s),s=Ke;break}s=Ae,w=""}f=n.slice(i,i=e[u++]),c=Ea(e[u++],o.cm.options)}}else for(var l=1;l<e.length;l+=2)o.addToken(o,n.slice(i,i=e[l]),Ea(e[l+1],o.cm.options))}function El(r,o,e){this.line=o,this.rest=function Gr(r){for(var o,e;o=Vi(r);)r=o.find(1,!0).line,(e||(e=[])).push(r);return e}(o),this.size=this.rest?_e(me(this.rest))-e+1:1,this.node=this.text=null,this.hidden=qr(r,o)}function Go(r,o,e){for(var n,t=[],i=o;i<e;i=n){var l=new El(r.doc,ie(r.doc,i),i);n=i+l.size,t.push(l)}return t}var Rn=null;var eo=null;function Pt(r,o){var e=di(r,o);if(e.length){var n,t=Array.prototype.slice.call(arguments,2);Rn?n=Rn.delayedCallbacks:eo?n=eo:(n=eo=[],setTimeout(to,0));for(var i=function(a){n.push(function(){return e[a].apply(null,t)})},l=0;l<e.length;++l)i(l)}}function to(){var r=eo;eo=null;for(var o=0;o<r.length;++o)r[o]()}function Et(r,o,e,t){for(var n=0;n<o.changes.length;n++){var i=o.changes[n];"text"==i?Bs(r,o):"gutter"==i?Ba(r,o,e,t):"class"==i?Zo(r,o):"widget"==i&&Fl(r,o,t)}o.changes=null}function ro(r){return r.node==r.text&&(r.node=T("div",null,null,"position: relative"),r.text.parentNode&&r.text.parentNode.replaceChild(r.node,r.text),r.node.appendChild(r.text),$&&K<8&&(r.node.style.zIndex=2)),r.node}function Ci(r,o){var e=r.display.externalMeasured;return e&&e.line==o.line?(r.display.externalMeasured=null,o.measure=e.measure,e.built):Fa(r,o)}function Bs(r,o){var e=o.text.className,t=Ci(r,o);o.text==o.node&&(o.node=t.pre),o.text.parentNode.replaceChild(t.pre,o.text),o.text=t.pre,t.bgClass!=o.bgClass||t.textClass!=o.textClass?(o.bgClass=t.bgClass,o.textClass=t.textClass,Zo(r,o)):e&&(o.text.className=e)}function Zo(r,o){(function Pa(r,o){var e=o.bgClass?o.bgClass+" "+(o.line.bgClass||""):o.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),o.background)e?o.background.className=e:(o.background.parentNode.removeChild(o.background),o.background=null);else if(e){var t=ro(o);o.background=t.insertBefore(T("div",null,e),t.firstChild),r.display.input.setUneditable(o.background)}})(r,o),o.line.wrapClass?ro(o).className=o.line.wrapClass:o.node!=o.text&&(o.node.className=""),o.text.className=(o.textClass?o.textClass+" "+(o.line.textClass||""):o.line.textClass)||""}function Ba(r,o,e,t){if(o.gutter&&(o.node.removeChild(o.gutter),o.gutter=null),o.gutterBackground&&(o.node.removeChild(o.gutterBackground),o.gutterBackground=null),o.line.gutterClass){var n=ro(o);o.gutterBackground=T("div",null,"CodeMirror-gutter-background "+o.line.gutterClass,"left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px; width: "+t.gutterTotalWidth+"px"),r.display.input.setUneditable(o.gutterBackground),n.insertBefore(o.gutterBackground,o.text)}var i=o.line.gutterMarkers;if(r.options.lineNumbers||i){var l=ro(o),a=o.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(r.options.fixedGutter?t.fixedPos:-t.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),r.display.input.setUneditable(a),l.insertBefore(a,o.text),o.line.gutterClass&&(a.className+=" "+o.line.gutterClass),r.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])&&(o.lineNumber=a.appendChild(T("div",b(r.options,e),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+t.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+r.display.lineNumInnerWidth+"px"))),i)for(var s=0;s<r.display.gutterSpecs.length;++s){var u=r.display.gutterSpecs[s].className,f=i.hasOwnProperty(u)&&i[u];f&&a.appendChild(T("div",[f],"CodeMirror-gutter-elt","left: "+t.gutterLeft[u]+"px; width: "+t.gutterWidth[u]+"px"))}}}function Fl(r,o,e){o.alignable&&(o.alignable=null);for(var t=Pe("CodeMirror-linewidget"),n=o.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,t.test(n.className)&&o.node.removeChild(n);Ra(r,o,e)}function _a(r,o,e,t){var n=Ci(r,o);return o.text=o.node=n.pre,n.bgClass&&(o.bgClass=n.bgClass),n.textClass&&(o.textClass=n.textClass),Zo(r,o),Ba(r,o,e,t),Ra(r,o,t),o.node}function Ra(r,o,e){if(za(r,o.line,o,e,!0),o.rest)for(var t=0;t<o.rest.length;t++)za(r,o.rest[t],o,e,!1)}function za(r,o,e,t,n){if(o.widgets)for(var i=ro(e),l=0,a=o.widgets;l<a.length;++l){var s=a[l],u=T("div",[s.node],"CodeMirror-linewidget"+(s.className?" "+s.className:""));s.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),Ua(s,u,e,t),r.display.input.setUneditable(u),n&&s.above?i.insertBefore(u,e.gutter||e.text):i.appendChild(u),Pt(s,"redraw")}}function Ua(r,o,e,t){if(r.noHScroll){(e.alignable||(e.alignable=[])).push(o);var n=t.wrapperWidth;o.style.left=t.fixedPos+"px",r.coverGutter||(n-=t.gutterTotalWidth,o.style.paddingLeft=t.gutterTotalWidth+"px"),o.style.width=n+"px"}r.coverGutter&&(o.style.zIndex=5,o.style.position="relative",r.noHScroll||(o.style.marginLeft=-t.gutterTotalWidth+"px"))}function Si(r){if(null!=r.height)return r.height;var o=r.doc.cm;if(!o)return 0;if(!q(document.body,r.node)){var e="position: relative;";r.coverGutter&&(e+="margin-left: -"+o.display.gutters.offsetWidth+"px;"),r.noHScroll&&(e+="width: "+o.display.wrapper.clientWidth+"px;"),Je(o.display.measure,T("div",[r.node],null,e))}return r.height=r.node.parentNode.offsetHeight}function Vr(r,o){for(var e=Kt(o);e!=r.wrapper;e=e.parentNode)if(!e||1==e.nodeType&&"true"==e.getAttribute("cm-ignore-events")||e.parentNode==r.sizer&&e!=r.mover)return!0}function bn(r){return r.lineSpace.offsetTop}function Ir(r){return r.mover.offsetHeight-r.lineSpace.offsetHeight}function no(r){if(r.cachedPaddingH)return r.cachedPaddingH;var o=Je(r.measure,T("pre","x","CodeMirror-line-like")),e=window.getComputedStyle?window.getComputedStyle(o):o.currentStyle,t={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};return!isNaN(t.left)&&!isNaN(t.right)&&(r.cachedPaddingH=t),t}function xr(r){return le-r.display.nativeBarWidth}function wn(r){return r.display.scroller.clientWidth-xr(r)-r.display.barWidth}function br(r){return r.display.scroller.clientHeight-xr(r)-r.display.barHeight}function Ko(r,o,e){if(r.line==o)return{map:r.measure.map,cache:r.measure.cache};if(r.rest){for(var t=0;t<r.rest.length;t++)if(r.rest[t]==o)return{map:r.measure.maps[t],cache:r.measure.caches[t]};for(var n=0;n<r.rest.length;n++)if(_e(r.rest[n])>e)return{map:r.measure.maps[n],cache:r.measure.caches[n],before:!0}}}function Wl(r,o,e,t){return wr(r,Un(r,o),e,t)}function Hl(r,o){if(o>=r.display.viewFrom&&o<r.display.viewTo)return r.display.view[$r(r,o)];var e=r.display.externalMeasured;return e&&o>=e.lineN&&o<e.lineN+e.size?e:void 0}function Un(r,o){var e=_e(o),t=Hl(r,e);t&&!t.text?t=null:t&&t.changes&&(Et(r,t,e,Cn(r)),r.curOp.forceUpdate=!0),t||(t=function _s(r,o){var e=_e(o=Wr(o)),t=r.display.externalMeasured=new El(r.doc,o,e);t.lineN=e;var n=t.built=Fa(r,t);return t.text=n.pre,Je(r.display.lineMeasure,n.pre),t}(r,o));var n=Ko(t,o,e);return{line:o,view:t,rect:null,map:n.map,cache:n.cache,before:n.before,hasHeights:!1}}function wr(r,o,e,t,n){o.before&&(e=-1);var l,i=e+(t||"");return o.cache.hasOwnProperty(i)?l=o.cache[i]:(o.rect||(o.rect=o.view.text.getBoundingClientRect()),o.hasHeights||(function zn(r,o,e){var t=r.options.lineWrapping,n=t&&wn(r);if(!o.measure.heights||t&&o.measure.width!=n){var i=o.measure.heights=[];if(t){o.measure.width=n;for(var l=o.text.firstChild.getClientRects(),a=0;a<l.length-1;a++){var s=l[a],u=l[a+1];Math.abs(s.bottom-u.bottom)>2&&i.push((s.bottom+u.top)/2-e.top)}}i.push(e.bottom-e.top)}}(r,o.view,o.rect),o.hasHeights=!0),(l=function qa(r,o,e,t){var u,n=Pr(o.map,e,t),i=n.node,l=n.start,a=n.end,s=n.collapse;if(3==i.nodeType){for(var f=0;f<4;f++){for(;l&&or(o.line.text.charAt(n.coverStart+l));)--l;for(;n.coverStart+a<n.coverEnd&&or(o.line.text.charAt(n.coverStart+a));)++a;if((u=$&&K<9&&0==l&&a==n.coverEnd-n.coverStart?i.parentNode.getBoundingClientRect():Ga(x(i,l,a).getClientRects(),t)).left||u.right||0==l)break;a=l,l-=1,s="right"}$&&K<11&&(u=function Rs(r,o){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Ho(r){if(null!=Ur)return Ur;var o=Je(r,T("span","x")),e=o.getBoundingClientRect(),t=x(o,0,1).getBoundingClientRect();return Ur=Math.abs(e.left-t.left)>1}(r))return o;var e=screen.logicalXDPI/screen.deviceXDPI,t=screen.logicalYDPI/screen.deviceYDPI;return{left:o.left*e,right:o.right*e,top:o.top*t,bottom:o.bottom*t}}(r.display.measure,u))}else{var c;l>0&&(s=t="right"),u=r.options.lineWrapping&&(c=i.getClientRects()).length>1?c["right"==t?c.length-1:0]:i.getBoundingClientRect()}if($&&K<9&&!l&&(!u||!u.left&&!u.right)){var h=i.parentNode.getClientRects()[0];u=h?{left:h.left,right:h.left+Sr(r.display),top:h.top,bottom:h.bottom}:Gn}for(var d=u.top-o.rect.top,g=u.bottom-o.rect.top,m=(d+g)/2,w=o.view.measure.heights,k=0;k<w.length-1&&!(m<w[k]);k++);var E={left:("right"==s?u.right:u.left)-o.rect.left,right:("left"==s?u.left:u.right)-o.rect.left,top:k?w[k-1]:0,bottom:w[k]};return!u.left&&!u.right&&(E.bogus=!0),r.options.singleCursorHeightPerLine||(E.rtop=d,E.rbottom=g),E}(r,o,e,t)).bogus||(o.cache[i]=l)),{left:l.left,right:l.right,top:n?l.rtop:l.top,bottom:n?l.rbottom:l.bottom}}var Zn,Gn={left:0,right:0,top:0,bottom:0};function Pr(r,o,e){for(var t,n,i,l,a,s,u=0;u<r.length;u+=3)if(s=r[u+1],o<(a=r[u])?(n=0,i=1,l="left"):o<s?i=1+(n=o-a):(u==r.length-3||o==s&&r[u+3]>o)&&(n=(i=s-a)-1,o>=s&&(l="right")),null!=n){if(t=r[u+2],a==s&&e==(t.insertLeft?"left":"right")&&(l=e),"left"==e&&0==n)for(;u&&r[u-2]==r[u-3]&&r[u-1].insertLeft;)t=r[2+(u-=3)],l="left";if("right"==e&&n==s-a)for(;u<r.length-3&&r[u+3]==r[u+4]&&!r[u+5].insertLeft;)t=r[(u+=3)+2],l="right";break}return{node:t,start:n,end:i,collapse:l,coverStart:a,coverEnd:s}}function Ga(r,o){var e=Gn;if("left"==o)for(var t=0;t<r.length&&(e=r[t]).left==e.right;t++);else for(var n=r.length-1;n>=0&&(e=r[n]).left==e.right;n--);return e}function Za(r){if(r.measure&&(r.measure.cache={},r.measure.heights=null,r.rest))for(var o=0;o<r.rest.length;o++)r.measure.caches[o]={}}function Ka(r){r.display.externalMeasure=null,se(r.display.lineMeasure);for(var o=0;o<r.display.view.length;o++)Za(r.display.view[o])}function ki(r){Ka(r),r.display.cachedCharWidth=r.display.cachedTextHeight=r.display.cachedPaddingH=null,r.options.lineWrapping||(r.display.maxLineChanged=!0),r.display.lineNumChars=null}function Il(r){return ce&&ut?-(r.body.getBoundingClientRect().left-parseInt(getComputedStyle(r.body).marginLeft)):r.defaultView.pageXOffset||(r.documentElement||r.body).scrollLeft}function Li(r){return ce&&ut?-(r.body.getBoundingClientRect().top-parseInt(getComputedStyle(r.body).marginTop)):r.defaultView.pageYOffset||(r.documentElement||r.body).scrollTop}function Yo(r){var e=Wr(r).widgets,t=0;if(e)for(var n=0;n<e.length;++n)e[n].above&&(t+=Si(e[n]));return t}function io(r,o,e,t,n){if(!n){var i=Yo(o);e.top+=i,e.bottom+=i}if("line"==t)return e;t||(t="local");var l=$t(o);if("local"==t?l+=bn(r.display):l-=r.display.viewOffset,"page"==t||"window"==t){var a=r.display.lineSpace.getBoundingClientRect();l+=a.top+("window"==t?0:Li(gt(r)));var s=a.left+("window"==t?0:Il(gt(r)));e.left+=s,e.right+=s}return e.top+=l,e.bottom+=l,e}function Xo(r,o,e){if("div"==e)return o;var t=o.left,n=o.top;if("page"==e)t-=Il(gt(r)),n-=Li(gt(r));else if("local"==e||!e){var i=r.display.sizer.getBoundingClientRect();t+=i.left,n+=i.top}var l=r.display.lineSpace.getBoundingClientRect();return{left:t-l.left,top:n-l.top}}function qn(r,o,e,t,n){return t||(t=ie(r.doc,o.line)),io(r,t,Wl(r,t,o.ch,n),e)}function Cr(r,o,e,t,n,i){function l(g,m){var w=wr(r,n,g,m?"right":"left",i);return m?w.left=w.right:w.right=w.left,io(r,t,w,e)}t=t||ie(r.doc,o.line),n||(n=Un(r,t));var a=Qt(t,r.doc.direction),s=o.ch,u=o.sticky;if(s>=t.text.length?(s=t.text.length,u="before"):s<=0&&(s=0,u="after"),!a)return l("before"==u?s-1:s,"before"==u);function f(g,m,w){return l(w?g-1:g,1==a[m].level!=w)}var c=xt(a,s,u),h=it,d=f(s,c,"before"==u);return null!=h&&(d.other=f(s,h,"before"!=u)),d}function oo(r,o){var e=0;o=ve(r.doc,o),r.options.lineWrapping||(e=Sr(r.display)*o.ch);var t=ie(r.doc,o.line),n=$t(t)+bn(r.display);return{left:e,right:e,top:n,bottom:n+t.height}}function hr(r,o,e,t,n){var i=C(r,o,e);return i.xRel=n,t&&(i.outside=t),i}function jo(r,o,e){var t=r.doc;if((e+=r.display.viewOffset)<0)return hr(t.first,0,null,-1,-1);var n=It(t,e),i=t.first+t.size-1;if(n>i)return hr(t.first+t.size-1,ie(t,i).text.length,null,1,1);o<0&&(o=0);for(var l=ie(t,n);;){var a=Ya(r,l,n,o,e),s=Da(l,a.ch+(a.xRel>0||a.outside>0?1:0));if(!s)return a;var u=s.find(1);if(u.line==n)return u;l=ie(t,n=u.line)}}function Jo(r,o,e,t){t-=Yo(o);var n=o.text.length,i=Ee(function(l){return wr(r,e,l-1).bottom<=t},n,0);return{begin:i,end:n=Ee(function(l){return wr(r,e,l).top>t},i,n)}}function Qo(r,o,e,t){return e||(e=Un(r,o)),Jo(r,o,e,io(r,o,wr(r,e,t),"line").top)}function Vo(r,o,e,t){return!(r.bottom<=e)&&(r.top>e||(t?r.left:r.right)>o)}function Ya(r,o,e,t,n){n-=$t(o);var i=Un(r,o),l=Yo(o),a=0,s=o.text.length,u=!0,f=Qt(o,r.doc.direction);if(f){var c=(r.options.lineWrapping?zs:Pl)(r,o,e,i,f,t,n);a=(u=1!=c.level)?c.from:c.to-1,s=u?c.to:c.from-1}var m,w,h=null,d=null,g=Ee(function(W){var H=wr(r,i,W);return H.top+=l,H.bottom+=l,!!Vo(H,t,n,!1)&&(H.top<=n&&H.left<=t&&(h=W,d=H),!0)},a,s),k=!1;if(d){var M=t-d.left<d.right-t,A=M==u;g=h+(A?0:1),w=A?"after":"before",m=M?d.left:d.right}else{!u&&(g==s||g==a)&&g++,w=0==g?"after":g==o.text.length?"before":wr(r,i,g-(u?1:0)).bottom+l<=n==u?"after":"before";var E=Cr(r,C(e,g,w),"line",o,i);m=E.left,k=n<E.top?-1:n>=E.bottom?1:0}return hr(e,g=Ot(o.text,g,1),w,k,t-m)}function Pl(r,o,e,t,n,i,l){var a=Ee(function(c){var h=n[c],d=1!=h.level;return Vo(Cr(r,C(e,d?h.to:h.from,d?"before":"after"),"line",o,t),i,l,!0)},0,n.length-1),s=n[a];if(a>0){var u=1!=s.level,f=Cr(r,C(e,u?s.from:s.to,u?"after":"before"),"line",o,t);Vo(f,i,l,!0)&&f.top>l&&(s=n[a-1])}return s}function zs(r,o,e,t,n,i,l){var a=Jo(r,o,t,l),s=a.begin,u=a.end;/\s/.test(o.text.charAt(u-1))&&u--;for(var f=null,c=null,h=0;h<n.length;h++){var d=n[h];if(!(d.from>=u||d.to<=s)){var m=wr(r,t,1!=d.level?Math.min(u,d.to)-1:Math.max(s,d.from)).right,w=m<i?i-m+1e9:m-i;(!f||c>w)&&(f=d,c=w)}}return f||(f=n[n.length-1]),f.from<s&&(f={from:s,to:f.to,level:f.level}),f.to>u&&(f={from:f.from,to:u,level:f.level}),f}function Ti(r){if(null!=r.cachedTextHeight)return r.cachedTextHeight;if(null==Zn){Zn=T("pre",null,"CodeMirror-line-like");for(var o=0;o<49;++o)Zn.appendChild(document.createTextNode("x")),Zn.appendChild(T("br"));Zn.appendChild(document.createTextNode("x"))}Je(r.measure,Zn);var e=Zn.offsetHeight/50;return e>3&&(r.cachedTextHeight=e),se(r.measure),e||1}function Sr(r){if(null!=r.cachedCharWidth)return r.cachedCharWidth;var o=T("span","xxxxxxxxxx"),e=T("pre",[o],"CodeMirror-line-like");Je(r.measure,e);var t=o.getBoundingClientRect(),n=(t.right-t.left)/10;return n>2&&(r.cachedCharWidth=n),n||10}function Cn(r){for(var o=r.display,e={},t={},n=o.gutters.clientLeft,i=o.gutters.firstChild,l=0;i;i=i.nextSibling,++l){var a=r.display.gutterSpecs[l].className;e[a]=i.offsetLeft+i.clientLeft+n,t[a]=i.clientWidth}return{fixedPos:Sn(o),gutterTotalWidth:o.gutters.offsetWidth,gutterLeft:e,gutterWidth:t,wrapperWidth:o.wrapper.clientWidth}}function Sn(r){return r.scroller.getBoundingClientRect().left-r.sizer.getBoundingClientRect().left}function $o(r){var o=Ti(r.display),e=r.options.lineWrapping,t=e&&Math.max(5,r.display.scroller.clientWidth/Sr(r.display)-3);return function(n){if(qr(r.doc,n))return 0;var i=0;if(n.widgets)for(var l=0;l<n.widgets.length;l++)n.widgets[l].height&&(i+=n.widgets[l].height);return e?i+(Math.ceil(n.text.length/t)||1)*o:i+o}}function lo(r){var o=r.doc,e=$o(r);o.iter(function(t){var n=e(t);n!=t.height&&Rt(t,n)})}function kn(r,o,e,t){var n=r.display;if(!e&&"true"==Kt(o).getAttribute("cm-not-content"))return null;var i,l,a=n.lineSpace.getBoundingClientRect();try{i=o.clientX-a.left,l=o.clientY-a.top}catch{return null}var u,s=jo(r,i,l);if(t&&s.xRel>0&&(u=ie(r.doc,s.line).text).length==s.ch){var f=Q(u,u.length,r.options.tabSize)-u.length;s=C(s.line,Math.max(0,Math.round((i-no(r.display).left)/Sr(r.display))-f))}return s}function $r(r,o){if(o>=r.display.viewTo||(o-=r.display.viewFrom)<0)return null;for(var e=r.display.view,t=0;t<e.length;t++)if((o-=e[t].size)<0)return t}function Dt(r,o,e,t){null==o&&(o=r.doc.first),null==e&&(e=r.doc.first+r.doc.size),t||(t=0);var n=r.display;if(t&&e<n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>o)&&(n.updateLineNumbers=o),r.curOp.viewChanged=!0,o>=n.viewTo)jr&&Nl(r.doc,o)<n.viewTo&&St(r);else if(e<=n.viewFrom)jr&&Oa(r.doc,e+t)>n.viewFrom?St(r):(n.viewFrom+=t,n.viewTo+=t);else if(o<=n.viewFrom&&e>=n.viewTo)St(r);else if(o<=n.viewFrom){var i=Br(r,e,e+t,1);i?(n.view=n.view.slice(i.index),n.viewFrom=i.lineN,n.viewTo+=t):St(r)}else if(e>=n.viewTo){var l=Br(r,o,o,-1);l?(n.view=n.view.slice(0,l.index),n.viewTo=l.lineN):St(r)}else{var a=Br(r,o,o,-1),s=Br(r,e,e+t,1);a&&s?(n.view=n.view.slice(0,a.index).concat(Go(r,a.lineN,s.lineN)).concat(n.view.slice(s.index)),n.viewTo+=t):St(r)}var u=n.externalMeasured;u&&(e<u.lineN?u.lineN+=t:o<u.lineN+u.size&&(n.externalMeasured=null))}function sr(r,o,e){r.curOp.viewChanged=!0;var t=r.display,n=r.display.externalMeasured;if(n&&o>=n.lineN&&o<n.lineN+n.size&&(t.externalMeasured=null),!(o<t.viewFrom||o>=t.viewTo)){var i=t.view[$r(r,o)];if(null!=i.node){var l=i.changes||(i.changes=[]);-1==D(l,e)&&l.push(e)}}}function St(r){r.display.viewFrom=r.display.viewTo=r.doc.first,r.display.view=[],r.display.viewOffset=0}function Br(r,o,e,t){var i,n=$r(r,o),l=r.display.view;if(!jr||e==r.doc.first+r.doc.size)return{index:n,lineN:e};for(var a=r.display.viewFrom,s=0;s<n;s++)a+=l[s].size;if(a!=o){if(t>0){if(n==l.length-1)return null;i=a+l[n].size-o,n++}else i=a-o;o+=i,e+=i}for(;Nl(r.doc,e)!=e;){if(n==(t<0?0:l.length-1))return null;e+=t*l[n-(t<0?1:0)].size,n+=t}return{index:n,lineN:e}}function ao(r){for(var o=r.display.view,e=0,t=0;t<o.length;t++){var n=o[t];!n.hidden&&(!n.node||n.changes)&&++e}return e}function so(r){r.display.input.showSelection(r.display.input.prepareSelection())}function Bl(r,o){void 0===o&&(o=!0);var e=r.doc,t={},n=t.cursors=document.createDocumentFragment(),i=t.selection=document.createDocumentFragment(),l=r.options.$customCursor;l&&(o=!0);for(var a=0;a<e.sel.ranges.length;a++)if(o||a!=e.sel.primIndex){var s=e.sel.ranges[a];if(!(s.from().line>=r.display.viewTo||s.to().line<r.display.viewFrom)){var u=s.empty();if(l){var f=l(r,s);f&&Kn(r,f,n)}else(u||r.options.showCursorWhenSelecting)&&Kn(r,s.head,n);u||_l(r,s,i)}}return t}function Kn(r,o,e){var t=Cr(r,o,"div",null,null,!r.options.singleCursorHeightPerLine),n=e.appendChild(T("div","\xa0","CodeMirror-cursor"));if(n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.height=Math.max(0,t.bottom-t.top)*r.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(r.getWrapperElement().className)){var i=qn(r,o,"div",null,null),l=i.right-i.left;n.style.width=(l>0?l:r.defaultCharWidth())+"px"}if(t.other){var a=e.appendChild(T("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=t.other.left+"px",a.style.top=t.other.top+"px",a.style.height=.85*(t.other.bottom-t.other.top)+"px"}}function uo(r,o){return r.top-o.top||r.left-o.left}function _l(r,o,e){var t=r.display,n=r.doc,i=document.createDocumentFragment(),l=no(r.display),a=l.left,s=Math.max(t.sizerWidth,wn(r)-t.sizer.offsetLeft)-l.right,u="ltr"==n.direction;function f(A,E,W,H){E<0&&(E=0),E=Math.round(E),H=Math.round(H),i.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+A+"px;\n                             top: "+E+"px; width: "+(W??s-A)+"px;\n                             height: "+(H-E)+"px"))}function c(A,E,W){var Y,fe,H=ie(n,A),z=H.text.length;function ge(Re,tt){return qn(r,C(A,Re),"div",H,tt)}function Ke(Re,tt,De){var ze=Qo(r,H,null,Re),Ne="ltr"==tt==("after"==De)?"left":"right";return ge("after"==De?ze.begin:ze.end-(/\s/.test(H.text.charAt(ze.end-1))?2:1),Ne)[Ne]}var Ae=Qt(H,n.direction);return function Wt(r,o,e,t){if(!r)return t(o,e,"ltr",0);for(var n=!1,i=0;i<r.length;++i){var l=r[i];(l.from<e&&l.to>o||o==e&&l.to==o)&&(t(Math.max(l.from,o),Math.min(l.to,e),1==l.level?"rtl":"ltr",i),n=!0)}n||t(o,e,"ltr")}(Ae,E||0,W??z,function(Re,tt,De,ze){var Ne="ltr"==De,ke=ge(Re,Ne?"left":"right"),He=ge(tt-1,Ne?"right":"left"),lt=null==E&&0==Re,Lt=null==W&&tt==z,Tt=0==ze,Xt=!Ae||ze==Ae.length-1;if(He.top-ke.top<=3){var st=(u?lt:Lt)&&Tt?a:(Ne?ke:He).left;f(st,ke.top,((u?Lt:lt)&&Xt?s:(Ne?He:ke).right)-st,ke.bottom)}else{var ir,Mt,Ar,Gt;Ne?(ir=u&&lt&&Tt?a:ke.left,Mt=u?s:Ke(Re,De,"before"),Ar=u?a:Ke(tt,De,"after"),Gt=u&&Lt&&Xt?s:He.right):(ir=u?Ke(Re,De,"before"):a,Mt=!u&&lt&&Tt?s:ke.right,Ar=!u&&Lt&&Xt?a:He.left,Gt=u?Ke(tt,De,"after"):s),f(ir,ke.top,Mt-ir,ke.bottom),ke.bottom<He.top&&f(a,ke.bottom,null,He.top),f(Ar,He.top,Gt-Ar,He.bottom)}(!Y||uo(ke,Y)<0)&&(Y=ke),uo(He,Y)<0&&(Y=He),(!fe||uo(ke,fe)<0)&&(fe=ke),uo(He,fe)<0&&(fe=He)}),{start:Y,end:fe}}var h=o.from(),d=o.to();if(h.line==d.line)c(h.line,h.ch,d.ch);else{var g=ie(n,h.line),m=ie(n,d.line),w=Wr(g)==Wr(m),k=c(h.line,h.ch,w?g.text.length+1:null).end,M=c(d.line,w?0:null,d.ch).start;w&&(k.top<M.top-2?(f(k.right,k.top,null,k.bottom),f(a,M.top,M.left,M.bottom)):f(k.right,k.top,M.left-k.right,k.bottom)),k.bottom<M.top&&f(a,k.bottom,null,M.top)}e.appendChild(i)}function Mi(r){if(r.state.focused){var o=r.display;clearInterval(o.blinker);var e=!0;o.cursorDiv.style.visibility="",r.options.cursorBlinkRate>0?o.blinker=setInterval(function(){r.hasFocus()||Tn(r),o.cursorDiv.style.visibility=(e=!e)?"":"hidden"},r.options.cursorBlinkRate):r.options.cursorBlinkRate<0&&(o.cursorDiv.style.visibility="hidden")}}function Xa(r){r.hasFocus()||(r.display.input.focus(),r.state.focused||el(r))}function fo(r){r.state.delayingBlurEvent=!0,setTimeout(function(){r.state.delayingBlurEvent&&(r.state.delayingBlurEvent=!1,r.state.focused&&Tn(r))},100)}function el(r,o){r.state.delayingBlurEvent&&!r.state.draggingText&&(r.state.delayingBlurEvent=!1),"nocursor"!=r.options.readOnly&&(r.state.focused||(Ve(r,"focus",r,o),r.state.focused=!0,te(r.display.wrapper,"CodeMirror-focused"),!r.curOp&&r.display.selForContextMenu!=r.doc.sel&&(r.display.input.reset(),B&&setTimeout(function(){return r.display.input.reset(!0)},20)),r.display.input.receivedFocus()),Mi(r))}function Tn(r,o){r.state.delayingBlurEvent||(r.state.focused&&(Ve(r,"blur",r,o),r.state.focused=!1,Nt(r.display.wrapper,"CodeMirror-focused")),clearInterval(r.display.blinker),setTimeout(function(){r.state.focused||(r.display.shift=!1)},150))}function Ai(r){for(var o=r.display,e=o.lineDiv.offsetTop,t=Math.max(0,o.scroller.getBoundingClientRect().top),n=o.lineDiv.getBoundingClientRect().top,i=0,l=0;l<o.view.length;l++){var a=o.view[l],s=r.options.lineWrapping,u=void 0,f=0;if(!a.hidden){if(n+=a.line.height,$&&K<8){var c=a.node.offsetTop+a.node.offsetHeight;u=c-e,e=c}else{var h=a.node.getBoundingClientRect();u=h.bottom-h.top,!s&&a.text.firstChild&&(f=a.text.firstChild.getBoundingClientRect().right-h.left-1)}var d=a.line.height-u;if((d>.005||d<-.005)&&(n<t&&(i-=d),Rt(a.line,u),Yn(a.line),a.rest))for(var g=0;g<a.rest.length;g++)Yn(a.rest[g]);if(f>r.display.sizerWidth){var m=Math.ceil(f/Sr(r.display));m>r.display.maxLineLength&&(r.display.maxLineLength=m,r.display.maxLine=a.line,r.display.maxLineChanged=!0)}}}Math.abs(i)>2&&(o.scroller.scrollTop+=i)}function Yn(r){if(r.widgets)for(var o=0;o<r.widgets.length;++o){var e=r.widgets[o],t=e.node.parentNode;t&&(e.height=t.offsetHeight)}}function Xn(r,o,e){var t=e&&null!=e.top?Math.max(0,e.top):r.scroller.scrollTop;t=Math.floor(t-bn(r));var n=e&&null!=e.bottom?e.bottom:t+r.wrapper.clientHeight,i=It(o,t),l=It(o,n);if(e&&e.ensure){var a=e.ensure.from.line,s=e.ensure.to.line;a<i?(i=a,l=It(o,$t(ie(o,a))+r.wrapper.clientHeight)):Math.min(s,o.lastLine())>=l&&(i=It(o,$t(ie(o,s))-r.wrapper.clientHeight),l=s)}return{from:i,to:Math.max(l,i+1)}}function Rl(r,o){var e=r.display,t=Ti(r.display);o.top<0&&(o.top=0);var n=r.curOp&&null!=r.curOp.scrollTop?r.curOp.scrollTop:e.scroller.scrollTop,i=br(r),l={};o.bottom-o.top>i&&(o.bottom=o.top+i);var a=r.doc.height+Ir(e),u=o.bottom>a-t;if(o.top<n)l.scrollTop=o.top<t?0:o.top;else if(o.bottom>n+i){var f=Math.min(o.top,(u?a:o.bottom)-i);f!=n&&(l.scrollTop=f)}var c=r.options.fixedGutter?0:e.gutters.offsetWidth,h=r.curOp&&null!=r.curOp.scrollLeft?r.curOp.scrollLeft:e.scroller.scrollLeft-c,d=wn(r)-e.gutters.offsetWidth,g=o.right-o.left>d;return g&&(o.right=o.left+d),o.left<10?l.scrollLeft=0:o.left<h?l.scrollLeft=Math.max(0,o.left+c-(g?0:10)):o.right>d+h-3&&(l.scrollLeft=o.right+(g?0:10)-d),l}function zl(r,o){null!=o&&(An(r),r.curOp.scrollTop=(null==r.curOp.scrollTop?r.doc.scrollTop:r.curOp.scrollTop)+o)}function Mn(r){An(r);var o=r.getCursor();r.curOp.scrollToPos={from:o,to:o,margin:r.options.cursorScrollMargin}}function jn(r,o,e){(null!=o||null!=e)&&An(r),null!=o&&(r.curOp.scrollLeft=o),null!=e&&(r.curOp.scrollTop=e)}function An(r){var o=r.curOp.scrollToPos;o&&(r.curOp.scrollToPos=null,Ja(r,oo(r,o.from),oo(r,o.to),o.margin))}function Ja(r,o,e,t){var n=Rl(r,{left:Math.min(o.left,e.left),top:Math.min(o.top,e.top)-t,right:Math.max(o.right,e.right),bottom:Math.max(o.bottom,e.bottom)+t});jn(r,n.scrollLeft,n.scrollTop)}function Dn(r,o){Math.abs(r.doc.scrollTop-o)<2||(j||co(r,{top:o}),Ul(r,o,!0),j&&co(r),Ft(r,100))}function Ul(r,o,e){o=Math.max(0,Math.min(r.display.scroller.scrollHeight-r.display.scroller.clientHeight,o)),(r.display.scroller.scrollTop!=o||e)&&(r.doc.scrollTop=o,r.display.scrollbars.setScrollTop(o),r.display.scroller.scrollTop!=o&&(r.display.scroller.scrollTop=o))}function _r(r,o,e,t){o=Math.max(0,Math.min(o,r.display.scroller.scrollWidth-r.display.scroller.clientWidth)),(!(e?o==r.doc.scrollLeft:Math.abs(r.doc.scrollLeft-o)<2)||t)&&(r.doc.scrollLeft=o,nl(r),r.display.scroller.scrollLeft!=o&&(r.display.scroller.scrollLeft=o),r.display.scrollbars.setScrollLeft(o))}function Ni(r){var o=r.display,e=o.gutters.offsetWidth,t=Math.round(r.doc.height+Ir(r.display));return{clientHeight:o.scroller.clientHeight,viewHeight:o.wrapper.clientHeight,scrollWidth:o.scroller.scrollWidth,clientWidth:o.scroller.clientWidth,viewWidth:o.wrapper.clientWidth,barLeft:r.options.fixedGutter?e:0,docHeight:t,scrollHeight:t+xr(r)+o.barHeight,nativeBarWidth:o.nativeBarWidth,gutterWidth:e}}var dr=function(r,o,e){this.cm=e;var t=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t.tabIndex=n.tabIndex=-1,r(t),r(n),Z(t,"scroll",function(){t.clientHeight&&o(t.scrollTop,"vertical")}),Z(n,"scroll",function(){n.clientWidth&&o(n.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,$&&K<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};dr.prototype.update=function(r){var o=r.scrollWidth>r.clientWidth+1,e=r.scrollHeight>r.clientHeight+1,t=r.nativeBarWidth;return e?(this.vert.style.display="block",this.vert.style.bottom=o?t+"px":"0",this.vert.firstChild.style.height=Math.max(0,r.scrollHeight-r.clientHeight+(r.viewHeight-(o?t:0)))+"px"):(this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0"),o?(this.horiz.style.display="block",this.horiz.style.right=e?t+"px":"0",this.horiz.style.left=r.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,r.scrollWidth-r.clientWidth+(r.viewWidth-r.barLeft-(e?t:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&r.clientHeight>0&&(0==t&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:e?t:0,bottom:o?t:0}},dr.prototype.setScrollLeft=function(r){this.horiz.scrollLeft!=r&&(this.horiz.scrollLeft=r),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},dr.prototype.setScrollTop=function(r){this.vert.scrollTop!=r&&(this.vert.scrollTop=r),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},dr.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=je&&!Se?"12px":"18px",this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new N,this.disableVert=new N},dr.prototype.enableZeroWidthBar=function(r,o,e){r.style.visibility="",o.set(1e3,function t(){var n=r.getBoundingClientRect();("vert"==e?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1))!=r?r.style.visibility="hidden":o.set(1e3,t)})},dr.prototype.clear=function(){var r=this.horiz.parentNode;r.removeChild(this.horiz),r.removeChild(this.vert)};var en=function(){};function kr(r,o){o||(o=Ni(r));var e=r.display.barWidth,t=r.display.barHeight;Oi(r,o);for(var n=0;n<4&&e!=r.display.barWidth||t!=r.display.barHeight;n++)e!=r.display.barWidth&&r.options.lineWrapping&&Ai(r),Oi(r,Ni(r)),e=r.display.barWidth,t=r.display.barHeight}function Oi(r,o){var e=r.display,t=e.scrollbars.update(o);e.sizer.style.paddingRight=(e.barWidth=t.right)+"px",e.sizer.style.paddingBottom=(e.barHeight=t.bottom)+"px",e.heightForcer.style.borderBottom=t.bottom+"px solid transparent",t.right&&t.bottom?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=t.bottom+"px",e.scrollbarFiller.style.width=t.right+"px"):e.scrollbarFiller.style.display="",t.bottom&&r.options.coverGutterNextToScrollbar&&r.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=t.bottom+"px",e.gutterFiller.style.width=o.gutterWidth+"px"):e.gutterFiller.style.display=""}en.prototype.update=function(){return{bottom:0,right:0}},en.prototype.setScrollLeft=function(){},en.prototype.setScrollTop=function(){},en.prototype.clear=function(){};var Jn={native:dr,null:en};function Gl(r){r.display.scrollbars&&(r.display.scrollbars.clear(),r.display.scrollbars.addClass&&Nt(r.display.wrapper,r.display.scrollbars.addClass)),r.display.scrollbars=new Jn[r.options.scrollbarStyle](function(o){r.display.wrapper.insertBefore(o,r.display.scrollbarFiller),Z(o,"mousedown",function(){r.state.focused&&setTimeout(function(){return r.display.input.focus()},0)}),o.setAttribute("cm-not-content","true")},function(o,e){"horizontal"==e?_r(r,o):Dn(r,o)},r),r.display.scrollbars.addClass&&te(r.display.wrapper,r.display.scrollbars.addClass)}var Qa=0;function Nn(r){r.curOp={cm:r,viewChanged:!1,startHeight:r.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Qa,markArrays:null},function qo(r){Rn?Rn.ops.push(r):r.ownsGroup=Rn={ops:[r],delayedCallbacks:[]}}(r.curOp)}function Qn(r){var o=r.curOp;o&&function Ps(r,o){var e=r.ownsGroup;if(e)try{!function wi(r){var o=r.delayedCallbacks,e=0;do{for(;e<o.length;e++)o[e].call(null);for(var t=0;t<r.ops.length;t++){var n=r.ops[t];if(n.cursorActivityHandlers)for(;n.cursorActivityCalled<n.cursorActivityHandlers.length;)n.cursorActivityHandlers[n.cursorActivityCalled++].call(null,n.cm)}}while(e<o.length)}(e)}finally{Rn=null,o(e)}}(o,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function Vn(r){for(var o=r.ops,e=0;e<o.length;e++)$n(o[e]);for(var t=0;t<o.length;t++)Gs(o[t]);for(var n=0;n<o.length;n++)qs(o[n]);for(var i=0;i<o.length;i++)Zs(o[i]);for(var l=0;l<o.length;l++)Ks(o[l])}(e)})}function $n(r){var o=r.cm,e=o.display;(function Ys(r){var o=r.display;!o.scrollbarsClipped&&o.scroller.offsetWidth&&(o.nativeBarWidth=o.scroller.offsetWidth-o.scroller.clientWidth,o.heightForcer.style.height=xr(r)+"px",o.sizer.style.marginBottom=-o.nativeBarWidth+"px",o.sizer.style.borderRightWidth=xr(r)+"px",o.scrollbarsClipped=!0)})(o),r.updateMaxLine&&Hr(o),r.mustUpdate=r.viewChanged||r.forceUpdate||null!=r.scrollTop||r.scrollToPos&&(r.scrollToPos.from.line<e.viewFrom||r.scrollToPos.to.line>=e.viewTo)||e.maxLineChanged&&o.options.lineWrapping,r.update=r.mustUpdate&&new On(o,r.mustUpdate&&{top:r.scrollTop,ensure:r.scrollToPos},r.forceUpdate)}function Gs(r){r.updatedDisplay=r.mustUpdate&&ql(r.cm,r.update)}function qs(r){var o=r.cm,e=o.display;r.updatedDisplay&&Ai(o),r.barMeasure=Ni(o),e.maxLineChanged&&!o.options.lineWrapping&&(r.adjustWidthTo=Wl(o,e.maxLine,e.maxLine.text.length).left+3,o.display.sizerWidth=r.adjustWidthTo,r.barMeasure.scrollWidth=Math.max(e.scroller.clientWidth,e.sizer.offsetLeft+r.adjustWidthTo+xr(o)+o.display.barWidth),r.maxScrollLeft=Math.max(0,e.sizer.offsetLeft+r.adjustWidthTo-wn(o))),(r.updatedDisplay||r.selectionChanged)&&(r.preparedSelection=e.input.prepareSelection())}function Zs(r){var o=r.cm;null!=r.adjustWidthTo&&(o.display.sizer.style.minWidth=r.adjustWidthTo+"px",r.maxScrollLeft<o.doc.scrollLeft&&_r(o,Math.min(o.display.scroller.scrollLeft,r.maxScrollLeft),!0),o.display.maxLineChanged=!1);var e=r.focus&&r.focus==P(S(o));r.preparedSelection&&o.display.input.showSelection(r.preparedSelection,e),(r.updatedDisplay||r.startHeight!=o.doc.height)&&kr(o,r.barMeasure),r.updatedDisplay&&Zl(o,r.barMeasure),r.selectionChanged&&Mi(o),o.state.focused&&r.updateInput&&o.display.input.reset(r.typing),e&&Xa(r.cm)}function Ks(r){var o=r.cm,e=o.display,t=o.doc;r.updatedDisplay&&Va(o,r.update),null!=e.wheelStartX&&(null!=r.scrollTop||null!=r.scrollLeft||r.scrollToPos)&&(e.wheelStartX=e.wheelStartY=null),null!=r.scrollTop&&Ul(o,r.scrollTop,r.forceScroll),null!=r.scrollLeft&&_r(o,r.scrollLeft,!0,!0),r.scrollToPos&&function ja(r,o){if(!Fe(r,"scrollCursorIntoView")){var e=r.display,t=e.sizer.getBoundingClientRect(),n=null,i=e.wrapper.ownerDocument;if(o.top+t.top<0?n=!0:o.bottom+t.top>(i.defaultView.innerHeight||i.documentElement.clientHeight)&&(n=!1),null!=n&&!Xe){var l=T("div","\u200b",null,"position: absolute;\n                         top: "+(o.top-e.viewOffset-bn(r.display))+"px;\n                         height: "+(o.bottom-o.top+xr(r)+e.barHeight)+"px;\n                         left: "+o.left+"px; width: "+Math.max(2,o.right-o.left)+"px;");r.display.lineSpace.appendChild(l),l.scrollIntoView(n),r.display.lineSpace.removeChild(l)}}}(o,function tl(r,o,e,t){var n;null==t&&(t=0),!r.options.lineWrapping&&o==e&&(e="before"==o.sticky?C(o.line,o.ch+1,"before"):o,o=o.ch?C(o.line,"before"==o.sticky?o.ch-1:o.ch,"after"):o);for(var i=0;i<5;i++){var l=!1,a=Cr(r,o),s=e&&e!=o?Cr(r,e):a,u=Rl(r,n={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top)-t,right:Math.max(a.left,s.left),bottom:Math.max(a.bottom,s.bottom)+t}),f=r.doc.scrollTop,c=r.doc.scrollLeft;if(null!=u.scrollTop&&(Dn(r,u.scrollTop),Math.abs(r.doc.scrollTop-f)>1&&(l=!0)),null!=u.scrollLeft&&(_r(r,u.scrollLeft),Math.abs(r.doc.scrollLeft-c)>1&&(l=!0)),!l)break}return n}(o,ve(t,r.scrollToPos.from),ve(t,r.scrollToPos.to),r.scrollToPos.margin));var i=r.maybeHiddenMarkers,l=r.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||Ve(i[a],"hide");if(l)for(var s=0;s<l.length;++s)l[s].lines.length&&Ve(l[s],"unhide");e.wrapper.offsetHeight&&(t.scrollTop=o.display.scroller.scrollTop),r.changeObjs&&Ve(o,"changes",o,r.changeObjs),r.update&&r.update.finish()}function ur(r,o){if(r.curOp)return o();Nn(r);try{return o()}finally{Qn(r)}}function Bt(r,o){return function(){if(r.curOp)return o.apply(r,arguments);Nn(r);try{return o.apply(r,arguments)}finally{Qn(r)}}}function et(r){return function(){if(this.curOp)return r.apply(this,arguments);Nn(this);try{return r.apply(this,arguments)}finally{Qn(this)}}}function Oe(r){return function(){var o=this.cm;if(!o||o.curOp)return r.apply(this,arguments);Nn(o);try{return r.apply(this,arguments)}finally{Qn(o)}}}function Ft(r,o){r.doc.highlightFrontier<r.display.viewTo&&r.state.highlight.set(o,be(_t,r))}function _t(r){var o=r.doc;if(!(o.highlightFrontier>=r.display.viewTo)){var e=+new Date+r.options.workTime,t=gi(r,o.highlightFrontier),n=[];o.iter(t.line,Math.min(o.first+o.size,r.display.viewTo+500),function(i){if(t.line>=r.display.viewFrom){var l=i.styles,a=i.text.length>r.options.maxHighlightLength?ar(o.mode,t.state):null,s=Zi(r,i,t,!0);a&&(t.state=a),i.styles=s.styles;var u=i.styleClasses,f=s.classes;f?i.styleClasses=f:u&&(i.styleClasses=null);for(var c=!l||l.length!=i.styles.length||u!=f&&(!u||!f||u.bgClass!=f.bgClass||u.textClass!=f.textClass),h=0;!c&&h<l.length;++h)c=l[h]!=i.styles[h];c&&n.push(t.line),i.stateAfter=t.save(),t.nextLine()}else i.text.length<=r.options.maxHighlightLength&&Po(r,i.text,t),i.stateAfter=t.line%5==0?t.save():null,t.nextLine();if(+new Date>e)return Ft(r,r.options.workDelay),!0}),o.highlightFrontier=t.line,o.modeFrontier=Math.max(o.modeFrontier,t.line),n.length&&ur(r,function(){for(var i=0;i<n.length;i++)sr(r,n[i],"text")})}}var On=function(r,o,e){var t=r.display;this.viewport=o,this.visible=Xn(t,r.doc,o),this.editorIsHidden=!t.wrapper.offsetWidth,this.wrapperHeight=t.wrapper.clientHeight,this.wrapperWidth=t.wrapper.clientWidth,this.oldDisplayWidth=wn(r),this.force=e,this.dims=Cn(r),this.events=[]};function ql(r,o){var e=r.display,t=r.doc;if(o.editorIsHidden)return St(r),!1;if(!o.force&&o.visible.from>=e.viewFrom&&o.visible.to<=e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>=e.viewTo)&&e.renderedView==e.view&&0==ao(r))return!1;il(r)&&(St(r),o.dims=Cn(r));var n=t.first+t.size,i=Math.max(o.visible.from-r.options.viewportMargin,t.first),l=Math.min(n,o.visible.to+r.options.viewportMargin);e.viewFrom<i&&i-e.viewFrom<20&&(i=Math.max(t.first,e.viewFrom)),e.viewTo>l&&e.viewTo-l<20&&(l=Math.min(n,e.viewTo)),jr&&(i=Nl(r.doc,i),l=Oa(r.doc,l));var a=i!=e.viewFrom||l!=e.viewTo||e.lastWrapHeight!=o.wrapperHeight||e.lastWrapWidth!=o.wrapperWidth;(function Ln(r,o,e){var t=r.display;0==t.view.length||o>=t.viewTo||e<=t.viewFrom?(t.view=Go(r,o,e),t.viewFrom=o):(t.viewFrom>o?t.view=Go(r,o,t.viewFrom).concat(t.view):t.viewFrom<o&&(t.view=t.view.slice($r(r,o))),t.viewFrom=o,t.viewTo<e?t.view=t.view.concat(Go(r,t.viewTo,e)):t.viewTo>e&&(t.view=t.view.slice(0,$r(r,e)))),t.viewTo=e})(r,i,l),e.viewOffset=$t(ie(r.doc,e.viewFrom)),r.display.mover.style.top=e.viewOffset+"px";var s=ao(r);if(!a&&0==s&&!o.force&&e.renderedView==e.view&&(null==e.updateLineNumbers||e.updateLineNumbers>=e.viewTo))return!1;var u=function rl(r){if(r.hasFocus())return null;var o=P(S(r));if(!o||!q(r.display.lineDiv,o))return null;var e={activeElt:o};if(window.getSelection){var t=V(r).getSelection();t.anchorNode&&t.extend&&q(r.display.lineDiv,t.anchorNode)&&(e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset)}return e}(r);return s>4&&(e.lineDiv.style.display="none"),function $a(r,o,e){var t=r.display,n=r.options.lineNumbers,i=t.lineDiv,l=i.firstChild;function a(g){var m=g.nextSibling;return B&&je&&r.display.currentWheelTarget==g?g.style.display="none":g.parentNode.removeChild(g),m}for(var s=t.view,u=t.viewFrom,f=0;f<s.length;f++){var c=s[f];if(!c.hidden)if(c.node&&c.node.parentNode==i){for(;l!=c.node;)l=a(l);var d=n&&null!=o&&o<=u&&c.lineNumber;c.changes&&(D(c.changes,"gutter")>-1&&(d=!1),Et(r,c,u,e)),d&&(se(c.lineNumber),c.lineNumber.appendChild(document.createTextNode(b(r.options,u)))),l=c.node.nextSibling}else{var h=_a(r,c,u,e);i.insertBefore(h,l)}u+=c.size}for(;l;)l=a(l)}(r,e.updateLineNumbers,o.dims),s>4&&(e.lineDiv.style.display=""),e.renderedView=e.view,function Xs(r){if(r&&r.activeElt&&r.activeElt!=P(v(r.activeElt))&&(r.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(r.activeElt.nodeName)&&r.anchorNode&&q(document.body,r.anchorNode)&&q(document.body,r.focusNode))){var o=r.activeElt.ownerDocument,e=o.defaultView.getSelection(),t=o.createRange();t.setEnd(r.anchorNode,r.anchorOffset),t.collapse(!1),e.removeAllRanges(),e.addRange(t),e.extend(r.focusNode,r.focusOffset)}}(u),se(e.cursorDiv),se(e.selectionDiv),e.gutters.style.height=e.sizer.style.minHeight=0,a&&(e.lastWrapHeight=o.wrapperHeight,e.lastWrapWidth=o.wrapperWidth,Ft(r,400)),e.updateLineNumbers=null,!0}function Va(r,o){for(var e=o.viewport,t=!0;;t=!1){if(t&&r.options.lineWrapping&&o.oldDisplayWidth!=wn(r))t&&(o.visible=Xn(r.display,r.doc,e));else if(e&&null!=e.top&&(e={top:Math.min(r.doc.height+Ir(r.display)-br(r),e.top)}),o.visible=Xn(r.display,r.doc,e),o.visible.from>=r.display.viewFrom&&o.visible.to<=r.display.viewTo)break;if(!ql(r,o))break;Ai(r);var n=Ni(r);so(r),kr(r,n),Zl(r,n),o.force=!1}o.signal(r,"update",r),(r.display.viewFrom!=r.display.reportedViewFrom||r.display.viewTo!=r.display.reportedViewTo)&&(o.signal(r,"viewportChange",r,r.display.viewFrom,r.display.viewTo),r.display.reportedViewFrom=r.display.viewFrom,r.display.reportedViewTo=r.display.viewTo)}function co(r,o){var e=new On(r,o);if(ql(r,e)){Ai(r),Va(r,e);var t=Ni(r);so(r),kr(r,t),Zl(r,t),e.finish()}}function ho(r){r.sizer.style.marginLeft=r.gutters.offsetWidth+"px",Pt(r,"gutterChanged",r)}function Zl(r,o){r.display.sizer.style.minHeight=o.docHeight+"px",r.display.heightForcer.style.top=o.docHeight+"px",r.display.gutters.style.height=o.docHeight+r.display.barHeight+xr(r)+"px"}function nl(r){var o=r.display,e=o.view;if(o.alignWidgets||o.gutters.firstChild&&r.options.fixedGutter){for(var t=Sn(o)-o.scroller.scrollLeft+r.doc.scrollLeft,n=o.gutters.offsetWidth,i=t+"px",l=0;l<e.length;l++)if(!e[l].hidden){r.options.fixedGutter&&(e[l].gutter&&(e[l].gutter.style.left=i),e[l].gutterBackground&&(e[l].gutterBackground.style.left=i));var a=e[l].alignable;if(a)for(var s=0;s<a.length;s++)a[s].style.left=i}r.options.fixedGutter&&(o.gutters.style.left=t+n+"px")}}function il(r){if(!r.options.lineNumbers)return!1;var o=r.doc,e=b(r.options,o.first+o.size-1),t=r.display;if(e.length!=t.lineNumChars){var n=t.measure.appendChild(T("div",[T("div",e)],"CodeMirror-linenumber CodeMirror-gutter-elt")),i=n.firstChild.offsetWidth,l=n.offsetWidth-i;return t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(i,t.lineGutter.offsetWidth-l)+1,t.lineNumWidth=t.lineNumInnerWidth+l,t.lineNumChars=t.lineNumInnerWidth?e.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",ho(r.display),!0}return!1}function ol(r,o){for(var e=[],t=!1,n=0;n<r.length;n++){var i=r[n],l=null;if("string"!=typeof i&&(l=i.style,i=i.className),"CodeMirror-linenumbers"==i){if(!o)continue;t=!0}e.push({className:i,style:l})}return o&&!t&&e.push({className:"CodeMirror-linenumbers",style:null}),e}function Kl(r){var o=r.gutters,e=r.gutterSpecs;se(o),r.lineGutter=null;for(var t=0;t<e.length;++t){var n=e[t],i=n.className,l=n.style,a=o.appendChild(T("div",null,"CodeMirror-gutter "+i));l&&(a.style.cssText=l),"CodeMirror-linenumbers"==i&&(r.lineGutter=a,a.style.width=(r.lineNumWidth||1)+"px")}o.style.display=e.length?"":"none",ho(r)}function ei(r){Kl(r.display),Dt(r),nl(r)}function es(r,o,e,t){var n=this;this.input=e,n.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),n.scrollbarFiller.setAttribute("cm-not-content","true"),n.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),n.gutterFiller.setAttribute("cm-not-content","true"),n.lineDiv=ee("div",null,"CodeMirror-code"),n.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=T("div",null,"CodeMirror-cursors"),n.measure=T("div",null,"CodeMirror-measure"),n.lineMeasure=T("div",null,"CodeMirror-measure"),n.lineSpace=ee("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none");var i=ee("div",[n.lineSpace],"CodeMirror-lines");n.mover=T("div",[i],null,"position: relative"),n.sizer=T("div",[n.mover],"CodeMirror-sizer"),n.sizerWidth=null,n.heightForcer=T("div",null,null,"position: absolute; height: "+le+"px; width: 1px;"),n.gutters=T("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=T("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=T("div",[n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),ce&&Ue>=105&&(n.wrapper.style.clipPath="inset(0px)"),n.wrapper.setAttribute("translate","no"),$&&K<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),!B&&!(j&&he)&&(n.scroller.draggable=!0),r&&(r.appendChild?r.appendChild(n.wrapper):r(n.wrapper)),n.viewFrom=n.viewTo=o.first,n.reportedViewFrom=n.reportedViewTo=o.first,n.view=[],n.renderedView=null,n.externalMeasured=null,n.viewOffset=0,n.lastWrapHeight=n.lastWrapWidth=0,n.updateLineNumbers=null,n.nativeBarWidth=n.barHeight=n.barWidth=0,n.scrollbarsClipped=!1,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.alignWidgets=!1,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null,n.activeTouch=null,n.gutterSpecs=ol(t.gutters,t.lineNumbers),Kl(n),e.init(n)}On.prototype.signal=function(r,o){Be(r,o)&&this.events.push(arguments)},On.prototype.finish=function(){for(var r=0;r<this.events.length;r++)Ve.apply(null,this.events[r])};var En=0,tn=null;function po(r){var o=r.wheelDeltaX,e=r.wheelDeltaY;return null==o&&r.detail&&r.axis==r.HORIZONTAL_AXIS&&(o=r.detail),null==e&&r.detail&&r.axis==r.VERTICAL_AXIS?e=r.detail:null==e&&(e=r.wheelDelta),{x:o,y:e}}function rn(r){var o=po(r);return o.x*=tn,o.y*=tn,o}function Yl(r,o){ce&&102==Ue&&(null==r.display.chromeScrollHack?r.display.sizer.style.pointerEvents="none":clearTimeout(r.display.chromeScrollHack),r.display.chromeScrollHack=setTimeout(function(){r.display.chromeScrollHack=null,r.display.sizer.style.pointerEvents=""},100));var e=po(o),t=e.x,n=e.y,i=tn;0===o.deltaMode&&(t=o.deltaX,n=o.deltaY,i=1);var l=r.display,a=l.scroller,u=a.scrollHeight>a.clientHeight;if(t&&a.scrollWidth>a.clientWidth||n&&u){if(n&&je&&B)e:for(var f=o.target,c=l.view;f!=a;f=f.parentNode)for(var h=0;h<c.length;h++)if(c[h].node==f){r.display.currentWheelTarget=f;break e}if(t&&!j&&!we&&null!=i)return n&&u&&Dn(r,Math.max(0,a.scrollTop+n*i)),_r(r,Math.max(0,a.scrollLeft+t*i)),(!n||n&&u)&&ot(o),void(l.wheelStartX=null);if(n&&null!=i){var d=n*i,g=r.doc.scrollTop,m=g+l.wrapper.clientHeight;d<0?g=Math.max(0,g+d-50):m=Math.min(r.doc.height,m+d+50),co(r,{top:g,bottom:m})}En<20&&0!==o.deltaMode&&(null==l.wheelStartX?(l.wheelStartX=a.scrollLeft,l.wheelStartY=a.scrollTop,l.wheelDX=t,l.wheelDY=n,setTimeout(function(){if(null!=l.wheelStartX){var w=a.scrollLeft-l.wheelStartX,k=a.scrollTop-l.wheelStartY,M=k&&l.wheelDY&&k/l.wheelDY||w&&l.wheelDX&&w/l.wheelDX;l.wheelStartX=l.wheelStartY=null,M&&(tn=(tn*En+M)/(En+1),++En)}},200)):(l.wheelDX+=t,l.wheelDY+=n))}}$?tn=-.53:j?tn=15:ce?tn=-.7:de&&(tn=-1/3);var pr=function(r,o){this.ranges=r,this.primIndex=o};pr.prototype.primary=function(){return this.ranges[this.primIndex]},pr.prototype.equals=function(r){if(r==this)return!0;if(r.primIndex!=this.primIndex||r.ranges.length!=this.ranges.length)return!1;for(var o=0;o<this.ranges.length;o++){var e=this.ranges[o],t=r.ranges[o];if(!O(e.anchor,t.anchor)||!O(e.head,t.head))return!1}return!0},pr.prototype.deepCopy=function(){for(var r=[],o=0;o<this.ranges.length;o++)r[o]=new qe(X(this.ranges[o].anchor),X(this.ranges[o].head));return new pr(r,this.primIndex)},pr.prototype.somethingSelected=function(){for(var r=0;r<this.ranges.length;r++)if(!this.ranges[r].empty())return!0;return!1},pr.prototype.contains=function(r,o){o||(o=r);for(var e=0;e<this.ranges.length;e++){var t=this.ranges[e];if(F(o,t.from())>=0&&F(r,t.to())<=0)return e}return-1};var qe=function(r,o){this.anchor=r,this.head=o};function bt(r,o,e){var t=r&&r.options.selectionsMayTouch,n=o[e];o.sort(function(h,d){return F(h.from(),d.from())}),e=D(o,n);for(var i=1;i<o.length;i++){var l=o[i],a=o[i-1],s=F(a.to(),l.from());if(t&&!l.empty()?s>0:s>=0){var u=Ct(a.from(),l.from()),f=We(a.to(),l.to()),c=a.empty()?l.from()==l.head:a.from()==a.head;i<=e&&--e,o.splice(--i,2,new qe(c?f:u,c?u:f))}}return new pr(o,e)}function Me(r,o){return new pr([new qe(r,o||r)],0)}function zt(r){return r.text?C(r.from.line+r.text.length-1,me(r.text).length+(1==r.text.length?r.from.ch:0)):r.to}function nn(r,o){if(F(r,o.from)<0)return r;if(F(r,o.to)<=0)return zt(o);var e=r.line+o.text.length-(o.to.line-o.from.line)-1,t=r.ch;return r.line==o.to.line&&(t+=zt(o).ch-o.to.ch),C(e,t)}function Zr(r,o){for(var e=[],t=0;t<r.sel.ranges.length;t++){var n=r.sel.ranges[t];e.push(new qe(nn(n.anchor,o),nn(n.head,o)))}return bt(r.cm,e,r.sel.primIndex)}function Xl(r,o,e){return r.line==o.line?C(e.line,r.ch-o.ch+e.ch):C(e.line+(r.line-o.line),r.ch)}function ll(r){r.doc.mode=Xr(r.options,r.doc.modeOption),vo(r)}function vo(r){r.doc.iter(function(o){o.stateAfter&&(o.stateAfter=null),o.styles&&(o.styles=null)}),r.doc.modeFrontier=r.doc.highlightFrontier=r.doc.first,Ft(r,100),r.state.modeGen++,r.curOp&&Dt(r)}function al(r,o){return 0==o.from.ch&&0==o.to.ch&&""==me(o.text)&&(!r.cm||r.cm.options.wholeLineUpdateBefore)}function ti(r,o,e,t){function n(M){return e?e[M]:null}function i(M,A,E){(function Ol(r,o,e,t){r.text=o,r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null),null!=r.order&&(r.order=null),Dl(r),Aa(r,e);var n=t?t(r):1;n!=r.height&&Rt(r,n)})(M,A,E,t),Pt(M,"change",M,o)}function l(M,A){for(var E=[],W=M;W<A;++W)E.push(new Qr(u[W],n(W),t));return E}var a=o.from,s=o.to,u=o.text,f=ie(r,a.line),c=ie(r,s.line),h=me(u),d=n(u.length-1),g=s.line-a.line;if(o.full)r.insert(0,l(0,u.length)),r.remove(u.length,r.size-u.length);else if(al(r,o)){var m=l(0,u.length-1);i(c,c.text,d),g&&r.remove(a.line,g),m.length&&r.insert(a.line,m)}else if(f==c)if(1==u.length)i(f,f.text.slice(0,a.ch)+h+f.text.slice(s.ch),d);else{var w=l(1,u.length-1);w.push(new Qr(h+f.text.slice(s.ch),d,t)),i(f,f.text.slice(0,a.ch)+u[0],n(0)),r.insert(a.line+1,w)}else if(1==u.length)i(f,f.text.slice(0,a.ch)+u[0]+c.text.slice(s.ch),n(0)),r.remove(a.line+1,g);else{i(f,f.text.slice(0,a.ch)+u[0],n(0)),i(c,h+c.text.slice(s.ch),d);var k=l(1,u.length-1);g>1&&r.remove(a.line+1,g-1),r.insert(a.line+1,k)}Pt(r,"change",r,o)}function on(r,o,e){!function t(n,i,l){if(n.linked)for(var a=0;a<n.linked.length;++a){var s=n.linked[a];if(s.doc!=i){var u=l&&s.sharedHist;e&&!u||(o(s.doc,u),t(s.doc,n,u))}}}(r,null,!0)}function sl(r,o){if(o.cm)throw new Error("This document is already in use.");r.doc=o,o.cm=r,lo(r),ll(r),ln(r),r.options.direction=o.direction,r.options.lineWrapping||Hr(r),r.options.mode=o.modeOption,Dt(r)}function ln(r){("rtl"==r.doc.direction?te:Nt)(r.display.lineDiv,"CodeMirror-rtl")}function go(r){this.done=[],this.undone=[],this.undoDepth=r?r.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=r?r.maxGeneration:1}function Jl(r,o){var e={from:X(o.from),to:zt(o),text:$e(r,o.from,o.to)};return ns(r,e,o.from.line,o.to.line+1),on(r,function(t){return ns(t,e,o.from.line,o.to.line+1)},!0),e}function mo(r){for(;r.length&&me(r).ranges;)r.pop()}function Vl(r,o,e,t){var n=r.history;n.undone.length=0;var l,a,i=+new Date;if((n.lastOp==t||n.lastOrigin==o.origin&&o.origin&&("+"==o.origin.charAt(0)&&n.lastModTime>i-(r.cm?r.cm.options.historyEventDelay:500)||"*"==o.origin.charAt(0)))&&(l=function Ql(r,o){return o?(mo(r.done),me(r.done)):r.done.length&&!me(r.done).ranges?me(r.done):r.done.length>1&&!r.done[r.done.length-2].ranges?(r.done.pop(),me(r.done)):void 0}(n,n.lastOp==t)))a=me(l.changes),0==F(o.from,o.to)&&0==F(o.from,a.to)?a.to=zt(o):l.changes.push(Jl(r,o));else{var s=me(n.done);for((!s||!s.ranges)&&ul(r.sel,n.done),l={changes:[Jl(r,o)],generation:n.generation},n.done.push(l);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift()}n.done.push(e),n.generation=++n.maxGeneration,n.lastModTime=n.lastSelTime=i,n.lastOp=n.lastSelOp=t,n.lastOrigin=n.lastSelOrigin=o.origin,a||Ve(r,"historyAdded")}function rs(r,o,e,t){var n=r.history,i=t&&t.origin;e==n.lastSelOp||i&&n.lastSelOrigin==i&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==i||function js(r,o,e,t){var n=o.charAt(0);return"*"==n||"+"==n&&e.ranges.length==t.ranges.length&&e.somethingSelected()==t.somethingSelected()&&new Date-r.history.lastSelTime<=(r.cm?r.cm.options.historyEventDelay:500)}(r,i,me(n.done),o))?n.done[n.done.length-1]=o:ul(o,n.done),n.lastSelTime=+new Date,n.lastSelOrigin=i,n.lastSelOp=e,t&&!1!==t.clearRedo&&mo(n.undone)}function ul(r,o){var e=me(o);e&&e.ranges&&e.equals(r)||o.push(r)}function ns(r,o,e,t){var n=o["spans_"+r.id],i=0;r.iter(Math.max(r.first,e),Math.min(r.first+r.size,t),function(l){l.markedSpans&&((n||(n=o["spans_"+r.id]={}))[i]=l.markedSpans),++i})}function fl(r){if(!r)return null;for(var o,e=0;e<r.length;++e)r[e].marker.explicitlyCleared?o||(o=r.slice(0,e)):o&&o.push(r[e]);return o?o.length?o:null:r}function os(r,o){var e=function is(r,o){var e=o["spans_"+r.id];if(!e)return null;for(var t=[],n=0;n<o.text.length;++n)t.push(fl(e[n]));return t}(r,o),t=Ml(r,o);if(!e)return t;if(!t)return e;for(var n=0;n<e.length;++n){var i=e[n],l=t[n];if(i&&l)e:for(var a=0;a<l.length;++a){for(var s=l[a],u=0;u<i.length;++u)if(i[u].marker==s.marker)continue e;i.push(s)}else l&&(e[n]=l)}return e}function Ei(r,o,e){for(var t=[],n=0;n<r.length;++n){var i=r[n];if(i.ranges)t.push(e?pr.prototype.deepCopy.call(i):i);else{var l=i.changes,a=[];t.push({changes:a});for(var s=0;s<l.length;++s){var u=l[s],f=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),o)for(var c in u)(f=c.match(/^spans_(\d+)$/))&&D(o,Number(f[1]))>-1&&(me(a)[c]=u[c],delete u[c])}}}return t}function cl(r,o,e,t){if(t){var n=r.anchor;if(e){var i=F(o,n)<0;i!=F(e,n)<0?(n=o,o=e):i!=F(o,e)<0&&(o=e)}return new qe(n,o)}return new qe(e||o,o)}function an(r,o,e,t,n){null==n&&(n=r.cm&&(r.cm.display.shift||r.extend)),Yt(r,new pr([cl(r.sel.primary(),o,e,n)],0),t)}function hl(r,o,e){for(var t=[],n=r.cm&&(r.cm.display.shift||r.extend),i=0;i<r.sel.ranges.length;i++)t[i]=cl(r.sel.ranges[i],o[i],null,n);Yt(r,bt(r.cm,t,r.sel.primIndex),e)}function Fi(r,o,e,t){var n=r.sel.ranges.slice(0);n[o]=e,Yt(r,bt(r.cm,n,r.sel.primIndex),t)}function $l(r,o,e,t){Yt(r,Me(o,e),t)}function ta(r,o,e){var t=r.history.done,n=me(t);n&&n.ranges?(t[t.length-1]=o,yo(r,o,e)):Yt(r,o,e)}function Yt(r,o,e){yo(r,o,e),rs(r,r.sel,r.cm?r.cm.curOp.id:NaN,e)}function yo(r,o,e){(Be(r,"beforeSelectionChange")||r.cm&&Be(r.cm,"beforeSelectionChange"))&&(o=function ea(r,o,e){var t={ranges:o.ranges,update:function(n){this.ranges=[];for(var i=0;i<n.length;i++)this.ranges[i]=new qe(ve(r,n[i].anchor),ve(r,n[i].head))},origin:e&&e.origin};return Ve(r,"beforeSelectionChange",r,t),r.cm&&Ve(r.cm,"beforeSelectionChange",r.cm,t),t.ranges!=o.ranges?bt(r.cm,t.ranges,t.ranges.length-1):o}(r,o,e));var t=e&&e.bias||(F(o.primary().head,r.sel.primary().head)<0?-1:1);Ut(r,ra(r,o,t,!0)),(!e||!1!==e.scroll)&&r.cm&&"nocursor"!=r.cm.getOption("readOnly")&&Mn(r.cm)}function Ut(r,o){o.equals(r.sel)||(r.sel=o,r.cm&&(r.cm.curOp.updateInput=1,r.cm.curOp.selectionChanged=!0,mt(r.cm)),Pt(r,"cursorActivity",r))}function xo(r){Ut(r,ra(r,r.sel,null,!1))}function ra(r,o,e,t){for(var n,i=0;i<o.ranges.length;i++){var l=o.ranges[i],a=o.ranges.length==r.sel.ranges.length&&r.sel.ranges[i],s=bo(r,l.anchor,a&&a.anchor,e,t),u=l.head==l.anchor?s:bo(r,l.head,a&&a.head,e,t);(n||s!=l.anchor||u!=l.head)&&(n||(n=o.ranges.slice(0,i)),n[i]=new qe(s,u))}return n?bt(r.cm,n,o.primIndex):o}function ri(r,o,e,t,n){var i=ie(r,o.line);if(i.markedSpans)for(var l=0;l<i.markedSpans.length;++l){var a=i.markedSpans[l],s=a.marker,u="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,f="selectRight"in s?!s.selectRight:s.inclusiveRight;if((null==a.from||(u?a.from<=o.ch:a.from<o.ch))&&(null==a.to||(f?a.to>=o.ch:a.to>o.ch))){if(n&&(Ve(s,"beforeCursorEnter"),s.explicitlyCleared)){if(i.markedSpans){--l;continue}break}if(!s.atomic)continue;if(e){var c=s.find(t<0?1:-1),h=void 0;if((t<0?f:u)&&(c=ni(r,c,-t,c&&c.line==o.line?i:null)),c&&c.line==o.line&&(h=F(c,e))&&(t<0?h<0:h>0))return ri(r,c,o,t,n)}var d=s.find(t<0?-1:1);return(t<0?u:f)&&(d=ni(r,d,t,d.line==o.line?i:null)),d?ri(r,d,o,t,n):null}}return o}function bo(r,o,e,t,n){var i=t||1;return ri(r,o,e,i,n)||!n&&ri(r,o,e,i,!0)||ri(r,o,e,-i,n)||!n&&ri(r,o,e,-i,!0)||(r.cantEdit=!0,C(r.first,0))}function ni(r,o,e,t){return e<0&&0==o.ch?o.line>r.first?ve(r,C(o.line-1)):null:e>0&&o.ch==(t||ie(r,o.line)).text.length?o.line<r.first+r.size-1?C(o.line+1,0):null:new C(o.line,o.ch+e)}function wo(r){r.setSelection(C(r.firstLine(),0),C(r.lastLine()),ae)}function na(r,o,e){var t={canceled:!1,from:o.from,to:o.to,text:o.text,origin:o.origin,cancel:function(){return t.canceled=!0}};return e&&(t.update=function(n,i,l,a){n&&(t.from=ve(r,n)),i&&(t.to=ve(r,i)),l&&(t.text=l),void 0!==a&&(t.origin=a)}),Ve(r,"beforeChange",r,t),r.cm&&Ve(r.cm,"beforeChange",r.cm,t),t.canceled?(r.cm&&(r.cm.curOp.updateInput=2),null):{from:t.from,to:t.to,text:t.text,origin:t.origin}}function ii(r,o,e){if(r.cm){if(!r.cm.curOp)return Bt(r.cm,ii)(r,o,e);if(r.cm.state.suppressEdits)return}if(!(Be(r,"beforeChange")||r.cm&&Be(r.cm,"beforeChange"))||(o=na(r,o,!0))){var t=La&&!e&&function Al(r,o,e){var t=null;if(r.iter(o.line,e.line+1,function(d){if(d.markedSpans)for(var g=0;g<d.markedSpans.length;++g){var m=d.markedSpans[g].marker;m.readOnly&&(!t||-1==D(t,m))&&(t||(t=[])).push(m)}}),!t)return null;for(var n=[{from:o,to:e}],i=0;i<t.length;++i)for(var l=t[i],a=l.find(0),s=0;s<n.length;++s){var u=n[s];if(!(F(u.to,a.from)<0||F(u.from,a.to)>0)){var f=[s,1],c=F(u.from,a.from),h=F(u.to,a.to);(c<0||!l.inclusiveLeft&&!c)&&f.push({from:u.from,to:a.from}),(h>0||!l.inclusiveRight&&!h)&&f.push({from:a.to,to:u.to}),n.splice.apply(n,f),s+=f.length-3}}return n}(r,o.from,o.to);if(t)for(var n=t.length-1;n>=0;--n)ia(r,{from:t[n].from,to:t[n].to,text:n?[""]:o.text,origin:o.origin});else ia(r,o)}}function ia(r,o){if(1!=o.text.length||""!=o.text[0]||0!=F(o.from,o.to)){var e=Zr(r,o);Vl(r,o,e,r.cm?r.cm.curOp.id:NaN),Fn(r,o,e,Ml(r,o));var t=[];on(r,function(n,i){!i&&-1==D(t,n.history)&&(la(n.history,o),t.push(n.history)),Fn(n,o,null,Ml(n,o))})}}function sn(r,o,e){var t=r.cm&&r.cm.state.suppressEdits;if(!t||e){for(var i,n=r.history,l=r.sel,a="undo"==o?n.done:n.undone,s="undo"==o?n.undone:n.done,u=0;u<a.length&&(i=a[u],!(e?i.ranges&&!i.equals(r.sel):!i.ranges));u++);if(u!=a.length){for(n.lastOrigin=n.lastSelOrigin=null;;){if(!(i=a.pop()).ranges){if(t)return void a.push(i);break}if(ul(i,s),e&&!i.equals(r.sel))return void Yt(r,i,{clearRedo:!1});l=i}var f=[];ul(l,s),s.push({changes:f,generation:n.generation}),n.generation=i.generation||++n.maxGeneration;for(var c=Be(r,"beforeChange")||r.cm&&Be(r.cm,"beforeChange"),h=function(m){var w=i.changes[m];if(w.origin=o,c&&!na(r,w,!1))return a.length=0,{};f.push(Jl(r,w));var k=m?Zr(r,w):me(a);Fn(r,w,k,os(r,w)),!m&&r.cm&&r.cm.scrollIntoView({from:w.from,to:zt(w)});var M=[];on(r,function(A,E){!E&&-1==D(M,A.history)&&(la(A.history,w),M.push(A.history)),Fn(A,w,null,os(A,w))})},d=i.changes.length-1;d>=0;--d){var g=h(d);if(g)return g.v}}}}function oa(r,o){if(0!=o&&(r.first+=o,r.sel=new pr(tr(r.sel.ranges,function(n){return new qe(C(n.anchor.line+o,n.anchor.ch),C(n.head.line+o,n.head.ch))}),r.sel.primIndex),r.cm)){Dt(r.cm,r.first,r.first-o,o);for(var e=r.cm.display,t=e.viewFrom;t<e.viewTo;t++)sr(r.cm,t,"gutter")}}function Fn(r,o,e,t){if(r.cm&&!r.cm.curOp)return Bt(r.cm,Fn)(r,o,e,t);if(o.to.line<r.first)oa(r,o.text.length-1-(o.to.line-o.from.line));else if(!(o.from.line>r.lastLine())){if(o.from.line<r.first){var n=o.text.length-1-(r.first-o.from.line);oa(r,n),o={from:C(r.first,0),to:C(o.to.line+n,o.to.ch),text:[me(o.text)],origin:o.origin}}var i=r.lastLine();o.to.line>i&&(o={from:o.from,to:C(i,ie(r,i).text.length),text:[o.text[0]],origin:o.origin}),o.removed=$e(r,o.from,o.to),e||(e=Zr(r,o)),r.cm?function ls(r,o,e){var t=r.doc,n=r.display,i=o.from,l=o.to,a=!1,s=i.line;r.options.lineWrapping||(s=_e(Wr(ie(t,i.line))),t.iter(s,l.line+1,function(d){if(d==n.maxLine)return a=!0,!0})),t.sel.contains(o.from,o.to)>-1&&mt(r),ti(t,o,e,$o(r)),r.options.lineWrapping||(t.iter(s,i.line+o.text.length,function(d){var g=xi(d);g>n.maxLineLength&&(n.maxLine=d,n.maxLineLength=g,n.maxLineChanged=!0,a=!1)}),a&&(r.curOp.updateMaxLine=!0)),function ka(r,o){if(r.modeFrontier=Math.min(r.modeFrontier,o),!(r.highlightFrontier<o-10)){for(var e=r.first,t=o-1;t>e;t--){var n=ie(r,t).stateAfter;if(n&&(!(n instanceof Io)||t+n.lookAhead<o)){e=t+1;break}}r.highlightFrontier=Math.min(r.highlightFrontier,e)}}(t,i.line),Ft(r,400);var u=o.text.length-(l.line-i.line)-1;o.full?Dt(r):i.line!=l.line||1!=o.text.length||al(r.doc,o)?Dt(r,i.line,l.line+1,u):sr(r,i.line,"text");var f=Be(r,"changes"),c=Be(r,"change");if(c||f){var h={from:i,to:l,text:o.text,removed:o.removed,origin:o.origin};c&&Pt(r,"change",r,h),f&&(r.curOp.changeObjs||(r.curOp.changeObjs=[])).push(h)}r.display.selForContextMenu=null}(r.cm,o,t):ti(r,o,t),yo(r,e,ae),r.cantEdit&&bo(r,C(r.firstLine(),0))&&(r.cantEdit=!1)}}function Kr(r,o,e,t,n){var i;t||(t=e),F(t,e)<0&&(e=(i=[t,e])[0],t=i[1]),"string"==typeof o&&(o=r.splitLines(o)),ii(r,{from:e,to:t,text:o,origin:n})}function as(r,o,e,t){e<r.line?r.line+=t:o<r.line&&(r.line=o,r.ch=0)}function oi(r,o,e,t){for(var n=0;n<r.length;++n){var i=r[n],l=!0;if(i.ranges){i.copied||((i=r[n]=i.deepCopy()).copied=!0);for(var a=0;a<i.ranges.length;a++)as(i.ranges[a].anchor,o,e,t),as(i.ranges[a].head,o,e,t)}else{for(var s=0;s<i.changes.length;++s){var u=i.changes[s];if(e<u.from.line)u.from=C(u.from.line+t,u.from.ch),u.to=C(u.to.line+t,u.to.ch);else if(o<=u.to.line){l=!1;break}}l||(r.splice(0,n+1),n=0)}}}function la(r,o){var e=o.from.line,t=o.to.line,n=o.text.length-(t-e)-1;oi(r.done,e,t,n),oi(r.undone,e,t,n)}function Wi(r,o,e,t){var n=o,i=o;return"number"==typeof o?i=ie(r,Vt(r,o)):n=_e(o),null==n?null:(t(i,n)&&r.cm&&sr(r.cm,n,e),i)}function Hi(r){this.lines=r,this.parent=null;for(var o=0,e=0;e<r.length;++e)r[e].parent=this,o+=r[e].height;this.height=o}function un(r){this.children=r;for(var o=0,e=0,t=0;t<r.length;++t){var n=r[t];o+=n.chunkSize(),e+=n.height,n.parent=this}this.size=o,this.height=e,this.parent=null}qe.prototype.from=function(){return Ct(this.anchor,this.head)},qe.prototype.to=function(){return We(this.anchor,this.head)},qe.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Hi.prototype={chunkSize:function(){return this.lines.length},removeInner:function(r,o){for(var e=r,t=r+o;e<t;++e){var n=this.lines[e];this.height-=n.height,bi(n),Pt(n,"delete")}this.lines.splice(r,o)},collapse:function(r){r.push.apply(r,this.lines)},insertInner:function(r,o,e){this.height+=e,this.lines=this.lines.slice(0,r).concat(o).concat(this.lines.slice(r));for(var t=0;t<o.length;++t)o[t].parent=this},iterN:function(r,o,e){for(var t=r+o;r<t;++r)if(e(this.lines[r]))return!0}},un.prototype={chunkSize:function(){return this.size},removeInner:function(r,o){this.size-=o;for(var e=0;e<this.children.length;++e){var t=this.children[e],n=t.chunkSize();if(r<n){var i=Math.min(o,n-r),l=t.height;if(t.removeInner(r,i),this.height-=l-t.height,n==i&&(this.children.splice(e--,1),t.parent=null),0==(o-=i))break;r=0}else r-=n}if(this.size-o<25&&(this.children.length>1||!(this.children[0]instanceof Hi))){var a=[];this.collapse(a),this.children=[new Hi(a)],this.children[0].parent=this}},collapse:function(r){for(var o=0;o<this.children.length;++o)this.children[o].collapse(r)},insertInner:function(r,o,e){this.size+=o.length,this.height+=e;for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<=i){if(n.insertInner(r,o,e),n.lines&&n.lines.length>50){for(var l=n.lines.length%25+25,a=l;a<n.lines.length;){var s=new Hi(n.lines.slice(a,a+=25));n.height-=s.height,this.children.splice(++t,0,s),s.parent=this}n.lines=n.lines.slice(0,l),this.maybeSpill()}break}r-=i}},maybeSpill:function(){if(!(this.children.length<=10)){var r=this;do{var e=new un(r.children.splice(r.children.length-5,5));if(r.parent){r.size-=e.size,r.height-=e.height;var n=D(r.parent.children,r);r.parent.children.splice(n+1,0,e)}else{var t=new un(r.children);t.parent=r,r.children=[t,e],r=t}e.parent=r.parent}while(r.children.length>10);r.parent.maybeSpill()}},iterN:function(r,o,e){for(var t=0;t<this.children.length;++t){var n=this.children[t],i=n.chunkSize();if(r<i){var l=Math.min(o,i-r);if(n.iterN(r,l,e))return!0;if(0==(o-=l))break;r=0}else r-=i}}};var fn=function(r,o,e){if(e)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.doc=r,this.node=o};function Ii(r,o,e){$t(o)<(r.curOp&&r.curOp.scrollTop||r.doc.scrollTop)&&zl(r,e)}fn.prototype.clear=function(){var r=this.doc.cm,o=this.line.widgets,e=this.line,t=_e(e);if(null!=t&&o){for(var n=0;n<o.length;++n)o[n]==this&&o.splice(n--,1);o.length||(e.widgets=null);var i=Si(this);Rt(e,Math.max(0,e.height-i)),r&&(ur(r,function(){Ii(r,e,-i),sr(r,t,"widget")}),Pt(r,"lineWidgetCleared",r,this,t))}},fn.prototype.changed=function(){var r=this,o=this.height,e=this.doc.cm,t=this.line;this.height=null;var n=Si(this)-o;n&&(qr(this.doc,t)||Rt(t,t.height+n),e&&ur(e,function(){e.curOp.forceUpdate=!0,Ii(e,t,n),Pt(e,"lineWidgetChanged",e,r,_e(t))}))},Zt(fn);var aa=0,Wn=function(r,o){this.lines=[],this.type=o,this.doc=r,this.id=++aa};function li(r,o,e,t,n){if(t&&t.shared)return function Pi(r,o,e,t,n){(t=U(t)).shared=!1;var i=[li(r,o,e,t,n)],l=i[0],a=t.widgetNode;return on(r,function(s){a&&(t.widgetNode=a.cloneNode(!0)),i.push(li(s,ve(s,o),ve(s,e),t,n));for(var u=0;u<s.linked.length;++u)if(s.linked[u].isParent)return;l=me(i)}),new Lr(i,l)}(r,o,e,t,n);if(r.cm&&!r.cm.curOp)return Bt(r.cm,li)(r,o,e,t,n);var i=new Wn(r,n),l=F(o,e);if(t&&U(t,i,!1),l>0||0==l&&!1!==i.clearWhenEmpty)return i;if(i.replacedWith&&(i.collapsed=!0,i.widgetNode=ee("span",[i.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||i.widgetNode.setAttribute("cm-ignore-events","true"),t.insertLeft&&(i.widgetNode.insertLeft=!0)),i.collapsed){if($i(r,o.line,o,e,i)||o.line!=e.line&&$i(r,e.line,o,e,i))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Jr(){jr=!0}()}i.addToHistory&&Vl(r,{from:o,to:e,origin:"markText"},r.sel,NaN);var u,a=o.line,s=r.cm;if(r.iter(a,e.line+1,function(c){s&&i.collapsed&&!s.options.lineWrapping&&Wr(c)==s.display.maxLine&&(u=!0),i.collapsed&&a!=o.line&&Rt(c,0),function Xi(r,o,e){var t=e&&window.WeakSet&&(e.markedSpans||(e.markedSpans=new WeakSet));t&&r.markedSpans&&t.has(r.markedSpans)?r.markedSpans.push(o):(r.markedSpans=r.markedSpans?r.markedSpans.concat([o]):[o],t&&t.add(r.markedSpans)),o.marker.attachLine(r)}(c,new _o(i,a==o.line?o.ch:null,a==e.line?e.ch:null),r.cm&&r.cm.curOp),++a}),i.collapsed&&r.iter(o.line,e.line+1,function(c){qr(r,c)&&Rt(c,0)}),i.clearOnEnter&&Z(i,"beforeCursorEnter",function(){return i.clear()}),i.readOnly&&(function Ta(){La=!0}(),(r.history.done.length||r.history.undone.length)&&r.clearHistory()),i.collapsed&&(i.id=++aa,i.atomic=!0),s){if(u&&(s.curOp.updateMaxLine=!0),i.collapsed)Dt(s,o.line,e.line+1);else if(i.className||i.startStyle||i.endStyle||i.css||i.attributes||i.title)for(var f=o.line;f<=e.line;f++)sr(s,f,"text");i.atomic&&xo(s.doc),Pt(s,"markerAdded",s,i)}return i}Wn.prototype.clear=function(){if(!this.explicitlyCleared){var r=this.doc.cm,o=r&&!r.curOp;if(o&&Nn(r),Be(this,"clear")){var e=this.find();e&&Pt(this,"clear",e.from,e.to)}for(var t=null,n=null,i=0;i<this.lines.length;++i){var l=this.lines[i],a=Yi(l.markedSpans,this);r&&!this.collapsed?sr(r,_e(l),"text"):r&&(null!=a.to&&(n=_e(l)),null!=a.from&&(t=_e(l))),l.markedSpans=Ro(l.markedSpans,a),null==a.from&&this.collapsed&&!qr(this.doc,l)&&r&&Rt(l,Ti(r.display))}if(r&&this.collapsed&&!r.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=Wr(this.lines[s]),f=xi(u);f>r.display.maxLineLength&&(r.display.maxLine=u,r.display.maxLineLength=f,r.display.maxLineChanged=!0)}null!=t&&r&&this.collapsed&&Dt(r,t,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,r&&xo(r.doc)),r&&Pt(r,"markerCleared",r,this,t,n),o&&Qn(r),this.parent&&this.parent.clear()}},Wn.prototype.find=function(r,o){null==r&&"bookmark"==this.type&&(r=1);for(var e,t,n=0;n<this.lines.length;++n){var i=this.lines[n],l=Yi(i.markedSpans,this);if(null!=l.from&&(e=C(o?i:_e(i),l.from),-1==r))return e;if(null!=l.to&&(t=C(o?i:_e(i),l.to),1==r))return t}return e&&{from:e,to:t}},Wn.prototype.changed=function(){var r=this,o=this.find(-1,!0),e=this,t=this.doc.cm;!o||!t||ur(t,function(){var n=o.line,i=_e(o.line),l=Hl(t,i);if(l&&(Za(l),t.curOp.selectionChanged=t.curOp.forceUpdate=!0),t.curOp.updateMaxLine=!0,!qr(e.doc,n)&&null!=e.height){var a=e.height;e.height=null;var s=Si(e)-a;s&&Rt(n,n.height+s)}Pt(t,"markerChanged",t,r)})},Wn.prototype.attachLine=function(r){if(!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(!o.maybeHiddenMarkers||-1==D(o.maybeHiddenMarkers,this))&&(o.maybeUnhiddenMarkers||(o.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(r)},Wn.prototype.detachLine=function(r){if(this.lines.splice(D(this.lines,r),1),!this.lines.length&&this.doc.cm){var o=this.doc.cm.curOp;(o.maybeHiddenMarkers||(o.maybeHiddenMarkers=[])).push(this)}},Zt(Wn);var Lr=function(r,o){this.markers=r,this.primary=o;for(var e=0;e<r.length;++e)r[e].parent=this};function Bi(r){return r.findMarks(C(r.first,0),r.clipPos(C(r.lastLine())),function(o){return o.parent})}function ss(r){for(var o=function(t){var n=r[t],i=[n.primary.doc];on(n.primary.doc,function(s){return i.push(s)});for(var l=0;l<n.markers.length;l++){var a=n.markers[l];-1==D(i,a.doc)&&(a.parent=null,n.markers.splice(l--,1))}},e=0;e<r.length;e++)o(e)}Lr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var r=0;r<this.markers.length;++r)this.markers[r].clear();Pt(this,"clear")}},Lr.prototype.find=function(r,o){return this.primary.find(r,o)},Zt(Lr);var Qs=0,rr=function(r,o,e,t,n){if(!(this instanceof rr))return new rr(r,o,e,t,n);null==e&&(e=0),un.call(this,[new Hi([new Qr("",null)])]),this.first=e,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=e;var i=C(e,0);this.sel=Me(i),this.history=new go(null),this.id=++Qs,this.modeOption=o,this.lineSep=t,this.direction="rtl"==n?"rtl":"ltr",this.extend=!1,"string"==typeof r&&(r=this.splitLines(r)),ti(this,{from:i,to:i,text:r}),Yt(this,Me(i),ae)};rr.prototype=L(un.prototype,{constructor:rr,iter:function(r,o,e){e?this.iterN(r-this.first,o-r,e):this.iterN(this.first,this.first+this.size,r)},insert:function(r,o){for(var e=0,t=0;t<o.length;++t)e+=o[t].height;this.insertInner(r-this.first,o,e)},remove:function(r,o){this.removeInner(r-this.first,o)},getValue:function(r){var o=oe(this,this.first,this.first+this.size);return!1===r?o:o.join(r||this.lineSeparator())},setValue:Oe(function(r){var o=C(this.first,0),e=this.first+this.size-1;ii(this,{from:o,to:C(e,ie(this,e).text.length),text:this.splitLines(r),origin:"setValue",full:!0},!0),this.cm&&jn(this.cm,0,0),Yt(this,Me(o),ae)}),replaceRange:function(r,o,e,t){Kr(this,r,o=ve(this,o),e=e?ve(this,e):o,t)},getRange:function(r,o,e){var t=$e(this,ve(this,r),ve(this,o));return!1===e?t:t.join(""===e?"":e||this.lineSeparator())},getLine:function(r){var o=this.getLineHandle(r);return o&&o.text},getLineHandle:function(r){if(p(this,r))return ie(this,r)},getLineNumber:function(r){return _e(r)},getLineHandleVisualStart:function(r){return"number"==typeof r&&(r=ie(this,r)),Wr(r)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(r){return ve(this,r)},getCursor:function(r){var o=this.sel.primary();return null==r||"head"==r?o.head:"anchor"==r?o.anchor:"end"==r||"to"==r||!1===r?o.to():o.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Oe(function(r,o,e){$l(this,ve(this,"number"==typeof r?C(r,o||0):r),null,e)}),setSelection:Oe(function(r,o,e){$l(this,ve(this,r),ve(this,o||r),e)}),extendSelection:Oe(function(r,o,e){an(this,ve(this,r),o&&ve(this,o),e)}),extendSelections:Oe(function(r,o){hl(this,ye(this,r),o)}),extendSelectionsBy:Oe(function(r,o){hl(this,ye(this,tr(this.sel.ranges,r)),o)}),setSelections:Oe(function(r,o,e){if(r.length){for(var t=[],n=0;n<r.length;n++)t[n]=new qe(ve(this,r[n].anchor),ve(this,r[n].head||r[n].anchor));null==o&&(o=Math.min(r.length-1,this.sel.primIndex)),Yt(this,bt(this.cm,t,o),e)}}),addSelection:Oe(function(r,o,e){var t=this.sel.ranges.slice(0);t.push(new qe(ve(this,r),ve(this,o||r))),Yt(this,bt(this.cm,t,t.length-1),e)}),getSelection:function(r){for(var e,o=this.sel.ranges,t=0;t<o.length;t++){var n=$e(this,o[t].from(),o[t].to());e=e?e.concat(n):n}return!1===r?e:e.join(r||this.lineSeparator())},getSelections:function(r){for(var o=[],e=this.sel.ranges,t=0;t<e.length;t++){var n=$e(this,e[t].from(),e[t].to());!1!==r&&(n=n.join(r||this.lineSeparator())),o[t]=n}return o},replaceSelection:function(r,o,e){for(var t=[],n=0;n<this.sel.ranges.length;n++)t[n]=r;this.replaceSelections(t,o,e||"+input")},replaceSelections:Oe(function(r,o,e){for(var t=[],n=this.sel,i=0;i<n.ranges.length;i++){var l=n.ranges[i];t[i]={from:l.from(),to:l.to(),text:this.splitLines(r[i]),origin:e}}for(var a=o&&"end"!=o&&function jl(r,o,e){for(var t=[],n=C(r.first,0),i=n,l=0;l<o.length;l++){var a=o[l],s=Xl(a.from,n,i),u=Xl(zt(a),n,i);if(n=a.to,i=u,"around"==e){var f=r.sel.ranges[l],c=F(f.head,f.anchor)<0;t[l]=new qe(c?u:s,c?s:u)}else t[l]=new qe(s,s)}return new pr(t,r.sel.primIndex)}(this,t,o),s=t.length-1;s>=0;s--)ii(this,t[s]);a?ta(this,a):this.cm&&Mn(this.cm)}),undo:Oe(function(){sn(this,"undo")}),redo:Oe(function(){sn(this,"redo")}),undoSelection:Oe(function(){sn(this,"undo",!0)}),redoSelection:Oe(function(){sn(this,"redo",!0)}),setExtending:function(r){this.extend=r},getExtending:function(){return this.extend},historySize:function(){for(var r=this.history,o=0,e=0,t=0;t<r.done.length;t++)r.done[t].ranges||++o;for(var n=0;n<r.undone.length;n++)r.undone[n].ranges||++e;return{undo:o,redo:e}},clearHistory:function(){var r=this;this.history=new go(this.history),on(this,function(o){return o.history=r.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(r){return r&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(r){return this.history.generation==(r||this.cleanGeneration)},getHistory:function(){return{done:Ei(this.history.done),undone:Ei(this.history.undone)}},setHistory:function(r){var o=this.history=new go(this.history);o.done=Ei(r.done.slice(0),null,!0),o.undone=Ei(r.undone.slice(0),null,!0)},setGutterMarker:Oe(function(r,o,e){return Wi(this,r,"gutter",function(t){var n=t.gutterMarkers||(t.gutterMarkers={});return n[o]=e,!e&&Ge(n)&&(t.gutterMarkers=null),!0})}),clearGutter:Oe(function(r){var o=this;this.iter(function(e){e.gutterMarkers&&e.gutterMarkers[r]&&Wi(o,e,"gutter",function(){return e.gutterMarkers[r]=null,Ge(e.gutterMarkers)&&(e.gutterMarkers=null),!0})})}),lineInfo:function(r){var o;if("number"==typeof r){if(!(p(this,r)&&(o=r,r=ie(this,r))))return null}else if(null==(o=_e(r)))return null;return{line:o,handle:r,text:r.text,gutterMarkers:r.gutterMarkers,textClass:r.textClass,bgClass:r.bgClass,wrapClass:r.wrapClass,widgets:r.widgets}},addLineClass:Oe(function(r,o,e){return Wi(this,r,"gutter"==o?"gutter":"class",function(t){var n="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass";if(t[n]){if(Pe(e).test(t[n]))return!1;t[n]+=" "+e}else t[n]=e;return!0})}),removeLineClass:Oe(function(r,o,e){return Wi(this,r,"gutter"==o?"gutter":"class",function(t){var n="text"==o?"textClass":"background"==o?"bgClass":"gutter"==o?"gutterClass":"wrapClass",i=t[n];if(!i)return!1;if(null==e)t[n]=null;else{var l=i.match(Pe(e));if(!l)return!1;var a=l.index+l[0].length;t[n]=i.slice(0,l.index)+(l.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0})}),addLineWidget:Oe(function(r,o,e){return function Co(r,o,e,t){var n=new fn(r,e,t),i=r.cm;return i&&n.noHScroll&&(i.display.alignWidgets=!0),Wi(r,o,"widget",function(l){var a=l.widgets||(l.widgets=[]);if(null==n.insertAt?a.push(n):a.splice(Math.min(a.length,Math.max(0,n.insertAt)),0,n),n.line=l,i&&!qr(r,l)){var s=$t(l)<r.scrollTop;Rt(l,l.height+Si(n)),s&&zl(i,n.height),i.curOp.forceUpdate=!0}return!0}),i&&Pt(i,"lineWidgetAdded",i,n,"number"==typeof o?o:_e(o)),n}(this,r,o,e)}),removeLineWidget:function(r){r.clear()},markText:function(r,o,e){return li(this,ve(this,r),ve(this,o),e,e&&e.type||"range")},setBookmark:function(r,o){var e={replacedWith:o&&(null==o.nodeType?o.widget:o),insertLeft:o&&o.insertLeft,clearWhenEmpty:!1,shared:o&&o.shared,handleMouseEvents:o&&o.handleMouseEvents};return li(this,r=ve(this,r),r,e,"bookmark")},findMarksAt:function(r){var o=[],e=ie(this,(r=ve(this,r)).line).markedSpans;if(e)for(var t=0;t<e.length;++t){var n=e[t];(null==n.from||n.from<=r.ch)&&(null==n.to||n.to>=r.ch)&&o.push(n.marker.parent||n.marker)}return o},findMarks:function(r,o,e){r=ve(this,r),o=ve(this,o);var t=[],n=r.line;return this.iter(r.line,o.line+1,function(i){var l=i.markedSpans;if(l)for(var a=0;a<l.length;a++){var s=l[a];!(null!=s.to&&n==r.line&&r.ch>=s.to||null==s.from&&n!=r.line||null!=s.from&&n==o.line&&s.from>=o.ch)&&(!e||e(s.marker))&&t.push(s.marker.parent||s.marker)}++n}),t},getAllMarks:function(){var r=[];return this.iter(function(o){var e=o.markedSpans;if(e)for(var t=0;t<e.length;++t)null!=e[t].from&&r.push(e[t].marker)}),r},posFromIndex:function(r){var o,e=this.first,t=this.lineSeparator().length;return this.iter(function(n){var i=n.text.length+t;if(i>r)return o=r,!0;r-=i,++e}),ve(this,C(e,o))},indexFromPos:function(r){var o=(r=ve(this,r)).ch;if(r.line<this.first||r.ch<0)return 0;var e=this.lineSeparator().length;return this.iter(this.first,r.line,function(t){o+=t.text.length+e}),o},copy:function(r){var o=new rr(oe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return o.scrollTop=this.scrollTop,o.scrollLeft=this.scrollLeft,o.sel=this.sel,o.extend=!1,r&&(o.history.undoDepth=this.history.undoDepth,o.setHistory(this.getHistory())),o},linkedDoc:function(r){r||(r={});var o=this.first,e=this.first+this.size;null!=r.from&&r.from>o&&(o=r.from),null!=r.to&&r.to<e&&(e=r.to);var t=new rr(oe(this,o,e),r.mode||this.modeOption,o,this.lineSep,this.direction);return r.sharedHist&&(t.history=this.history),(this.linked||(this.linked=[])).push({doc:t,sharedHist:r.sharedHist}),t.linked=[{doc:this,isParent:!0,sharedHist:r.sharedHist}],function Js(r,o){for(var e=0;e<o.length;e++){var t=o[e],n=t.find(),i=r.clipPos(n.from),l=r.clipPos(n.to);if(F(i,l)){var a=li(r,i,l,t.primary,t.primary.type);t.markers.push(a),a.parent=t}}}(t,Bi(this)),t},unlinkDoc:function(r){if(r instanceof ht&&(r=r.doc),this.linked)for(var o=0;o<this.linked.length;++o)if(this.linked[o].doc==r){this.linked.splice(o,1),r.unlinkDoc(this),ss(Bi(this));break}if(r.history==this.history){var t=[r.id];on(r,function(n){return t.push(n.id)},!0),r.history=new go(null),r.history.done=Ei(this.history.done,t),r.history.undone=Ei(this.history.undone,t)}},iterLinkedDocs:function(r){on(this,r)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(r){return this.lineSep?r.split(this.lineSep):_n(r)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Oe(function(r){"rtl"!=r&&(r="ltr"),r!=this.direction&&(this.direction=r,this.iter(function(o){return o.order=null}),this.cm&&function ts(r){ur(r,function(){ln(r),Dt(r)})}(this.cm))})}),rr.prototype.eachLine=rr.prototype.iter;var us=0;function nr(r){var o=this;if(cs(o),!Fe(o,r)&&!Vr(o.display,r)){ot(r),$&&(us=+new Date);var e=kn(o,r,!0),t=r.dataTransfer.files;if(e&&!o.isReadOnly())if(t&&t.length&&window.FileReader&&window.File)for(var n=t.length,i=Array(n),l=0,a=function(){++l==n&&Bt(o,function(){var d={from:e=ve(o.doc,e),to:e,text:o.doc.splitLines(i.filter(function(g){return null!=g}).join(o.doc.lineSeparator())),origin:"paste"};ii(o.doc,d),ta(o.doc,Me(ve(o.doc,e),ve(o.doc,zt(d))))})()},s=function(d,g){if(o.options.allowDropFileTypes&&-1==D(o.options.allowDropFileTypes,d.type))a();else{var m=new FileReader;m.onerror=function(){return a()},m.onload=function(){var w=m.result;/[\x00-\x08\x0e-\x1f]{2}/.test(w)||(i[g]=w),a()},m.readAsText(d)}},u=0;u<t.length;u++)s(t[u],u);else{if(o.state.draggingText&&o.doc.sel.contains(e)>-1)return o.state.draggingText(r),void setTimeout(function(){return o.display.input.focus()},20);try{var f=r.dataTransfer.getData("Text");if(f){var c;if(o.state.draggingText&&!o.state.draggingText.copy&&(c=o.listSelections()),yo(o.doc,Me(e,e)),c)for(var h=0;h<c.length;++h)Kr(o.doc,"",c[h].anchor,c[h].head,"drag");o.replaceSelection(f,"around","paste"),o.display.input.focus()}}catch{}}}}function cs(r){r.display.dragCursor&&(r.display.lineSpace.removeChild(r.display.dragCursor),r.display.dragCursor=null)}function hs(r){if(document.getElementsByClassName){for(var o=document.getElementsByClassName("CodeMirror"),e=[],t=0;t<o.length;t++){var n=o[t].CodeMirror;n&&e.push(n)}e.length&&e[0].operation(function(){for(var i=0;i<e.length;i++)r(e[i])})}}var sa=!1;function ds(){sa||(function ps(){var r;Z(window,"resize",function(){null==r&&(r=setTimeout(function(){r=null,hs($s)},100))}),Z(window,"blur",function(){return hs(Tn)})}(),sa=!0)}function $s(r){var o=r.display;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.scrollbarsClipped=!1,r.setSize()}for(var Hn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},So=0;So<10;So++)Hn[So+48]=Hn[So+96]=String(So);for(var Rr=65;Rr<=90;Rr++)Hn[Rr]=String.fromCharCode(Rr);for(var cn=1;cn<=12;cn++)Hn[cn+111]=Hn[cn+63235]="F"+cn;var Tr={};function ko(r){var o=r.split(/-(?!$)/);r=o[o.length-1];for(var e,t,n,i,l=0;l<o.length-1;l++){var a=o[l];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))e=!0;else if(/^(c|ctrl|control)$/i.test(a))t=!0;else{if(!/^s(hift)?$/i.test(a))throw new Error("Unrecognized modifier name: "+a);n=!0}}return e&&(r="Alt-"+r),t&&(r="Ctrl-"+r),i&&(r="Cmd-"+r),n&&(r="Shift-"+r),r}function hn(r){var o={};for(var e in r)if(r.hasOwnProperty(e)){var t=r[e];if(/^(name|fallthrough|(de|at)tach)$/.test(e))continue;if("..."==t){delete r[e];continue}for(var n=tr(e.split(" "),ko),i=0;i<n.length;i++){var l=void 0,a=void 0;i==n.length-1?(a=n.join(" "),l=t):(a=n.slice(0,i+1).join(" "),l="...");var s=o[a];if(s){if(s!=l)throw new Error("Inconsistent bindings for "+a)}else o[a]=l}delete r[e]}for(var u in o)r[u]=o[u];return r}function _i(r,o,e,t){var n=(o=Lo(o)).call?o.call(r,t):o[r];if(!1===n)return"nothing";if("..."===n)return"multi";if(null!=n&&e(n))return"handled";if(o.fallthrough){if("[object Array]"!=Object.prototype.toString.call(o.fallthrough))return _i(r,o.fallthrough,e,t);for(var i=0;i<o.fallthrough.length;i++){var l=_i(r,o.fallthrough[i],e,t);if(l)return l}}}function vs(r){var o="string"==typeof r?r:Hn[r.keyCode];return"Ctrl"==o||"Alt"==o||"Shift"==o||"Mod"==o}function ai(r,o,e){var t=r;return o.altKey&&"Alt"!=t&&(r="Alt-"+r),(y?o.metaKey:o.ctrlKey)&&"Ctrl"!=t&&(r="Ctrl-"+r),(y?o.ctrlKey:o.metaKey)&&"Mod"!=t&&(r="Cmd-"+r),!e&&o.shiftKey&&"Shift"!=t&&(r="Shift-"+r),r}function ua(r,o){if(we&&34==r.keyCode&&r.char)return!1;var e=Hn[r.keyCode];return null!=e&&!r.altGraphKey&&(3==r.keyCode&&r.code&&(e=r.code),ai(e,r,o))}function Lo(r){return"string"==typeof r?Tr[r]:r}function si(r,o){for(var e=r.doc.sel.ranges,t=[],n=0;n<e.length;n++){for(var i=o(e[n]);t.length&&F(i.from,me(t).to)<=0;){var l=t.pop();if(F(l.from,i.from)<0){i.from=l.from;break}}t.push(i)}ur(r,function(){for(var a=t.length-1;a>=0;a--)Kr(r.doc,"",t[a].from,t[a].to,"+delete");Mn(r)})}function Ri(r,o,e){var t=Ot(r.text,o+e,e);return t<0||t>r.text.length?null:t}function In(r,o,e){var t=Ri(r,o.ch,e);return null==t?null:new C(o.line,t,e<0?"after":"before")}function To(r,o,e,t,n){if(r){"rtl"==o.doc.direction&&(n=-n);var i=Qt(e,o.doc.direction);if(i){var u,l=n<0?me(i):i[0],s=n<0==(1==l.level)?"after":"before";if(l.level>0||"rtl"==o.doc.direction){var f=Un(o,e),c=wr(o,f,u=n<0?e.text.length-1:0).top;u=Ee(function(h){return wr(o,f,h).top==c},n<0==(1==l.level)?l.from:l.to-1,u),"before"==s&&(u=Ri(e,u,1))}else u=n<0?l.to:l.from;return new C(t,u,s)}}return new C(t,n<0?e.text.length:0,n<0?"before":"after")}Tr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Tr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Tr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Tr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Tr.default=je?Tr.macDefault:Tr.pcDefault;var ui={selectAll:wo,singleSelection:function(r){return r.setSelection(r.getCursor("anchor"),r.getCursor("head"),ae)},killLine:function(r){return si(r,function(o){if(o.empty()){var e=ie(r.doc,o.head.line).text.length;return o.head.ch==e&&o.head.line<r.lastLine()?{from:o.head,to:C(o.head.line+1,0)}:{from:o.head,to:C(o.head.line,e)}}return{from:o.from(),to:o.to()}})},deleteLine:function(r){return si(r,function(o){return{from:C(o.from().line,0),to:ve(r.doc,C(o.to().line+1,0))}})},delLineLeft:function(r){return si(r,function(o){return{from:C(o.from().line,0),to:o.from()}})},delWrappedLineLeft:function(r){return si(r,function(o){var e=r.charCoords(o.head,"div").top+5;return{from:r.coordsChar({left:0,top:e},"div"),to:o.from()}})},delWrappedLineRight:function(r){return si(r,function(o){var e=r.charCoords(o.head,"div").top+5,t=r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div");return{from:o.from(),to:t}})},undo:function(r){return r.undo()},redo:function(r){return r.redo()},undoSelection:function(r){return r.undoSelection()},redoSelection:function(r){return r.redoSelection()},goDocStart:function(r){return r.extendSelection(C(r.firstLine(),0))},goDocEnd:function(r){return r.extendSelection(C(r.lastLine()))},goLineStart:function(r){return r.extendSelectionsBy(function(o){return gs(r,o.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(r){return r.extendSelectionsBy(function(o){return ca(r,o.head)},{origin:"+move",bias:1})},goLineEnd:function(r){return r.extendSelectionsBy(function(o){return function Mo(r,o){var e=ie(r.doc,o),t=function Na(r){for(var o;o=Vi(r);)r=o.find(1,!0).line;return r}(e);return t!=e&&(o=_e(t)),To(!0,r,e,o,-1)}(r,o.head.line)},{origin:"+move",bias:-1})},goLineRight:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:r.display.lineDiv.offsetWidth+100,top:e},"div")},yt)},goLineLeft:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5;return r.coordsChar({left:0,top:e},"div")},yt)},goLineLeftSmart:function(r){return r.extendSelectionsBy(function(o){var e=r.cursorCoords(o.head,"div").top+5,t=r.coordsChar({left:0,top:e},"div");return t.ch<r.getLine(t.line).search(/\S/)?ca(r,o.head):t},yt)},goLineUp:function(r){return r.moveV(-1,"line")},goLineDown:function(r){return r.moveV(1,"line")},goPageUp:function(r){return r.moveV(-1,"page")},goPageDown:function(r){return r.moveV(1,"page")},goCharLeft:function(r){return r.moveH(-1,"char")},goCharRight:function(r){return r.moveH(1,"char")},goColumnLeft:function(r){return r.moveH(-1,"column")},goColumnRight:function(r){return r.moveH(1,"column")},goWordLeft:function(r){return r.moveH(-1,"word")},goGroupRight:function(r){return r.moveH(1,"group")},goGroupLeft:function(r){return r.moveH(-1,"group")},goWordRight:function(r){return r.moveH(1,"word")},delCharBefore:function(r){return r.deleteH(-1,"codepoint")},delCharAfter:function(r){return r.deleteH(1,"char")},delWordBefore:function(r){return r.deleteH(-1,"word")},delWordAfter:function(r){return r.deleteH(1,"word")},delGroupBefore:function(r){return r.deleteH(-1,"group")},delGroupAfter:function(r){return r.deleteH(1,"group")},indentAuto:function(r){return r.indentSelection("smart")},indentMore:function(r){return r.indentSelection("add")},indentLess:function(r){return r.indentSelection("subtract")},insertTab:function(r){return r.replaceSelection("\t")},insertSoftTab:function(r){for(var o=[],e=r.listSelections(),t=r.options.tabSize,n=0;n<e.length;n++){var i=e[n].from(),l=Q(r.getLine(i.line),i.ch,t);o.push(At(t-l%t))}r.replaceSelections(o)},defaultTab:function(r){r.somethingSelected()?r.indentSelection("add"):r.execCommand("insertTab")},transposeChars:function(r){return ur(r,function(){for(var o=r.listSelections(),e=[],t=0;t<o.length;t++)if(o[t].empty()){var n=o[t].head,i=ie(r.doc,n.line).text;if(i)if(n.ch==i.length&&(n=new C(n.line,n.ch-1)),n.ch>0)n=new C(n.line,n.ch+1),r.replaceRange(i.charAt(n.ch-1)+i.charAt(n.ch-2),C(n.line,n.ch-2),n,"+transpose");else if(n.line>r.doc.first){var l=ie(r.doc,n.line-1).text;l&&(n=new C(n.line,1),r.replaceRange(i.charAt(0)+r.doc.lineSeparator()+l.charAt(l.length-1),C(n.line-1,l.length-1),n,"+transpose"))}e.push(new qe(n,n))}r.setSelections(e)})},newlineAndIndent:function(r){return ur(r,function(){for(var o=r.listSelections(),e=o.length-1;e>=0;e--)r.replaceRange(r.doc.lineSeparator(),o[e].anchor,o[e].head,"+input");o=r.listSelections();for(var t=0;t<o.length;t++)r.indentLine(o[t].from().line,null,!0);Mn(r)})},openLine:function(r){return r.replaceSelection("\n","start")},toggleOverwrite:function(r){return r.toggleOverwrite()}};function gs(r,o){var e=ie(r.doc,o),t=Wr(e);return t!=e&&(o=_e(t)),To(!0,r,t,o,1)}function ca(r,o){var e=gs(r,o.line),t=ie(r.doc,e.line),n=Qt(t,r.doc.direction);if(!n||0==n[0].level){var i=Math.max(e.ch,t.text.search(/\S/));return C(e.line,o.line==e.line&&o.ch<=i&&o.ch?0:i,e.sticky)}return e}function dl(r,o,e){if("string"==typeof o&&!(o=ui[o]))return!1;r.display.input.ensurePolled();var t=r.display.shift,n=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),e&&(r.display.shift=!1),n=o(r)!=_}finally{r.display.shift=t,r.state.suppressEdits=!1}return n}var pl=new N;function Ao(r,o,e,t){var n=r.state.keySeq;if(n){if(vs(o))return"handled";if(/\'$/.test(o)?r.state.keySeq=null:pl.set(50,function(){r.state.keySeq==n&&(r.state.keySeq=null,r.display.input.reset())}),ys(r,n+" "+o,e,t))return!0}return ys(r,o,e,t)}function ys(r,o,e,t){var n=function ms(r,o,e){for(var t=0;t<r.state.keyMaps.length;t++){var n=_i(o,r.state.keyMaps[t],e,r);if(n)return n}return r.options.extraKeys&&_i(o,r.options.extraKeys,e,r)||_i(o,r.options.keyMap,e,r)}(r,o,t);return"multi"==n&&(r.state.keySeq=o),"handled"==n&&Pt(r,"keyHandled",r,o,e),("handled"==n||"multi"==n)&&(ot(e),Mi(r)),!!n}function zi(r,o){var e=ua(o,!0);return!!e&&(o.shiftKey&&!r.state.keySeq?Ao(r,"Shift-"+e,o,function(t){return dl(r,t,!0)})||Ao(r,e,o,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return dl(r,t)}):Ao(r,e,o,function(t){return dl(r,t)}))}var vl=null;function bs(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField()||(o.curOp.focus=P(S(o)),Fe(o,r)))){$&&K<11&&27==r.keyCode&&(r.returnValue=!1);var e=r.keyCode;o.display.shift=16==e||r.shiftKey;var t=zi(o,r);we&&(vl=t?e:null,!t&&88==e&&!yr&&(je?r.metaKey:r.ctrlKey)&&o.replaceSelection("",null,"cut")),j&&!je&&!t&&46==e&&r.shiftKey&&!r.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==e&&!/\bCodeMirror-crosshair\b/.test(o.display.lineDiv.className)&&function ha(r){var o=r.display.lineDiv;function e(t){(18==t.keyCode||!t.altKey)&&(Nt(o,"CodeMirror-crosshair"),ne(document,"keyup",e),ne(document,"mouseover",e))}te(o,"CodeMirror-crosshair"),Z(document,"keyup",e),Z(document,"mouseover",e)}(o)}}function da(r){16==r.keyCode&&(this.doc.sel.shift=!1),Fe(this,r)}function ws(r){var o=this;if(!(r.target&&r.target!=o.display.input.getField()||Vr(o.display,r)||Fe(o,r)||r.ctrlKey&&!r.altKey||je&&r.metaKey)){var e=r.keyCode,t=r.charCode;if(we&&e==vl)return vl=null,void ot(r);if(!we||r.which&&!(r.which<10)||!zi(o,r)){var n=String.fromCharCode(t??e);"\b"!=n&&(function xs(r,o,e){return Ao(r,"'"+e+"'",o,function(t){return dl(r,t,!0)})}(o,r,n)||o.display.input.onKeyPress(r))}}}var Do,fi,gl=function(r,o,e){this.time=r,this.pos=o,this.button=e};function Ui(r){var o=this,e=o.display;if(!(Fe(o,r)||e.activeTouch&&e.input.supportsTouch())){if(e.input.ensurePolled(),e.shift=r.shiftKey,Vr(e,r))return void(B||(e.scroller.draggable=!1,setTimeout(function(){return e.scroller.draggable=!0},100)));if(!pa(o,r)){var t=kn(o,r),n=Yr(r),i=t?function No(r,o){var e=+new Date;return fi&&fi.compare(e,r,o)?(Do=fi=null,"triple"):Do&&Do.compare(e,r,o)?(fi=new gl(e,r,o),Do=null,"double"):(Do=new gl(e,r,o),fi=null,"single")}(t,n):"single";V(o).focus(),1==n&&o.state.selectingText&&o.state.selectingText(r),(!t||!function eu(r,o,e,t,n){var i="Click";return"double"==t?i="Double"+i:"triple"==t&&(i="Triple"+i),Ao(r,ai(i=(1==o?"Left":2==o?"Middle":"Right")+i,n),n,function(l){if("string"==typeof l&&(l=ui[l]),!l)return!1;var a=!1;try{r.isReadOnly()&&(r.state.suppressEdits=!0),a=l(r,e)!=_}finally{r.state.suppressEdits=!1}return a})}(o,n,t,i,r))&&(1==n?t?function tu(r,o,e,t){$?setTimeout(be(Xa,r),0):r.curOp.focus=P(S(r));var l,n=function Ss(r,o,e){var t=r.getOption("configureMouse"),n=t?t(r,o,e):{};return null==n.unit&&(n.unit=(jt?e.shiftKey&&e.metaKey:e.altKey)?"rectangle":"single"==o?"char":"double"==o?"word":"line"),(null==n.extend||r.doc.extend)&&(n.extend=r.doc.extend||e.shiftKey),null==n.addNew&&(n.addNew=je?e.metaKey:e.ctrlKey),null==n.moveOnDrag&&(n.moveOnDrag=!(je?e.altKey:e.ctrlKey)),n}(r,e,t),i=r.doc.sel;r.options.dragDrop&&qi&&!r.isReadOnly()&&"single"==e&&(l=i.contains(o))>-1&&(F((l=i.ranges[l]).from(),o)<0||o.xRel>0)&&(F(l.to(),o)>0||o.xRel<0)?function ru(r,o,e,t){var n=r.display,i=!1,l=Bt(r,function(u){B&&(n.scroller.draggable=!1),r.state.draggingText=!1,r.state.delayingBlurEvent&&(r.hasFocus()?r.state.delayingBlurEvent=!1:fo(r)),ne(n.wrapper.ownerDocument,"mouseup",l),ne(n.wrapper.ownerDocument,"mousemove",a),ne(n.scroller,"dragstart",s),ne(n.scroller,"drop",l),i||(ot(u),t.addNew||an(r.doc,e,null,null,t.extend),B&&!de||$&&9==K?setTimeout(function(){n.wrapper.ownerDocument.body.focus({preventScroll:!0}),n.input.focus()},20):n.input.focus())}),a=function(u){i=i||Math.abs(o.clientX-u.clientX)+Math.abs(o.clientY-u.clientY)>=10},s=function(){return i=!0};B&&(n.scroller.draggable=!0),r.state.draggingText=l,l.copy=!t.moveOnDrag,Z(n.wrapper.ownerDocument,"mouseup",l),Z(n.wrapper.ownerDocument,"mousemove",a),Z(n.scroller,"dragstart",s),Z(n.scroller,"drop",l),r.state.delayingBlurEvent=!0,setTimeout(function(){return n.input.focus()},20),n.scroller.dragDrop&&n.scroller.dragDrop()}(r,t,o,n):function nu(r,o,e,t){$&&fo(r);var n=r.display,i=r.doc;ot(o);var l,a,s=i.sel,u=s.ranges;if(t.addNew&&!t.extend?(a=i.sel.contains(e),l=a>-1?u[a]:new qe(e,e)):(l=i.sel.primary(),a=i.sel.primIndex),"rectangle"==t.unit)t.addNew||(l=new qe(e,e)),e=kn(r,o,!0,!0),a=-1;else{var f=ks(r,e,t.unit);l=t.extend?cl(l,f.anchor,f.head,t.extend):f}t.addNew?-1==a?(a=u.length,Yt(i,bt(r,u.concat([l]),a),{scroll:!1,origin:"*mouse"})):u.length>1&&u[a].empty()&&"char"==t.unit&&!t.extend?(Yt(i,bt(r,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),s=i.sel):Fi(i,a,l,Ce):(a=0,Yt(i,new pr([l],0),Ce),s=i.sel);var c=e;function h(A){if(0!=F(c,A))if(c=A,"rectangle"==t.unit){for(var E=[],W=r.options.tabSize,H=Q(ie(i,e.line).text,e.ch,W),z=Q(ie(i,A.line).text,A.ch,W),Y=Math.min(H,z),fe=Math.max(H,z),ge=Math.min(e.line,A.line),Ke=Math.min(r.lastLine(),Math.max(e.line,A.line));ge<=Ke;ge++){var Ae=ie(i,ge).text,Re=er(Ae,Y,W);Y==fe?E.push(new qe(C(ge,Re),C(ge,Re))):Ae.length>Re&&E.push(new qe(C(ge,Re),C(ge,er(Ae,fe,W))))}E.length||E.push(new qe(e,e)),Yt(i,bt(r,s.ranges.slice(0,a).concat(E),a),{origin:"*mouse",scroll:!1}),r.scrollIntoView(A)}else{var Ne,tt=l,De=ks(r,A,t.unit),ze=tt.anchor;F(De.anchor,ze)>0?(Ne=De.head,ze=Ct(tt.from(),De.anchor)):(Ne=De.anchor,ze=We(tt.to(),De.head));var ke=s.ranges.slice(0);ke[a]=function Ls(r,o){var e=o.anchor,t=o.head,n=ie(r.doc,e.line);if(0==F(e,t)&&e.sticky==t.sticky)return o;var i=Qt(n);if(!i)return o;var l=xt(i,e.ch,e.sticky),a=i[l];if(a.from!=e.ch&&a.to!=e.ch)return o;var u,s=l+(a.from==e.ch==(1!=a.level)?0:1);if(0==s||s==i.length)return o;if(t.line!=e.line)u=(t.line-e.line)*("ltr"==r.doc.direction?1:-1)>0;else{var f=xt(i,t.ch,t.sticky),c=f-l||(t.ch-e.ch)*(1==a.level?-1:1);u=f==s-1||f==s?c<0:c>0}var h=i[s+(u?-1:0)],d=u==(1==h.level),g=d?h.from:h.to,m=d?"after":"before";return e.ch==g&&e.sticky==m?o:new qe(new C(e.line,g,m),t)}(r,new qe(ve(i,ze),Ne)),Yt(i,bt(r,ke,a),Ce)}}var d=n.wrapper.getBoundingClientRect(),g=0;function m(A){var E=++g,W=kn(r,A,!0,"rectangle"==t.unit);if(W)if(0!=F(W,c)){r.curOp.focus=P(S(r)),h(W);var H=Xn(n,i);(W.line>=H.to||W.line<H.from)&&setTimeout(Bt(r,function(){g==E&&m(A)}),150)}else{var z=A.clientY<d.top?-20:A.clientY>d.bottom?20:0;z&&setTimeout(Bt(r,function(){g==E&&(n.scroller.scrollTop+=z,m(A))}),50)}}function w(A){r.state.selectingText=!1,g=1/0,A&&(ot(A),n.input.focus()),ne(n.wrapper.ownerDocument,"mousemove",k),ne(n.wrapper.ownerDocument,"mouseup",M),i.history.lastSelOrigin=null}var k=Bt(r,function(A){0!==A.buttons&&Yr(A)?m(A):w(A)}),M=Bt(r,w);r.state.selectingText=M,Z(n.wrapper.ownerDocument,"mousemove",k),Z(n.wrapper.ownerDocument,"mouseup",M)}(r,t,o,n)}(o,t,i,r):Kt(r)==e.scroller&&ot(r):2==n?(t&&an(o.doc,t),setTimeout(function(){return e.input.focus()},20)):3==n&&(vt?o.display.input.onContextMenu(r):fo(o)))}}}function ks(r,o,e){if("char"==e)return new qe(o,o);if("word"==e)return r.findWordAt(o);if("line"==e)return new qe(C(o.line,0),ve(r.doc,C(o.line+1,0)));var t=e(r,o);return new qe(t.from,t.to)}function Ts(r,o,e,t){var n,i;if(o.touches)n=o.touches[0].clientX,i=o.touches[0].clientY;else try{n=o.clientX,i=o.clientY}catch{return!1}if(n>=Math.floor(r.display.gutters.getBoundingClientRect().right))return!1;t&&ot(o);var l=r.display,a=l.lineDiv.getBoundingClientRect();if(i>a.bottom||!Be(r,e))return Ht(o);i-=a.top-l.viewOffset;for(var s=0;s<r.display.gutterSpecs.length;++s){var u=l.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=n)return Ve(r,e,r,It(r.doc,i),r.display.gutterSpecs[s].className,o),Ht(o)}}function pa(r,o){return Ts(r,o,"gutterClick",!0)}function va(r,o){Vr(r.display,o)||function ga(r,o){return!!Be(r,"gutterContextMenu")&&Ts(r,o,"gutterContextMenu",!1)}(r,o)||Fe(r,o,"contextmenu")||vt||r.display.input.onContextMenu(o)}function ma(r){r.display.wrapper.className=r.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+r.options.theme.replace(/(^|\s)\s*/g," cm-s-"),ki(r)}gl.prototype.compare=function(r,o,e){return this.time+400>r&&0==F(o,this.pos)&&e==this.button};var Gi={toString:function(){return"CodeMirror.Init"}},ya={},dn={};function ml(r,o,e){if(!o!=!(e&&e!=Gi)){var n=r.display.dragFunctions,i=o?Z:ne;i(r.display.scroller,"dragstart",n.start),i(r.display.scroller,"dragenter",n.enter),i(r.display.scroller,"dragover",n.over),i(r.display.scroller,"dragleave",n.leave),i(r.display.scroller,"drop",n.drop)}}function iu(r){r.options.lineWrapping?(te(r.display.wrapper,"CodeMirror-wrap"),r.display.sizer.style.minWidth="",r.display.sizerWidth=null):(Nt(r.display.wrapper,"CodeMirror-wrap"),Hr(r)),lo(r),Dt(r),ki(r),setTimeout(function(){return kr(r)},100)}function ht(r,o){var e=this;if(!(this instanceof ht))return new ht(r,o);this.options=o=o?U(o):{},U(ya,o,!1);var t=o.value;"string"==typeof t?t=new rr(t,o.mode,null,o.lineSeparator,o.direction):o.mode&&(t.modeOption=o.mode),this.doc=t;var n=new ht.inputStyles[o.inputStyle](this),i=this.display=new es(r,t,n,o);for(var l in i.wrapper.CodeMirror=this,ma(this),o.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Gl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new N,keySeq:null,specialChars:null},o.autofocus&&!he&&i.input.focus(),$&&K<11&&setTimeout(function(){return e.display.input.reset(!0)},20),function ou(r){var o=r.display;Z(o.scroller,"mousedown",Bt(r,Ui)),Z(o.scroller,"dblclick",$&&K<11?Bt(r,function(s){if(!Fe(r,s)){var u=kn(r,s);if(u&&!pa(r,s)&&!Vr(r.display,s)){ot(s);var f=r.findWordAt(u);an(r.doc,f.anchor,f.head)}}}):function(s){return Fe(r,s)||ot(s)}),Z(o.scroller,"contextmenu",function(s){return va(r,s)}),Z(o.input.getField(),"contextmenu",function(s){o.scroller.contains(s.target)||va(r,s)});var e,t={end:0};function n(){o.activeTouch&&(e=setTimeout(function(){return o.activeTouch=null},1e3),(t=o.activeTouch).end=+new Date)}function i(s){if(1!=s.touches.length)return!1;var u=s.touches[0];return u.radiusX<=1&&u.radiusY<=1}function l(s,u){if(null==u.left)return!0;var f=u.left-s.left,c=u.top-s.top;return f*f+c*c>400}Z(o.scroller,"touchstart",function(s){if(!Fe(r,s)&&!i(s)&&!pa(r,s)){o.input.ensurePolled(),clearTimeout(e);var u=+new Date;o.activeTouch={start:u,moved:!1,prev:u-t.end<=300?t:null},1==s.touches.length&&(o.activeTouch.left=s.touches[0].pageX,o.activeTouch.top=s.touches[0].pageY)}}),Z(o.scroller,"touchmove",function(){o.activeTouch&&(o.activeTouch.moved=!0)}),Z(o.scroller,"touchend",function(s){var u=o.activeTouch;if(u&&!Vr(o,s)&&null!=u.left&&!u.moved&&new Date-u.start<300){var c,f=r.coordsChar(o.activeTouch,"page");c=!u.prev||l(u,u.prev)?new qe(f,f):!u.prev.prev||l(u,u.prev.prev)?r.findWordAt(f):new qe(C(f.line,0),ve(r.doc,C(f.line+1,0))),r.setSelection(c.anchor,c.head),r.focus(),ot(s)}n()}),Z(o.scroller,"touchcancel",n),Z(o.scroller,"scroll",function(){o.scroller.clientHeight&&(Dn(r,o.scroller.scrollTop),_r(r,o.scroller.scrollLeft,!0),Ve(r,"scroll",r))}),Z(o.scroller,"mousewheel",function(s){return Yl(r,s)}),Z(o.scroller,"DOMMouseScroll",function(s){return Yl(r,s)}),Z(o.wrapper,"scroll",function(){return o.wrapper.scrollTop=o.wrapper.scrollLeft=0}),o.dragFunctions={enter:function(s){Fe(r,s)||zr(s)},over:function(s){Fe(r,s)||(function Vs(r,o){var e=kn(r,o);if(e){var t=document.createDocumentFragment();Kn(r,e,t),r.display.dragCursor||(r.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),r.display.lineSpace.insertBefore(r.display.dragCursor,r.display.cursorDiv)),Je(r.display.dragCursor,t)}}(r,s),zr(s))},start:function(s){return function fs(r,o){if($&&(!r.state.draggingText||+new Date-us<100))zr(o);else if(!Fe(r,o)&&!Vr(r.display,o)&&(o.dataTransfer.setData("Text",r.getSelection()),o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setDragImage&&!de)){var e=T("img",null,null,"position: fixed; left: 0; top: 0;");e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",we&&(e.width=e.height=1,r.display.wrapper.appendChild(e),e._top=e.offsetTop),o.dataTransfer.setDragImage(e,0,0),we&&e.parentNode.removeChild(e)}}(r,s)},drop:Bt(r,nr),leave:function(s){Fe(r,s)||cs(r)}};var a=o.input.getField();Z(a,"keyup",function(s){return da.call(r,s)}),Z(a,"keydown",Bt(r,bs)),Z(a,"keypress",Bt(r,ws)),Z(a,"focus",function(s){return el(r,s)}),Z(a,"blur",function(s){return Tn(r,s)})}(this),ds(),Nn(this),this.curOp.forceUpdate=!0,sl(this,t),o.autofocus&&!he||this.hasFocus()?setTimeout(function(){e.hasFocus()&&!e.state.focused&&el(e)},20):Tn(this),dn)dn.hasOwnProperty(l)&&dn[l](this,o[l],Gi);il(this),o.finishInit&&o.finishInit(this);for(var a=0;a<at.length;++a)at[a](this);Qn(this),B&&o.lineWrapping&&"optimizelegibility"==getComputedStyle(i.lineDiv).textRendering&&(i.lineDiv.style.textRendering="auto")}ht.defaults=ya,ht.optionHandlers=dn;var at=[];function Oo(r,o,e,t){var i,n=r.doc;null==e&&(e="add"),"smart"==e&&(n.mode.indent?i=gi(r,o).state:e="prev");var l=r.options.tabSize,a=ie(n,o),s=Q(a.text,null,l);a.stateAfter&&(a.stateAfter=null);var f,u=a.text.match(/^\s*/)[0];if(t||/\S/.test(a.text)){if("smart"==e&&((f=n.mode.indent(i,a.text.slice(u.length),a.text))==_||f>150)){if(!t)return;e="prev"}}else f=0,e="not";"prev"==e?f=o>n.first?Q(ie(n,o-1).text,null,l):0:"add"==e?f=s+r.options.indentUnit:"subtract"==e?f=s-r.options.indentUnit:"number"==typeof e&&(f=s+e),f=Math.max(0,f);var c="",h=0;if(r.options.indentWithTabs)for(var d=Math.floor(f/l);d;--d)h+=l,c+="\t";if(h<f&&(c+=At(f-h)),c!=u)return Kr(n,c,C(o,0),C(o,u.length),"+input"),a.stateAfter=null,!0;for(var g=0;g<n.sel.ranges.length;g++){var m=n.sel.ranges[g];if(m.head.line==o&&m.head.ch<u.length){var w=C(o,u.length);Fi(n,g,new qe(w,w));break}}}ht.defineInitHook=function(r){return at.push(r)};var vr=null;function Pn(r){vr=r}function gr(r,o,e,t,n){var i=r.doc;r.display.shift=!1,t||(t=i.sel);var l=+new Date-200,a="paste"==n||r.state.pasteIncoming>l,s=_n(o),u=null;if(a&&t.ranges.length>1)if(vr&&vr.text.join("\n")==o){if(t.ranges.length%vr.text.length==0){u=[];for(var f=0;f<vr.text.length;f++)u.push(i.splitLines(vr.text[f]))}}else s.length==t.ranges.length&&r.options.pasteLinesPerSelection&&(u=tr(s,function(k){return[k]}));for(var c=r.curOp.updateInput,h=t.ranges.length-1;h>=0;h--){var d=t.ranges[h],g=d.from(),m=d.to();d.empty()&&(e&&e>0?g=C(g.line,g.ch-e):r.state.overwrite&&!a?m=C(m.line,Math.min(ie(i,m.line).text.length,m.ch+me(s).length)):a&&vr&&vr.lineWise&&vr.text.join("\n")==s.join("\n")&&(g=m=C(g.line,0)));var w={from:g,to:m,text:u?u[h%u.length]:s,origin:n||(a?"paste":r.state.cutIncoming>l?"cut":"+input")};ii(r.doc,w),Pt(r,"inputRead",r,w)}o&&!a&&yl(r,o),Mn(r),r.curOp.updateInput<2&&(r.curOp.updateInput=c),r.curOp.typing=!0,r.state.pasteIncoming=r.state.cutIncoming=-1}function Eo(r,o){var e=r.clipboardData&&r.clipboardData.getData("Text");if(e)return r.preventDefault(),!o.isReadOnly()&&!o.options.disableInput&&o.hasFocus()&&ur(o,function(){return gr(o,e,0,null,"paste")}),!0}function yl(r,o){if(r.options.electricChars&&r.options.smartIndent)for(var e=r.doc.sel,t=e.ranges.length-1;t>=0;t--){var n=e.ranges[t];if(!(n.head.ch>100||t&&e.ranges[t-1].head.line==n.head.line)){var i=r.getModeAt(n.head),l=!1;if(i.electricChars){for(var a=0;a<i.electricChars.length;a++)if(o.indexOf(i.electricChars.charAt(a))>-1){l=Oo(r,n.head.line,"smart");break}}else i.electricInput&&i.electricInput.test(ie(r.doc,n.head.line).text.slice(0,n.head.ch))&&(l=Oo(r,n.head.line,"smart"));l&&Pt(r,"electricInput",r,n.head.line)}}}function xa(r){for(var o=[],e=[],t=0;t<r.doc.sel.ranges.length;t++){var n=r.doc.sel.ranges[t].head.line,i={anchor:C(n,0),head:C(n+1,0)};e.push(i),o.push(r.getRange(i.anchor,i.head))}return{text:o,ranges:e}}function xl(r,o,e,t){r.setAttribute("autocorrect",e?"on":"off"),r.setAttribute("autocapitalize",t?"on":"off"),r.setAttribute("spellcheck",!!o)}function ba(){var r=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),o=T("div",[r],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return B?r.style.width="1000px":r.setAttribute("wrap","off"),ft&&(r.style.border="1px solid black"),o}function bl(r,o,e,t,n){var i=o,l=e,a=ie(r,o.line),s=n&&"rtl"==r.direction?-e:e;function f(M){var A;if("codepoint"==t){var E=a.text.charCodeAt(o.ch+(e>0?0:-1));A=isNaN(E)?null:new C(o.line,Math.max(0,Math.min(a.text.length,o.ch+e*((e>0?E>=55296&&E<56320:E>=56320&&E<57343)?2:1))),-e)}else A=n?function fa(r,o,e,t){var n=Qt(o,r.doc.direction);if(!n)return In(o,e,t);e.ch>=o.text.length?(e.ch=o.text.length,e.sticky="before"):e.ch<=0&&(e.ch=0,e.sticky="after");var i=xt(n,e.ch,e.sticky),l=n[i];if("ltr"==r.doc.direction&&l.level%2==0&&(t>0?l.to>e.ch:l.from<e.ch))return In(o,e,t);var s,a=function(k,M){return Ri(o,k instanceof C?k.ch:k,M)},u=function(k){return r.options.lineWrapping?(s=s||Un(r,o),Qo(r,o,s,k)):{begin:0,end:o.text.length}},f=u("before"==e.sticky?a(e,-1):e.ch);if("rtl"==r.doc.direction||1==l.level){var c=1==l.level==t<0,h=a(e,c?1:-1);if(null!=h&&(c?h<=l.to&&h<=f.end:h>=l.from&&h>=f.begin))return new C(e.line,h,c?"before":"after")}var g=function(k,M,A){for(;k>=0&&k<n.length;k+=M){var W=n[k],H=M>0==(1!=W.level),z=H?A.begin:a(A.end,-1);if(W.from<=z&&z<W.to||(z=H?W.from:a(W.to,-1),A.begin<=z&&z<A.end))return Y=z,H?new C(e.line,a(Y,1),"before"):new C(e.line,Y,"after")}var Y},m=g(i+t,t,f);if(m)return m;var w=t>0?f.end:a(f.begin,-1);return null==w||t>0&&w==o.text.length||!(m=g(t>0?0:n.length-1,t,u(w)))?null:m}(r.cm,a,o,e):In(a,o,e);if(null==A){if(M||!function u(){var M=o.line+s;return!(M<r.first||M>=r.first+r.size)&&(o=new C(M,o.ch,o.sticky),a=ie(r,M))}())return!1;o=To(n,r.cm,a,o.line,s)}else o=A;return!0}if("char"==t||"codepoint"==t)f();else if("column"==t)f(!0);else if("word"==t||"group"==t)for(var c=null,h="group"==t,d=r.cm&&r.cm.getHelper(o,"wordChars"),g=!0;!(e<0)||f(!g);g=!1){var m=a.text.charAt(o.ch)||"\n",w=Te(m,d)?"w":h&&"\n"==m?"n":!h||/\s/.test(m)?null:"p";if(h&&!g&&!w&&(w="s"),c&&c!=w){e<0&&(e=1,f(),o.sticky="after");break}if(w&&(c=w),e>0&&!f(!g))break}var k=bo(r,o,i,l,!0);return O(i,k)&&(k.hitSide=!0),k}function Ds(r,o,e,t){var l,u,n=r.doc,i=o.left;if("page"==t){var a=Math.min(r.display.wrapper.clientHeight,V(r).innerHeight||n(r).documentElement.clientHeight),s=Math.max(a-.5*Ti(r.display),3);l=(e>0?o.bottom:o.top)+e*s}else"line"==t&&(l=e>0?o.bottom+3:o.top-3);for(;(u=jo(r,i,l)).outside;){if(e<0?l<=0:l>=n.height){u.hitSide=!0;break}l+=5*e}return u}var Ze=function(r){this.cm=r,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new N,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function wa(r,o){var e=Hl(r,o.line);if(!e||e.hidden)return null;var t=ie(r.doc,o.line),n=Ko(e,t,o.line),i=Qt(t,r.doc.direction),l="left";i&&(l=xt(i,o.ch)%2?"right":"left");var s=Pr(n.map,o.ch,l);return s.offset="right"==s.collapse?s.end:s.start,s}function ci(r,o){return o&&(r.bad=!0),r}function pn(r,o,e){var t;if(o==r.display.lineDiv){if(!(t=r.display.lineDiv.childNodes[e]))return ci(r.clipPos(C(r.display.viewTo-1)),!0);o=null,e=0}else for(t=o;;t=t.parentNode){if(!t||t==r.display.lineDiv)return null;if(t.parentNode&&t.parentNode==r.display.lineDiv)break}for(var n=0;n<r.display.view.length;n++){var i=r.display.view[n];if(i.node==t)return au(i,o,e)}}function au(r,o,e){var t=r.text.firstChild,n=!1;if(!o||!q(t,o))return ci(C(_e(r.line),0),!0);if(o==t&&(n=!0,o=t.childNodes[e],e=0,!o)){var i=r.rest?me(r.rest):r.line;return ci(C(_e(i),i.text.length),n)}var l=3==o.nodeType?o:null,a=o;for(!l&&1==o.childNodes.length&&3==o.firstChild.nodeType&&(l=o.firstChild,e&&(e=l.nodeValue.length));a.parentNode!=t;)a=a.parentNode;var s=r.measure,u=s.maps;function f(w,k,M){for(var A=-1;A<(u?u.length:0);A++)for(var E=A<0?s.map:u[A],W=0;W<E.length;W+=3){var H=E[W+2];if(H==w||H==k){var z=_e(A<0?r.line:r.rest[A]),Y=E[W]+M;return(M<0||H!=w)&&(Y=E[W+(M?1:0)]),C(z,Y)}}}var c=f(l,a,e);if(c)return ci(c,n);for(var h=a.nextSibling,d=l?l.nodeValue.length-e:0;h;h=h.nextSibling){if(c=f(h,h.firstChild,0))return ci(C(c.line,c.ch-d),n);d+=h.textContent.length}for(var g=a.previousSibling,m=e;g;g=g.previousSibling){if(c=f(g,g.firstChild,-1))return ci(C(c.line,c.ch+m),n);m+=g.textContent.length}}Ze.prototype.init=function(r){var o=this,e=this,t=e.cm,n=e.div=r.lineDiv;function i(a){for(var s=a.target;s;s=s.parentNode){if(s==n)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(s.className))break}return!1}function l(a){if(i(a)&&!Fe(t,a)){if(t.somethingSelected())Pn({lineWise:!1,text:t.getSelections()}),"cut"==a.type&&t.replaceSelection("",null,"cut");else{if(!t.options.lineWiseCopyCut)return;var s=xa(t);Pn({lineWise:!0,text:s.text}),"cut"==a.type&&t.operation(function(){t.setSelections(s.ranges,0,ae),t.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();var u=vr.text.join("\n");if(a.clipboardData.setData("Text",u),a.clipboardData.getData("Text")==u)return void a.preventDefault()}var f=ba(),c=f.firstChild;xl(c),t.display.lineSpace.insertBefore(f,t.display.lineSpace.firstChild),c.value=vr.text.join("\n");var h=P(v(n));nt(c),setTimeout(function(){t.display.lineSpace.removeChild(f),h.focus(),h==n&&e.showPrimarySelection()},50)}}n.contentEditable=!0,xl(n,t.options.spellcheck,t.options.autocorrect,t.options.autocapitalize),Z(n,"paste",function(a){!i(a)||Fe(t,a)||Eo(a,t)||K<=11&&setTimeout(Bt(t,function(){return o.updateFromDOM()}),20)}),Z(n,"compositionstart",function(a){o.composing={data:a.data,done:!1}}),Z(n,"compositionupdate",function(a){o.composing||(o.composing={data:a.data,done:!1})}),Z(n,"compositionend",function(a){o.composing&&(a.data!=o.composing.data&&o.readFromDOMSoon(),o.composing.done=!0)}),Z(n,"touchstart",function(){return e.forceCompositionEnd()}),Z(n,"input",function(){o.composing||o.readFromDOMSoon()}),Z(n,"copy",l),Z(n,"cut",l)},Ze.prototype.screenReaderLabelChanged=function(r){r?this.div.setAttribute("aria-label",r):this.div.removeAttribute("aria-label")},Ze.prototype.prepareSelection=function(){var r=Bl(this.cm,!1);return r.focus=P(v(this.div))==this.div,r},Ze.prototype.showSelection=function(r,o){!r||!this.cm.display.view.length||((r.focus||o)&&this.showPrimarySelection(),this.showMultipleSelections(r))},Ze.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ze.prototype.showPrimarySelection=function(){var r=this.getSelection(),o=this.cm,e=o.doc.sel.primary(),t=e.from(),n=e.to();if(o.display.viewTo==o.display.viewFrom||t.line>=o.display.viewTo||n.line<o.display.viewFrom)r.removeAllRanges();else{var i=pn(o,r.anchorNode,r.anchorOffset),l=pn(o,r.focusNode,r.focusOffset);if(!i||i.bad||!l||l.bad||0!=F(Ct(i,l),t)||0!=F(We(i,l),n)){var a=o.display.view,s=t.line>=o.display.viewFrom&&wa(o,t)||{node:a[0].measure.map[2],offset:0},u=n.line<o.display.viewTo&&wa(o,n);if(!u){var f=a[a.length-1].measure,c=f.maps?f.maps[f.maps.length-1]:f.map;u={node:c[c.length-1],offset:c[c.length-2]-c[c.length-3]}}if(!s||!u)return void r.removeAllRanges();var d,h=r.rangeCount&&r.getRangeAt(0);try{d=x(s.node,s.offset,u.offset,u.node)}catch{}d&&(!j&&o.state.focused?(r.collapse(s.node,s.offset),d.collapsed||(r.removeAllRanges(),r.addRange(d))):(r.removeAllRanges(),r.addRange(d)),h&&null==r.anchorNode?r.addRange(h):j&&this.startGracePeriod()),this.rememberSelection()}}},Ze.prototype.startGracePeriod=function(){var r=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){r.gracePeriod=!1,r.selectionChanged()&&r.cm.operation(function(){return r.cm.curOp.selectionChanged=!0})},20)},Ze.prototype.showMultipleSelections=function(r){Je(this.cm.display.cursorDiv,r.cursors),Je(this.cm.display.selectionDiv,r.selection)},Ze.prototype.rememberSelection=function(){var r=this.getSelection();this.lastAnchorNode=r.anchorNode,this.lastAnchorOffset=r.anchorOffset,this.lastFocusNode=r.focusNode,this.lastFocusOffset=r.focusOffset},Ze.prototype.selectionInEditor=function(){var r=this.getSelection();if(!r.rangeCount)return!1;var o=r.getRangeAt(0).commonAncestorContainer;return q(this.div,o)},Ze.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||P(v(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ze.prototype.blur=function(){this.div.blur()},Ze.prototype.getField=function(){return this.div},Ze.prototype.supportsTouch=function(){return!0},Ze.prototype.receivedFocus=function(){var r=this,o=this;this.selectionInEditor()?setTimeout(function(){return r.pollSelection()},20):ur(this.cm,function(){return o.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function e(){o.cm.state.focused&&(o.pollSelection(),o.polling.set(o.cm.options.pollInterval,e))})},Ze.prototype.selectionChanged=function(){var r=this.getSelection();return r.anchorNode!=this.lastAnchorNode||r.anchorOffset!=this.lastAnchorOffset||r.focusNode!=this.lastFocusNode||r.focusOffset!=this.lastFocusOffset},Ze.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var r=this.getSelection(),o=this.cm;if(ut&&ce&&this.cm.display.gutterSpecs.length&&function Qe(r){for(var o=r;o;o=o.parentNode)if(/CodeMirror-gutter-wrapper/.test(o.className))return!0;return!1}(r.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var e=pn(o,r.anchorNode,r.anchorOffset),t=pn(o,r.focusNode,r.focusOffset);e&&t&&ur(o,function(){Yt(o.doc,Me(e,t),ae),(e.bad||t.bad)&&(o.curOp.selectionChanged=!0)})}}},Ze.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i,l,a,r=this.cm,o=r.display,e=r.doc.sel.primary(),t=e.from(),n=e.to();if(0==t.ch&&t.line>r.firstLine()&&(t=C(t.line-1,ie(r.doc,t.line-1).length)),n.ch==ie(r.doc,n.line).text.length&&n.line<r.lastLine()&&(n=C(n.line+1,0)),t.line<o.viewFrom||n.line>o.viewTo-1)return!1;t.line==o.viewFrom||0==(i=$r(r,t.line))?(l=_e(o.view[0].line),a=o.view[0].node):(l=_e(o.view[i].line),a=o.view[i-1].node.nextSibling);var u,f,s=$r(r,n.line);if(s==o.view.length-1?(u=o.viewTo-1,f=o.lineDiv.lastChild):(u=_e(o.view[s+1].line)-1,f=o.view[s+1].node.previousSibling),!a)return!1;for(var c=r.doc.splitLines(function lu(r,o,e,t,n){var i="",l=!1,a=r.doc.lineSeparator(),s=!1;function f(){l&&(i+=a,s&&(i+=a),l=s=!1)}function c(d){d&&(f(),i+=d)}function h(d){if(1==d.nodeType){var g=d.getAttribute("cm-text");if(g)return void c(g);var w,m=d.getAttribute("cm-marker");if(m){var k=r.findMarks(C(t,0),C(n+1,0),function u(d){return function(g){return g.id==d}}(+m));return void(k.length&&(w=k[0].find(0))&&c($e(r.doc,w.from,w.to).join(a)))}if("false"==d.getAttribute("contenteditable"))return;var M=/^(pre|div|p|li|table|br)$/i.test(d.nodeName);if(!/^br$/i.test(d.nodeName)&&0==d.textContent.length)return;M&&f();for(var A=0;A<d.childNodes.length;A++)h(d.childNodes[A]);/^(pre|p)$/i.test(d.nodeName)&&(s=!0),M&&(l=!0)}else 3==d.nodeType&&c(d.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;h(o),o!=e;)o=o.nextSibling,s=!1;return i}(r,a,f,l,u)),h=$e(r.doc,C(l,0),C(u,ie(r.doc,u).text.length));c.length>1&&h.length>1;)if(me(c)==me(h))c.pop(),h.pop(),u--;else{if(c[0]!=h[0])break;c.shift(),h.shift(),l++}for(var d=0,g=0,m=c[0],w=h[0],k=Math.min(m.length,w.length);d<k&&m.charCodeAt(d)==w.charCodeAt(d);)++d;for(var M=me(c),A=me(h),E=Math.min(M.length-(1==c.length?d:0),A.length-(1==h.length?d:0));g<E&&M.charCodeAt(M.length-g-1)==A.charCodeAt(A.length-g-1);)++g;if(1==c.length&&1==h.length&&l==t.line)for(;d&&d>t.ch&&M.charCodeAt(M.length-g-1)==A.charCodeAt(A.length-g-1);)d--,g++;c[c.length-1]=M.slice(0,M.length-g).replace(/^\u200b+/,""),c[0]=c[0].slice(d).replace(/\u200b+$/,"");var W=C(l,d),H=C(u,h.length?me(h).length-g:0);return c.length>1||c[0]||F(W,H)?(Kr(r.doc,c,W,H,"+input"),!0):void 0},Ze.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ze.prototype.reset=function(){this.forceCompositionEnd()},Ze.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ze.prototype.readFromDOMSoon=function(){var r=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(r.readDOMTimeout=null,r.composing){if(!r.composing.done)return;r.composing=null}r.updateFromDOM()},80))},Ze.prototype.updateFromDOM=function(){var r=this;(this.cm.isReadOnly()||!this.pollContent())&&ur(this.cm,function(){return Dt(r.cm)})},Ze.prototype.setUneditable=function(r){r.contentEditable="false"},Ze.prototype.onKeyPress=function(r){0==r.charCode||this.composing||(r.preventDefault(),this.cm.isReadOnly()||Bt(this.cm,gr)(this.cm,String.fromCharCode(null==r.charCode?r.keyCode:r.charCode),0))},Ze.prototype.readOnlyChanged=function(r){this.div.contentEditable=String("nocursor"!=r)},Ze.prototype.onContextMenu=function(){},Ze.prototype.resetPosition=function(){},Ze.prototype.needsContentAttribute=!0;var dt=function(r){this.cm=r,this.prevInput="",this.pollingFast=!1,this.polling=new N,this.hasSelection=!1,this.composing=null,this.resetting=!1};dt.prototype.init=function(r){var o=this,e=this,t=this.cm;this.createField(r);var n=this.textarea;function i(l){if(!Fe(t,l)){if(t.somethingSelected())Pn({lineWise:!1,text:t.getSelections()});else{if(!t.options.lineWiseCopyCut)return;var a=xa(t);Pn({lineWise:!0,text:a.text}),"cut"==l.type?t.setSelections(a.ranges,null,ae):(e.prevInput="",n.value=a.text.join("\n"),nt(n))}"cut"==l.type&&(t.state.cutIncoming=+new Date)}}r.wrapper.insertBefore(this.wrapper,r.wrapper.firstChild),ft&&(n.style.width="0px"),Z(n,"input",function(){$&&K>=9&&o.hasSelection&&(o.hasSelection=null),e.poll()}),Z(n,"paste",function(l){Fe(t,l)||Eo(l,t)||(t.state.pasteIncoming=+new Date,e.fastPoll())}),Z(n,"cut",i),Z(n,"copy",i),Z(r.scroller,"paste",function(l){if(!Vr(r,l)&&!Fe(t,l)){if(!n.dispatchEvent)return t.state.pasteIncoming=+new Date,void e.focus();var a=new Event("paste");a.clipboardData=l.clipboardData,n.dispatchEvent(a)}}),Z(r.lineSpace,"selectstart",function(l){Vr(r,l)||ot(l)}),Z(n,"compositionstart",function(){var l=t.getCursor("from");e.composing&&e.composing.range.clear(),e.composing={start:l,range:t.markText(l,t.getCursor("to"),{className:"CodeMirror-composing"})}}),Z(n,"compositionend",function(){e.composing&&(e.poll(),e.composing.range.clear(),e.composing=null)})},dt.prototype.createField=function(r){this.wrapper=ba(),this.textarea=this.wrapper.firstChild;var o=this.cm.options;xl(this.textarea,o.spellcheck,o.autocorrect,o.autocapitalize)},dt.prototype.screenReaderLabelChanged=function(r){r?this.textarea.setAttribute("aria-label",r):this.textarea.removeAttribute("aria-label")},dt.prototype.prepareSelection=function(){var r=this.cm,o=r.display,e=r.doc,t=Bl(r);if(r.options.moveInputWithCursor){var n=Cr(r,e.sel.primary().head,"div"),i=o.wrapper.getBoundingClientRect(),l=o.lineDiv.getBoundingClientRect();t.teTop=Math.max(0,Math.min(o.wrapper.clientHeight-10,n.top+l.top-i.top)),t.teLeft=Math.max(0,Math.min(o.wrapper.clientWidth-10,n.left+l.left-i.left))}return t},dt.prototype.showSelection=function(r){var e=this.cm.display;Je(e.cursorDiv,r.cursors),Je(e.selectionDiv,r.selection),null!=r.teTop&&(this.wrapper.style.top=r.teTop+"px",this.wrapper.style.left=r.teLeft+"px")},dt.prototype.reset=function(r){if(!(this.contextMenuPending||this.composing&&r)){var o=this.cm;if(this.resetting=!0,o.somethingSelected()){this.prevInput="";var e=o.getSelection();this.textarea.value=e,o.state.focused&&nt(this.textarea),$&&K>=9&&(this.hasSelection=e)}else r||(this.prevInput=this.textarea.value="",$&&K>=9&&(this.hasSelection=null));this.resetting=!1}},dt.prototype.getField=function(){return this.textarea},dt.prototype.supportsTouch=function(){return!1},dt.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!he||P(v(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},dt.prototype.blur=function(){this.textarea.blur()},dt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},dt.prototype.receivedFocus=function(){this.slowPoll()},dt.prototype.slowPoll=function(){var r=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){r.poll(),r.cm.state.focused&&r.slowPoll()})},dt.prototype.fastPoll=function(){var r=!1,o=this;o.pollingFast=!0,o.polling.set(20,function e(){o.poll()||r?(o.pollingFast=!1,o.slowPoll()):(r=!0,o.polling.set(60,e))})},dt.prototype.poll=function(){var r=this,o=this.cm,e=this.textarea,t=this.prevInput;if(this.contextMenuPending||this.resetting||!o.state.focused||mn(e)&&!t&&!this.composing||o.isReadOnly()||o.options.disableInput||o.state.keySeq)return!1;var n=e.value;if(n==t&&!o.somethingSelected())return!1;if($&&K>=9&&this.hasSelection===n||je&&/[\uf700-\uf7ff]/.test(n))return o.display.input.reset(),!1;if(o.doc.sel==o.display.selForContextMenu){var i=n.charCodeAt(0);if(8203==i&&!t&&(t="\u200b"),8666==i)return this.reset(),this.cm.execCommand("undo")}for(var l=0,a=Math.min(t.length,n.length);l<a&&t.charCodeAt(l)==n.charCodeAt(l);)++l;return ur(o,function(){gr(o,n.slice(l),t.length-l,null,r.composing?"*compose":null),n.length>1e3||n.indexOf("\n")>-1?e.value=r.prevInput="":r.prevInput=n,r.composing&&(r.composing.range.clear(),r.composing.range=o.markText(r.composing.start,o.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},dt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},dt.prototype.onKeyPress=function(){$&&K>=9&&(this.hasSelection=null),this.fastPoll()},dt.prototype.onContextMenu=function(r){var o=this,e=o.cm,t=e.display,n=o.textarea;o.contextMenuPending&&o.contextMenuPending();var i=kn(e,r),l=t.scroller.scrollTop;if(i&&!we){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(i)&&Bt(e,Yt)(e.doc,Me(i),ae);var c,s=n.style.cssText,u=o.wrapper.style.cssText,f=o.wrapper.offsetParent.getBoundingClientRect();if(o.wrapper.style.cssText="position: static",n.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(r.clientY-f.top-5)+"px; left: "+(r.clientX-f.left-5)+"px;\n      z-index: 1000; background: "+($?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",B&&(c=n.ownerDocument.defaultView.scrollY),t.input.focus(),B&&n.ownerDocument.defaultView.scrollTo(null,c),t.input.reset(),e.somethingSelected()||(n.value=o.prevInput=" "),o.contextMenuPending=d,t.selForContextMenu=e.doc.sel,clearTimeout(t.detectingSelectAll),$&&K>=9&&h(),vt){zr(r);var g=function(){ne(window,"mouseup",g),setTimeout(d,20)};Z(window,"mouseup",g)}else setTimeout(d,50)}function h(){if(null!=n.selectionStart){var m=e.somethingSelected(),w="\u200b"+(m?n.value:"");n.value="\u21da",n.value=w,o.prevInput=m?"":"\u200b",n.selectionStart=1,n.selectionEnd=w.length,t.selForContextMenu=e.doc.sel}}function d(){if(o.contextMenuPending==d&&(o.contextMenuPending=!1,o.wrapper.style.cssText=u,n.style.cssText=s,$&&K<9&&t.scrollbars.setScrollTop(t.scroller.scrollTop=l),null!=n.selectionStart)){(!$||$&&K<9)&&h();var m=0,w=function(){t.selForContextMenu==e.doc.sel&&0==n.selectionStart&&n.selectionEnd>0&&"\u200b"==o.prevInput?Bt(e,wo)(e):m++<10?t.detectingSelectAll=setTimeout(w,500):(t.selForContextMenu=null,t.input.reset())};t.detectingSelectAll=setTimeout(w,200)}}},dt.prototype.readOnlyChanged=function(r){r||this.reset(),this.textarea.disabled="nocursor"==r,this.textarea.readOnly=!!r},dt.prototype.setUneditable=function(){},dt.prototype.needsContentAttribute=!1,function Ms(r){var o=r.optionHandlers;function e(t,n,i,l){r.defaults[t]=n,i&&(o[t]=l?function(a,s,u){u!=Gi&&i(a,s,u)}:i)}r.defineOption=e,r.Init=Gi,e("value","",function(t,n){return t.setValue(n)},!0),e("mode",null,function(t,n){t.doc.modeOption=n,ll(t)},!0),e("indentUnit",2,ll,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){vo(t),ki(t),Dt(t)},!0),e("lineSeparator",null,function(t,n){if(t.doc.lineSep=n,n){var i=[],l=t.doc.first;t.doc.iter(function(s){for(var u=0;;){var f=s.text.indexOf(n,u);if(-1==f)break;u=f+n.length,i.push(C(l,f))}l++});for(var a=i.length-1;a>=0;a--)Kr(t.doc,n,i[a],C(i[a].line,i[a].ch+n.length))}}),e("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(t,n,i){t.state.specialChars=new RegExp(n.source+(n.test("\t")?"":"|\t"),"g"),i!=Gi&&t.refresh()}),e("specialCharPlaceholder",Wa,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",he?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,n){return t.getInputField().spellcheck=n},!0),e("autocorrect",!1,function(t,n){return t.getInputField().autocorrect=n},!0),e("autocapitalize",!1,function(t,n){return t.getInputField().autocapitalize=n},!0),e("rtlMoveVisually",!Jt),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){ma(t),ei(t)},!0),e("keyMap","default",function(t,n,i){var l=Lo(n),a=i!=Gi&&Lo(i);a&&a.detach&&a.detach(t,l),l.attach&&l.attach(t,a||null)}),e("extraKeys",null),e("configureMouse",null),e("lineWrapping",!1,iu,!0),e("gutters",[],function(t,n){t.display.gutterSpecs=ol(n,t.options.lineNumbers),ei(t)},!0),e("fixedGutter",!0,function(t,n){t.display.gutters.style.left=n?Sn(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return kr(t)},!0),e("scrollbarStyle","native",function(t){Gl(t),kr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t,n){t.display.gutterSpecs=ol(t.options.gutters,n),ei(t)},!0),e("firstLineNumber",1,ei,!0),e("lineNumberFormatter",function(t){return t},ei,!0),e("showCursorWhenSelecting",!1,so,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("pasteLinesPerSelection",!0),e("selectionsMayTouch",!1),e("readOnly",!1,function(t,n){"nocursor"==n&&(Tn(t),t.display.input.blur()),t.display.input.readOnlyChanged(n)}),e("screenReaderLabel",null,function(t,n){t.display.input.screenReaderLabelChanged(n=""===n?null:n)}),e("disableInput",!1,function(t,n){n||t.display.input.reset()},!0),e("dragDrop",!0,ml),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,so,!0),e("singleCursorHeightPerLine",!0,so,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,vo,!0),e("addModeClass",!1,vo,!0),e("pollInterval",100),e("undoDepth",200,function(t,n){return t.doc.history.undoDepth=n}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,vo,!0),e("moveInputWithCursor",!0,function(t,n){n||t.display.input.resetPosition()}),e("tabindex",null,function(t,n){return t.display.input.getField().tabIndex=n||""}),e("autofocus",null),e("direction","ltr",function(t,n){return t.doc.setDirection(n)},!0),e("phrases",null)}(ht),function As(r){var o=r.optionHandlers,e=r.helpers={};r.prototype={constructor:r,focus:function(){V(this).focus(),this.display.input.focus()},setOption:function(t,n){var i=this.options,l=i[t];i[t]==n&&"mode"!=t||(i[t]=n,o.hasOwnProperty(t)&&Bt(this,o[t])(this,n,l),Ve(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,n){this.state.keyMaps[n?"push":"unshift"](Lo(t))},removeKeyMap:function(t){for(var n=this.state.keyMaps,i=0;i<n.length;++i)if(n[i]==t||n[i].name==t)return n.splice(i,1),!0},addOverlay:et(function(t,n){var i=t.token?t:r.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");(function I(r,o,e){for(var t=0,n=e(o);t<r.length&&e(r[t])<=n;)t++;r.splice(t,0,o)})(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(l){return l.priority}),this.state.modeGen++,Dt(this)}),removeOverlay:et(function(t){for(var n=this.state.overlays,i=0;i<n.length;++i){var l=n[i].modeSpec;if(l==t||"string"==typeof t&&l.name==t)return n.splice(i,1),this.state.modeGen++,void Dt(this)}}),indentLine:et(function(t,n,i){"string"!=typeof n&&"number"!=typeof n&&(n=null==n?this.options.smartIndent?"smart":"prev":n?"add":"subtract"),p(this.doc,t)&&Oo(this,t,n,i)}),indentSelection:et(function(t){for(var n=this.doc.sel.ranges,i=-1,l=0;l<n.length;l++){var a=n[l];if(a.empty())a.head.line>i&&(Oo(this,a.head.line,t,!0),i=a.head.line,l==this.doc.sel.primIndex&&Mn(this));else{var s=a.from(),u=a.to(),f=Math.max(i,s.line);i=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var c=f;c<i;++c)Oo(this,c,t);var h=this.doc.sel.ranges;0==s.ch&&n.length==h.length&&h[l].from().ch>0&&Fi(this.doc,l,new qe(s,h[l].to()),ae)}}}),getTokenAt:function(t,n){return Bo(this,t,n)},getLineTokens:function(t,n){return Bo(this,C(t),n,!0)},getTokenTypeAt:function(t){t=ve(this.doc,t);var s,n=Fr(this,ie(this.doc,t.line)),i=0,l=(n.length-1)/2,a=t.ch;if(0==a)s=n[2];else for(;;){var u=i+l>>1;if((u?n[2*u-1]:0)>=a)l=u;else{if(!(n[2*u+1]<a)){s=n[2*u+2];break}i=u+1}}var f=s?s.indexOf("overlay "):-1;return f<0?s:0==f?null:s.slice(0,f-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?r.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(t,n){return this.getHelpers(t,n)[0]},getHelpers:function(t,n){var i=[];if(!e.hasOwnProperty(n))return i;var l=e[n],a=this.getModeAt(t);if("string"==typeof a[n])l[a[n]]&&i.push(l[a[n]]);else if(a[n])for(var s=0;s<a[n].length;s++){var u=l[a[n][s]];u&&i.push(u)}else a.helperType&&l[a.helperType]?i.push(l[a.helperType]):l[a.name]&&i.push(l[a.name]);for(var f=0;f<l._global.length;f++){var c=l._global[f];c.pred(a,this)&&-1==D(i,c.val)&&i.push(c.val)}return i},getStateAfter:function(t,n){var i=this.doc;return gi(this,(t=Vt(i,t??i.first+i.size-1))+1,n).state},cursorCoords:function(t,n){var l=this.doc.sel.primary();return Cr(this,null==t?l.head:"object"==typeof t?ve(this.doc,t):t?l.from():l.to(),n||"page")},charCoords:function(t,n){return qn(this,ve(this.doc,t),n||"page")},coordsChar:function(t,n){return jo(this,(t=Xo(this,t,n||"page")).left,t.top)},lineAtHeight:function(t,n){return t=Xo(this,{top:t,left:0},n||"page").top,It(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,n,i){var a,l=!1;if("number"==typeof t){var s=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>s&&(t=s,l=!0),a=ie(this.doc,t)}else a=t;return io(this,a,{top:0,left:0},n||"page",i||l).top+(l?this.doc.height-$t(a):0)},defaultTextHeight:function(){return Ti(this.display)},defaultCharWidth:function(){return Sr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,n,i,l,a){var s=this.display,u=(t=Cr(this,ve(this.doc,t))).bottom,f=t.left;if(n.style.position="absolute",n.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(n),s.sizer.appendChild(n),"over"==l)u=t.top;else if("above"==l||"near"==l){var c=Math.max(s.wrapper.clientHeight,this.doc.height),h=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==l||t.bottom+n.offsetHeight>c)&&t.top>n.offsetHeight?u=t.top-n.offsetHeight:t.bottom+n.offsetHeight<=c&&(u=t.bottom),f+n.offsetWidth>h&&(f=h-n.offsetWidth)}n.style.top=u+"px",n.style.left=n.style.right="","right"==a?(f=s.sizer.clientWidth-n.offsetWidth,n.style.right="0px"):("left"==a?f=0:"middle"==a&&(f=(s.sizer.clientWidth-n.offsetWidth)/2),n.style.left=f+"px"),i&&function Us(r,o){var e=Rl(r,o);null!=e.scrollTop&&Dn(r,e.scrollTop),null!=e.scrollLeft&&_r(r,e.scrollLeft)}(this,{left:f,top:u,right:f+n.offsetWidth,bottom:u+n.offsetHeight})},triggerOnKeyDown:et(bs),triggerOnKeyPress:et(ws),triggerOnKeyUp:da,triggerOnMouseDown:et(Ui),execCommand:function(t){if(ui.hasOwnProperty(t))return ui[t].call(null,this)},triggerElectric:et(function(t){yl(this,t)}),findPosH:function(t,n,i,l){var a=1;n<0&&(a=-1,n=-n);for(var s=ve(this.doc,t),u=0;u<n&&!(s=bl(this.doc,s,a,i,l)).hitSide;++u);return s},moveH:et(function(t,n){var i=this;this.extendSelectionsBy(function(l){return i.display.shift||i.doc.extend||l.empty()?bl(i.doc,l.head,t,n,i.options.rtlMoveVisually):t<0?l.from():l.to()},yt)}),deleteH:et(function(t,n){var l=this.doc;this.doc.sel.somethingSelected()?l.replaceSelection("",null,"+delete"):si(this,function(a){var s=bl(l,a.head,t,n,!1);return t<0?{from:s,to:a.head}:{from:a.head,to:s}})}),findPosV:function(t,n,i,l){var a=1,s=l;n<0&&(a=-1,n=-n);for(var u=ve(this.doc,t),f=0;f<n;++f){var c=Cr(this,u,"div");if(null==s?s=c.left:c.left=s,(u=Ds(this,c,a,i)).hitSide)break}return u},moveV:et(function(t,n){var i=this,l=this.doc,a=[],s=!this.display.shift&&!l.extend&&l.sel.somethingSelected();if(l.extendSelectionsBy(function(f){if(s)return t<0?f.from():f.to();var c=Cr(i,f.head,"div");null!=f.goalColumn&&(c.left=f.goalColumn),a.push(c.left);var h=Ds(i,c,t,n);return"page"==n&&f==l.sel.primary()&&zl(i,qn(i,h,"div").top-c.top),h},yt),a.length)for(var u=0;u<l.sel.ranges.length;u++)l.sel.ranges[u].goalColumn=a[u]}),findWordAt:function(t){var i=ie(this.doc,t.line).text,l=t.ch,a=t.ch;if(i){var s=this.getHelper(t,"wordChars");"before"!=t.sticky&&a!=i.length||!l?++a:--l;for(var u=i.charAt(l),f=Te(u,s)?function(c){return Te(c,s)}:/\s/.test(u)?function(c){return/\s/.test(c)}:function(c){return!/\s/.test(c)&&!Te(c)};l>0&&f(i.charAt(l-1));)--l;for(;a<i.length&&f(i.charAt(a));)++a}return new qe(C(t.line,l),C(t.line,a))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?te(this.display.cursorDiv,"CodeMirror-overwrite"):Nt(this.display.cursorDiv,"CodeMirror-overwrite"),Ve(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==P(S(this))},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:et(function(t,n){jn(this,t,n)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-xr(this)-this.display.barHeight,width:t.scrollWidth-xr(this)-this.display.barWidth,clientHeight:br(this),clientWidth:wn(this)}},scrollIntoView:et(function(t,n){null==t?(t={from:this.doc.sel.primary().head,to:null},null==n&&(n=this.options.cursorScrollMargin)):"number"==typeof t?t={from:C(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=n||0,null!=t.from.line?function Di(r,o){An(r),r.curOp.scrollToPos=o}(this,t):Ja(this,t.from,t.to,t.margin)}),setSize:et(function(t,n){var i=this,l=function(s){return"number"==typeof s||/^\d+$/.test(String(s))?s+"px":s};null!=t&&(this.display.wrapper.style.width=l(t)),null!=n&&(this.display.wrapper.style.height=l(n)),this.options.lineWrapping&&Ka(this);var a=this.display.viewFrom;this.doc.iter(a,this.display.viewTo,function(s){if(s.widgets)for(var u=0;u<s.widgets.length;u++)if(s.widgets[u].noHScroll){sr(i,a,"widget");break}++a}),this.curOp.forceUpdate=!0,Ve(this,"refresh",this)}),operation:function(t){return ur(this,t)},startOperation:function(){return Nn(this)},endOperation:function(){return Qn(this)},refresh:et(function(){var t=this.display.cachedTextHeight;Dt(this),this.curOp.forceUpdate=!0,ki(this),jn(this,this.doc.scrollLeft,this.doc.scrollTop),ho(this.display),(null==t||Math.abs(t-Ti(this.display))>.5||this.options.lineWrapping)&&lo(this),Ve(this,"refresh",this)}),swapDoc:et(function(t){var n=this.doc;return n.cm=null,this.state.selectingText&&this.state.selectingText(),sl(this,t),ki(this),this.display.input.reset(),jn(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,Pt(this,"swapDoc",this,n),n}),phrase:function(t){var n=this.options.phrases;return n&&Object.prototype.hasOwnProperty.call(n,t)?n[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Zt(r),r.registerHelper=function(t,n,i){e.hasOwnProperty(t)||(e[t]=r[t]={_global:[]}),e[t][n]=i},r.registerGlobalHelper=function(t,n,i,l){r.registerHelper(t,n,l),e[t]._global.push({pred:i,val:l})}}(ht);var uu="iter insert remove copy getEditor constructor".split(" ");for(var wl in rr.prototype)rr.prototype.hasOwnProperty(wl)&&D(uu,wl)<0&&(ht.prototype[wl]=function(r){return function(){return r.apply(this.doc,arguments)}}(rr.prototype[wl]));return Zt(rr),ht.inputStyles={textarea:dt,contenteditable:Ze},ht.defineMode=function(r){!ht.defaults.mode&&"null"!=r&&(ht.defaults.mode=r),pi.apply(this,arguments)},ht.defineMIME=function Dr(r,o){yn[r]=o},ht.defineMode("null",function(){return{token:function(r){return r.skipToEnd()}}}),ht.defineMIME("text/plain","null"),ht.defineExtension=function(r,o){ht.prototype[r]=o},ht.defineDocExtension=function(r,o){rr.prototype[r]=o},ht.fromTextArea=function su(r,o){if((o=o?U(o):{}).value=r.value,!o.tabindex&&r.tabIndex&&(o.tabindex=r.tabIndex),!o.placeholder&&r.placeholder&&(o.placeholder=r.placeholder),null==o.autofocus){var e=P(v(r));o.autofocus=e==r||null!=r.getAttribute("autofocus")&&e==document.body}function t(){r.value=a.getValue()}var n;if(r.form&&(Z(r.form,"submit",t),!o.leaveSubmitMethodAlone)){var i=r.form;n=i.submit;try{var l=i.submit=function(){t(),i.submit=n,i.submit(),i.submit=l}}catch{}}o.finishInit=function(s){s.save=t,s.getTextArea=function(){return r},s.toTextArea=function(){s.toTextArea=isNaN,t(),r.parentNode.removeChild(s.getWrapperElement()),r.style.display="",r.form&&(ne(r.form,"submit",t),!o.leaveSubmitMethodAlone&&"function"==typeof r.form.submit&&(r.form.submit=n))}},r.style.display="none";var a=ht(function(s){return r.parentNode.insertBefore(s,r.nextSibling)},o);return a},function kt(r){r.off=ne,r.on=Z,r.wheelEventPixels=rn,r.Doc=rr,r.splitLines=_n,r.countColumn=Q,r.findColumn=er,r.isWordChar=re,r.Pass=_,r.signal=Ve,r.Line=Qr,r.changeEnd=zt,r.scrollbarModel=Jn,r.Pos=C,r.cmpPos=F,r.modes=cr,r.mimeModes=yn,r.resolveMode=lr,r.getMode=Xr,r.modeExtensions=Nr,r.extendMode=vi,r.copyState=ar,r.startState=Or,r.innerMode=xn,r.commands=ui,r.keyMap=Tr,r.keyName=ua,r.isModifierKey=vs,r.lookupKey=_i,r.normalizeKeyMap=hn,r.StringStream=ct,r.SharedTextMarker=Lr,r.TextMarker=Wn,r.LineWidget=fn,r.e_preventDefault=ot,r.e_stopPropagation=mr,r.e_stop=zr,r.addClass=te,r.contains=q,r.rmClass=Nt,r.keyNames=Hn}(ht),ht.version="5.65.17",ht}()},4166:(hi,pt,xe)=>{!function(j){"use strict";j.defineMode("javascript",function(Ye,G){var ft,ut,ue=Ye.indentUnit,$=G.statementIndent,K=G.jsonld,B=G.json||K,Le=!1!==G.trackScope,ce=G.typescript,Ue=G.wordCharacters||/[\w$\xa1-\uffff]/,we=function(){function p(Ct){return{type:Ct,style:"keyword"}}var b=p("keyword a"),C=p("keyword b"),F=p("keyword c"),O=p("keyword d"),X=p("operator"),We={type:"atom",style:"atom"};return{if:p("if"),while:b,with:b,else:C,do:C,try:C,finally:C,return:O,break:O,continue:O,new:p("new"),delete:F,void:F,throw:F,debugger:p("debugger"),var:p("var"),const:p("var"),let:p("var"),function:p("function"),catch:p("catch"),for:p("for"),switch:p("switch"),case:p("case"),default:p("default"),in:X,typeof:X,instanceof:X,true:We,false:We,null:We,undefined:We,NaN:We,Infinity:We,this:p("this"),class:p("class"),super:p("atom"),yield:F,export:p("export"),import:p("import"),extends:F,await:F}}(),de=/[+\-*&%=<>!?|~^@]/,Se=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function he(p,b,C){return ft=p,ut=C,b}function je(p,b){var C=p.next();if('"'==C||"'"==C)return b.tokenize=function jt(p){return function(b,C){var O,F=!1;if(K&&"@"==b.peek()&&b.match(Se))return C.tokenize=je,he("jsonld-keyword","meta");for(;null!=(O=b.next())&&(O!=p||F);)F=!F&&"\\"==O;return F||(C.tokenize=je),he("string","string")}}(C),b.tokenize(p,b);if("."==C&&p.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return he("number","number");if("."==C&&p.match(".."))return he("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(C))return he(C);if("="==C&&p.eat(">"))return he("=>","operator");if("0"==C&&p.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return he("number","number");if(/\d/.test(C))return p.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),he("number","number");if("/"==C)return p.eat("*")?(b.tokenize=Jt,Jt(p,b)):p.eat("/")?(p.skipToEnd(),he("comment","comment")):It(p,b,1)?(function Xe(p){for(var C,b=!1,F=!1;null!=(C=p.next());){if(!b){if("/"==C&&!F)return;"["==C?F=!0:F&&"]"==C&&(F=!1)}b=!b&&"\\"==C}}(p),p.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),he("regexp","string-2")):(p.eat("="),he("operator","operator",p.current()));if("`"==C)return b.tokenize=rt,rt(p,b);if("#"==C&&"!"==p.peek())return p.skipToEnd(),he("meta","meta");if("#"==C&&p.eatWhile(Ue))return he("variable","property");if("<"==C&&p.match("!--")||"-"==C&&p.match("->")&&!/\S/.test(p.string.slice(0,p.start)))return p.skipToEnd(),he("comment","comment");if(de.test(C))return(">"!=C||!b.lexical||">"!=b.lexical.type)&&(p.eat("=")?("!"==C||"="==C)&&p.eat("="):/[<>*+\-|&?]/.test(C)&&(p.eat(C),">"==C&&p.eat(C))),"?"==C&&p.eat(".")?he("."):he("operator","operator",p.current());if(Ue.test(C)){p.eatWhile(Ue);var F=p.current();if("."!=b.lastType){if(we.propertyIsEnumerable(F)){var O=we[F];return he(O.type,O.style,F)}if("async"==F&&p.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return he("async","keyword",F)}return he("variable","variable",F)}}function Jt(p,b){for(var F,C=!1;F=p.next();){if("/"==F&&C){b.tokenize=je;break}C="*"==F}return he("comment","comment")}function rt(p,b){for(var F,C=!1;null!=(F=p.next());){if(!C&&("`"==F||"$"==F&&p.eat("{"))){b.tokenize=je;break}C=!C&&"\\"==F}return he("quasi","string-2",p.current())}var y="([{}])";function vt(p,b){b.fatArrowAt&&(b.fatArrowAt=null);var C=p.string.indexOf("=>",p.start);if(!(C<0)){if(ce){var F=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(p.string.slice(p.start,C));F&&(C=F.index)}for(var O=0,X=!1,We=C-1;We>=0;--We){var Ct=p.string.charAt(We),Vt=y.indexOf(Ct);if(Vt>=0&&Vt<3){if(!O){++We;break}if(0==--O){"("==Ct&&(X=!0);break}}else if(Vt>=3&&Vt<6)++O;else if(Ue.test(Ct))X=!0;else if(/["'\/`]/.test(Ct))for(;;--We){if(0==We)return;if(p.string.charAt(We-1)==Ct&&"\\"!=p.string.charAt(We-2)){We--;break}}else if(X&&!O){++We;break}}X&&!O&&(b.fatArrowAt=We)}}var Pe={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Nt(p,b,C,F,O,X){this.indented=p,this.column=b,this.type=C,this.prev=O,this.info=X,null!=F&&(this.align=F)}function se(p,b){if(!Le)return!1;for(var C=p.localVars;C;C=C.next)if(C.name==b)return!0;for(var F=p.context;F;F=F.prev)for(C=F.vars;C;C=C.next)if(C.name==b)return!0}function Je(p,b,C,F,O){var X=p.cc;for(T.state=p,T.stream=O,T.marked=null,T.cc=X,T.style=b,p.lexical.hasOwnProperty("align")||(p.lexical.align=!0);;)if((X.length?X.pop():B?_:D)(C,F)){for(;X.length&&X[X.length-1].lex;)X.pop()();return T.marked?T.marked:"variable"==C&&se(p,F)?"variable-2":b}}var T={state:null,column:null,marked:null,cc:null};function ee(){for(var p=arguments.length-1;p>=0;p--)T.cc.push(arguments[p])}function x(){return ee.apply(null,arguments),!0}function q(p,b){for(var C=b;C;C=C.next)if(C.name==p)return!0;return!1}function P(p){var b=T.state;if(T.marked="def",Le){if(b.context)if("var"==b.lexical.info&&b.context&&b.context.block){var C=te(p,b.context);if(null!=C)return void(b.context=C)}else if(!q(p,b.localVars))return void(b.localVars=new gt(p,b.localVars));G.globalVars&&!q(p,b.globalVars)&&(b.globalVars=new gt(p,b.globalVars))}}function te(p,b){if(b){if(b.block){var C=te(p,b.prev);return C?C==b.prev?b:new nt(C,b.vars,!0):null}return q(p,b.vars)?b:new nt(b.prev,new gt(p,b.vars),!1)}return null}function J(p){return"public"==p||"private"==p||"protected"==p||"abstract"==p||"readonly"==p}function nt(p,b,C){this.prev=p,this.vars=b,this.block=C}function gt(p,b){this.name=p,this.next=b}var S=new gt("this",new gt("arguments",null));function v(){T.state.context=new nt(T.state.context,T.state.localVars,!1),T.state.localVars=S}function V(){T.state.context=new nt(T.state.context,T.state.localVars,!0),T.state.localVars=null}function be(){T.state.localVars=T.state.context.vars,T.state.context=T.state.context.prev}function U(p,b){var C=function(){var F=T.state,O=F.indented;if("stat"==F.lexical.type)O=F.lexical.indented;else for(var X=F.lexical;X&&")"==X.type&&X.align;X=X.prev)O=X.indented;F.lexical=new Nt(O,T.stream.column(),p,null,F.lexical,b)};return C.lex=!0,C}function Q(){var p=T.state;p.lexical.prev&&(")"==p.lexical.type&&(p.indented=p.lexical.indented),p.lexical=p.lexical.prev)}function N(p){return function b(C){return C==p?x():";"==p||"}"==C||")"==C||"]"==C?ee():x(b)}}function D(p,b){return"var"==p?x(U("vardef",b),zr,N(";"),Q):"keyword a"==p?x(U("form"),Ce,D,Q):"keyword b"==p?x(U("form"),D,Q):"keyword d"==p?T.stream.match(/^\s*$/,!1)?x():x(U("stat"),er,N(";"),Q):"debugger"==p?x(N(";")):"{"==p?x(U("}"),V,it,Q,be):";"==p?x():"if"==p?("else"==T.state.lexical.info&&T.state.cc[T.state.cc.length-1]==Q&&T.state.cc.pop()(),x(U("form"),Ce,D,Q,gn)):"function"==p?x(yr):"for"==p?x(U("form"),V,Wo,D,be,Q):"class"==p||ce&&"interface"==b?(T.marked="keyword",x(U("form","class"==p?p:b),pi,Q)):"variable"==p?ce&&"declare"==b?(T.marked="keyword",x(D)):ce&&("module"==b||"enum"==b||"type"==b)&&T.stream.match(/^\s*\w/,!1)?(T.marked="keyword","enum"==b?x(oe):"type"==b?x(Ho,N("operator"),Z,N(";")):x(U("form"),Kt,N("{"),U("}"),it,Q,Q)):ce&&"namespace"==b?(T.marked="keyword",x(U("form"),_,D,Q)):ce&&"abstract"==b?(T.marked="keyword",x(D)):x(U("stat"),Te):"switch"==p?x(U("form"),Ce,N("{"),U("}","switch"),V,it,Q,Q,be):"case"==p?x(_,N(":")):"default"==p?x(N(":")):"catch"==p?x(U("form"),v,le,D,Q,be):"export"==p?x(U("stat"),Nr,Q):"import"==p?x(U("stat"),ar,Q):"async"==p?x(D):"@"==b?x(_,D):ee(U("stat"),_,N(";"),Q)}function le(p){if("("==p)return x(cr,N(")"))}function _(p,b){return yt(p,b,!1)}function ae(p,b){return yt(p,b,!0)}function Ce(p){return"("!=p?ee():x(U(")"),er,N(")"),Q)}function yt(p,b,C){if(T.state.fatArrowAt==T.stream.start){var F=C?pe:I;if("("==p)return x(v,U(")"),Ee(cr,")"),Q,N("=>"),F,be);if("variable"==p)return ee(v,Kt,N("=>"),F,be)}var O=C?At:wt;return Pe.hasOwnProperty(p)?x(O):"function"==p?x(yr,O):"class"==p||ce&&"interface"==b?(T.marked="keyword",x(U("form"),yn,Q)):"keyword c"==p||"async"==p?x(C?ae:_):"("==p?x(U(")"),er,N(")"),Q,O):"operator"==p||"spread"==p?x(C?ae:_):"["==p?x(U("]"),$e,Q,O):"{"==p?Wt(qt,"}",null,O):"quasi"==p?ee(me,O):"new"==p?x(function L(p){return function(b){return"."==b?x(p?re:R):"variable"==b&&ce?x(ot,p?At:wt):ee(p?ae:_)}}(C)):x()}function er(p){return p.match(/[;\}\)\],]/)?ee():ee(_)}function wt(p,b){return","==p?x(er):At(p,b,!1)}function At(p,b,C){var F=0==C?wt:At,O=0==C?_:ae;if("=>"==p)return x(v,C?pe:I,be);if("operator"==p)return/\+\+|--/.test(b)||ce&&"!"==b?x(F):ce&&"<"==b&&T.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?x(U(">"),Ee(Z,">"),Q,F):"?"==b?x(_,N(":"),O):x(O);if("quasi"==p)return ee(me,F);if(";"!=p){if("("==p)return Wt(ae,")","call",F);if("."==p)return x(Ge,F);if("["==p)return x(U("]"),er,N("]"),Q,F);if(ce&&"as"==b)return T.marked="keyword",x(Z,F);if("regexp"==p)return T.state.lastType=T.marked="operator",T.stream.backUp(T.stream.pos-T.stream.start-1),x(O)}}function me(p,b){return"quasi"!=p?ee():"${"!=b.slice(b.length-2)?x(me):x(er,tr)}function tr(p){if("}"==p)return T.marked="string-2",T.state.tokenize=rt,x(me)}function I(p){return vt(T.stream,T.state),ee("{"==p?D:_)}function pe(p){return vt(T.stream,T.state),ee("{"==p?D:ae)}function R(p,b){if("target"==b)return T.marked="keyword",x(wt)}function re(p,b){if("target"==b)return T.marked="keyword",x(At)}function Te(p){return":"==p?x(Q,D):ee(wt,N(";"),Q)}function Ge(p){if("variable"==p)return T.marked="property",x()}function qt(p,b){return"async"==p?(T.marked="property",x(qt)):"variable"==p||"keyword"==T.style?(T.marked="property","get"==b||"set"==b?x(or):(ce&&T.state.fatArrowAt==T.stream.start&&(C=T.stream.match(/^\s*:\s*/,!1))&&(T.state.fatArrowAt=T.stream.pos+C[0].length),x(Ot))):"number"==p||"string"==p?(T.marked=K?"property":T.style+" property",x(Ot)):"jsonld-keyword"==p?x(Ot):ce&&J(b)?(T.marked="keyword",x(qt)):"["==p?x(_,xt,N("]"),Ot):"spread"==p?x(ae,Ot):"*"==b?(T.marked="keyword",x(qt)):":"==p?ee(Ot):void 0;var C}function or(p){return"variable"!=p?ee(Ot):(T.marked="property",x(yr))}function Ot(p){return":"==p?x(ae):"("==p?ee(yr):void 0}function Ee(p,b,C){function F(O,X){if(C?C.indexOf(O)>-1:","==O){var We=T.state.lexical;return"call"==We.info&&(We.pos=(We.pos||0)+1),x(function(Ct,Vt){return Ct==b||Vt==b?ee():ee(p)},F)}return O==b||X==b?x():C&&C.indexOf(";")>-1?ee(p):x(N(b))}return function(O,X){return O==b||X==b?x():ee(p,F)}}function Wt(p,b,C){for(var F=3;F<arguments.length;F++)T.cc.push(arguments[F]);return x(U(b,C),Ee(p,b),Q)}function it(p){return"}"==p?x():ee(D,it)}function xt(p,b){if(ce){if(":"==p)return x(Z);if("?"==b)return x(xt)}}function Bn(p,b){if(ce&&(":"==p||"in"==b))return x(Z)}function Qt(p){if(ce&&":"==p)return T.stream.match(/^\s*\w+\s+is\b/,!1)?x(_,Fo,Z):x(Z)}function Fo(p,b){if("is"==b)return T.marked="keyword",x()}function Z(p,b){return"keyof"==b||"typeof"==b||"infer"==b||"readonly"==b?(T.marked="keyword",x("typeof"==b?ae:Z)):"variable"==p||"void"==b?(T.marked="type",x(Zt)):"|"==b||"&"==b?x(Z):"string"==p||"number"==p||"atom"==p?x(Zt):"["==p?x(U("]"),Ee(Z,"]",","),Q,Zt):"{"==p?x(U("}"),ne,Q,Zt):"("==p?x(Ee(Be,")"),di,Zt):"<"==p?x(Ee(Z,">"),Z):"quasi"==p?ee(Fe,Zt):void 0}function di(p){if("=>"==p)return x(Z)}function ne(p){return p.match(/[\}\)\]]/)?x():","==p||";"==p?x(ne):ee(Ve,ne)}function Ve(p,b){return"variable"==p||"keyword"==T.style?(T.marked="property",x(Ve)):"?"==b||"number"==p||"string"==p?x(Ve):":"==p?x(Z):"["==p?x(N("variable"),Bn,N("]"),Ve):"("==p?ee(Ur,Ve):p.match(/[;\}\)\],]/)?void 0:x()}function Fe(p,b){return"quasi"!=p?ee():"${"!=b.slice(b.length-2)?x(Fe):x(Z,mt)}function mt(p){if("}"==p)return T.marked="string-2",T.state.tokenize=rt,x(Fe)}function Be(p,b){return"variable"==p&&T.stream.match(/^\s*[?:]/,!1)||"?"==b?x(Be):":"==p?x(Z):"spread"==p?x(Be):ee(Z)}function Zt(p,b){return"<"==b?x(U(">"),Ee(Z,">"),Q,Zt):"|"==b||"."==p||"&"==b?x(Z):"["==p?x(Z,N("]"),Zt):"extends"==b||"implements"==b?(T.marked="keyword",x(Z)):"?"==b?x(Z,N(":"),Z):void 0}function ot(p,b){if("<"==b)return x(U(">"),Ee(Z,">"),Q,Zt)}function mr(){return ee(Z,Ht)}function Ht(p,b){if("="==b)return x(Z)}function zr(p,b){return"enum"==b?(T.marked="keyword",x(oe)):ee(Kt,xt,fr,Sl)}function Kt(p,b){return ce&&J(b)?(T.marked="keyword",x(Kt)):"variable"==p?(P(b),x()):"spread"==p?x(Kt):"["==p?Wt(qi,"]"):"{"==p?Wt(Yr,"}"):void 0}function Yr(p,b){return"variable"!=p||T.stream.match(/^\s*:/,!1)?("variable"==p&&(T.marked="property"),"spread"==p?x(Kt):"}"==p?ee():"["==p?x(_,N("]"),N(":"),Yr):x(N(":"),Kt,fr)):(P(b),x(fr))}function qi(){return ee(Kt,fr)}function fr(p,b){if("="==b)return x(ae)}function Sl(p){if(","==p)return x(zr)}function gn(p,b){if("keyword b"==p&&"else"==b)return x(U("form","else"),D,Q)}function Wo(p,b){return"await"==b?x(Wo):"("==p?x(U(")"),_n,Q):void 0}function _n(p){return"var"==p?x(zr,mn):"variable"==p?x(mn):ee(mn)}function mn(p,b){return")"==p?x():";"==p?x(mn):"in"==b||"of"==b?(T.marked="keyword",x(_,mn)):ee(_,mn)}function yr(p,b){return"*"==b?(T.marked="keyword",x(yr)):"variable"==p?(P(b),x(yr)):"("==p?x(v,U(")"),Ee(cr,")"),Q,Qt,D,be):ce&&"<"==b?x(U(">"),Ee(mr,">"),Q,yr):void 0}function Ur(p,b){return"*"==b?(T.marked="keyword",x(Ur)):"variable"==p?(P(b),x(Ur)):"("==p?x(v,U(")"),Ee(cr,")"),Q,Qt,be):ce&&"<"==b?x(U(">"),Ee(mr,">"),Q,Ur):void 0}function Ho(p,b){return"keyword"==p||"variable"==p?(T.marked="type",x(Ho)):"<"==b?x(U(">"),Ee(mr,">"),Q):void 0}function cr(p,b){return"@"==b&&x(_,cr),"spread"==p?x(cr):ce&&J(b)?(T.marked="keyword",x(cr)):ce&&"this"==p?x(xt,fr):ee(Kt,xt,fr)}function yn(p,b){return"variable"==p?pi(p,b):Dr(p,b)}function pi(p,b){if("variable"==p)return P(b),x(Dr)}function Dr(p,b){return"<"==b?x(U(">"),Ee(mr,">"),Q,Dr):"extends"==b||"implements"==b||ce&&","==p?("implements"==b&&(T.marked="keyword"),x(ce?Z:_,Dr)):"{"==p?x(U("}"),lr,Q):void 0}function lr(p,b){return"async"==p||"variable"==p&&("static"==b||"get"==b||"set"==b||ce&&J(b))&&T.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1)?(T.marked="keyword",x(lr)):"variable"==p||"keyword"==T.style?(T.marked="property",x(Xr,lr)):"number"==p||"string"==p?x(Xr,lr):"["==p?x(_,xt,N("]"),Xr,lr):"*"==b?(T.marked="keyword",x(lr)):ce&&"("==p?ee(Ur,lr):";"==p||","==p?x(lr):"}"==p?x():"@"==b?x(_,lr):void 0}function Xr(p,b){if("!"==b||"?"==b)return x(Xr);if(":"==p)return x(Z,fr);if("="==b)return x(ae);var C=T.state.lexical.prev;return ee(C&&"interface"==C.info?Ur:yr)}function Nr(p,b){return"*"==b?(T.marked="keyword",x(ie,N(";"))):"default"==b?(T.marked="keyword",x(_,N(";"))):"{"==p?x(Ee(vi,"}"),ie,N(";")):ee(D)}function vi(p,b){return"as"==b?(T.marked="keyword",x(N("variable"))):"variable"==p?ee(ae,vi):void 0}function ar(p){return"string"==p?x():"("==p?ee(_):"."==p?ee(wt):ee(xn,Or,ie)}function xn(p,b){return"{"==p?Wt(xn,"}"):("variable"==p&&P(b),"*"==b&&(T.marked="keyword"),x(ct))}function Or(p){if(","==p)return x(xn,Or)}function ct(p,b){if("as"==b)return T.marked="keyword",x(xn)}function ie(p,b){if("from"==b)return T.marked="keyword",x(_)}function $e(p){return"]"==p?x():ee(Ee(ae,"]"))}function oe(){return ee(U("form"),Kt,N("{"),U("}"),Ee(Rt,"}"),Q,Q)}function Rt(){return ee(Kt,fr)}function It(p,b,C){return b.tokenize==je&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(p.string.slice(0,p.pos-(C||0)))}return v.lex=V.lex=!0,be.lex=!0,Q.lex=!0,{startState:function(p){var b={tokenize:je,lastType:"sof",cc:[],lexical:new Nt((p||0)-ue,0,"block",!1),localVars:G.localVars,context:G.localVars&&new nt(null,null,!1),indented:p||0};return G.globalVars&&"object"==typeof G.globalVars&&(b.globalVars=G.globalVars),b},token:function(p,b){if(p.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=p.indentation(),vt(p,b)),b.tokenize!=Jt&&p.eatSpace())return null;var C=b.tokenize(p,b);return"comment"==ft?C:(b.lastType="operator"!=ft||"++"!=ut&&"--"!=ut?ft:"incdec",Je(b,C,ft,ut,p))},indent:function(p,b){if(p.tokenize==Jt||p.tokenize==rt)return j.Pass;if(p.tokenize!=je)return 0;var O,C=b&&b.charAt(0),F=p.lexical;if(!/^\s*else\b/.test(b))for(var X=p.cc.length-1;X>=0;--X){var We=p.cc[X];if(We==Q)F=F.prev;else if(We!=gn&&We!=be)break}for(;("stat"==F.type||"form"==F.type)&&("}"==C||(O=p.cc[p.cc.length-1])&&(O==wt||O==At)&&!/^[,\.=+\-*:?[\(]/.test(b));)F=F.prev;$&&")"==F.type&&"stat"==F.prev.type&&(F=F.prev);var Ct=F.type,Vt=C==Ct;return"vardef"==Ct?F.indented+("operator"==p.lastType||","==p.lastType?F.info.length+1:0):"form"==Ct&&"{"==C?F.indented:"form"==Ct?F.indented+ue:"stat"==Ct?F.indented+(function _e(p,b){return"operator"==p.lastType||","==p.lastType||de.test(b.charAt(0))||/[,.]/.test(b.charAt(0))}(p,b)?$||ue:0):"switch"!=F.info||Vt||0==G.doubleIndentSwitch?F.align?F.column+(Vt?0:1):F.indented+(Vt?0:ue):F.indented+(/^(?:case|default)\b/.test(b)?ue:2*ue)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:B?null:"/*",blockCommentEnd:B?null:"*/",blockCommentContinue:B?null:" * ",lineComment:B?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:B?"json":"javascript",jsonldMode:K,jsonMode:B,expressionAllowed:It,skipExpression:function(p){Je(p,"atom","atom","true",new j.StringStream("",2,null))}}}),j.registerHelper("wordChars","javascript",/[\w$]/),j.defineMIME("text/javascript","javascript"),j.defineMIME("text/ecmascript","javascript"),j.defineMIME("application/javascript","javascript"),j.defineMIME("application/x-javascript","javascript"),j.defineMIME("application/ecmascript","javascript"),j.defineMIME("application/json",{name:"javascript",json:!0}),j.defineMIME("application/x-json",{name:"javascript",json:!0}),j.defineMIME("application/manifest+json",{name:"javascript",json:!0}),j.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),j.defineMIME("text/typescript",{name:"javascript",typescript:!0}),j.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(xe(8266))},521:(hi,pt,xe)=>{!function(j){"use strict";j.defineMode("markdown",function(Ye,G){var ue=j.getMode(Ye,"text/html"),$="null"==ue.name;void 0===G.highlightFormatting&&(G.highlightFormatting=!1),void 0===G.maxBlockquoteDepth&&(G.maxBlockquoteDepth=0),void 0===G.taskLists&&(G.taskLists=!1),void 0===G.strikethrough&&(G.strikethrough=!1),void 0===G.emoji&&(G.emoji=!1),void 0===G.fencedCodeBlockHighlighting&&(G.fencedCodeBlockHighlighting=!0),void 0===G.fencedCodeBlockDefaultMode&&(G.fencedCodeBlockDefaultMode="text/plain"),void 0===G.xml&&(G.xml=!0),void 0===G.tokenTypeOverrides&&(G.tokenTypeOverrides={});var B={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var Le in B)B.hasOwnProperty(Le)&&G.tokenTypeOverrides[Le]&&(B[Le]=G.tokenTypeOverrides[Le]);var ce=/^([*\-_])(?:\s*\1){2,}\s*$/,Ue=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,we=/^\[(x| )\](?=\s)/i,de=G.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,Se=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Xe=/^[^#!\[\]*_\\<>` "'(~:]+/,ft=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,ut=/^\s*\[[^\]]+?\]:.*$/,he=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/;function jt(S,v,V){return v.f=v.inline=V,V(S,v)}function Jt(S,v,V){return v.f=v.block=V,V(S,v)}function y(S){if(S.linkTitle=!1,S.linkHref=!1,S.linkText=!1,S.em=!1,S.strong=!1,S.strikethrough=!1,S.quote=0,S.indentedCode=!1,S.f==Pe){var v=$;if(!v){var V=j.innerMode(ue,S.htmlState);v="xml"==V.mode.name&&null===V.state.tagStart&&!V.state.context&&V.state.tokenize.isInText}v&&(S.f=T,S.block=vt,S.htmlState=null)}return S.trailingSpace=0,S.trailingSpaceNewLine=!1,S.prevLine=S.thisLine,S.thisLine={stream:null},null}function vt(S,v){var V=S.column()===v.indentation,be=function rt(S){return!S||!/\S/.test(S.string)}(v.prevLine.stream),U=v.indentedCode,Q=v.prevLine.hr,N=!1!==v.list,D=(v.listStack[v.listStack.length-1]||0)+3;v.indentedCode=!1;var le=v.indentation;if(null===v.indentationDiff&&(v.indentationDiff=v.indentation,N)){for(v.list=null;le<v.listStack[v.listStack.length-1];)v.listStack.pop(),v.listStack.length?v.indentation=v.listStack[v.listStack.length-1]:v.list=!1;!1!==v.list&&(v.indentationDiff=le-v.listStack[v.listStack.length-1])}var _=!(be||Q||v.prevLine.header||N&&U||v.prevLine.fencedCodeEnd),ae=(!1===v.list||Q||be)&&v.indentation<=D&&S.match(ce),Ce=null;if(v.indentationDiff>=4&&(U||v.prevLine.fencedCodeEnd||v.prevLine.header||be))return S.skipToEnd(),v.indentedCode=!0,B.code;if(S.eatSpace())return null;if(V&&v.indentation<=D&&(Ce=S.match(de))&&Ce[1].length<=6)return v.quote=0,v.header=Ce[1].length,v.thisLine.header=!0,G.highlightFormatting&&(v.formatting="header"),v.f=v.inline,se(v);if(v.indentation<=D&&S.eat(">"))return v.quote=V?1:v.quote+1,G.highlightFormatting&&(v.formatting="quote"),S.eatSpace(),se(v);if(!ae&&!v.setext&&V&&v.indentation<=D&&(Ce=S.match(Ue))){var yt=Ce[1]?"ol":"ul";return v.indentation=le+S.current().length,v.list=!0,v.quote=0,v.listStack.push(v.indentation),v.em=!1,v.strong=!1,v.code=!1,v.strikethrough=!1,G.taskLists&&S.match(we,!1)&&(v.taskList=!0),v.f=v.inline,G.highlightFormatting&&(v.formatting=["list","list-"+yt]),se(v)}return V&&v.indentation<=D&&(Ce=S.match(ft,!0))?(v.quote=0,v.fencedEndRE=new RegExp(Ce[1]+"+ *$"),v.localMode=G.fencedCodeBlockHighlighting&&function K(S){if(j.findModeByName){var v=j.findModeByName(S);v&&(S=v.mime||v.mimes[0])}var V=j.getMode(Ye,S);return"null"==V.name?null:V}(Ce[2]||G.fencedCodeBlockDefaultMode),v.localMode&&(v.localState=j.startState(v.localMode)),v.f=v.block=Nt,G.highlightFormatting&&(v.formatting="code-block"),v.code=-1,se(v)):v.setext||!(_&&N||v.quote||!1!==v.list||v.code||ae||ut.test(S.string))&&(Ce=S.lookAhead(1))&&(Ce=Ce.match(Se))?(v.setext?(v.header=v.setext,v.setext=0,S.skipToEnd(),G.highlightFormatting&&(v.formatting="header")):(v.header="="==Ce[0].charAt(0)?1:2,v.setext=v.header),v.thisLine.header=!0,v.f=v.inline,se(v)):ae?(S.skipToEnd(),v.hr=!0,v.thisLine.hr=!0,B.hr):"["===S.peek()?jt(S,v,te):jt(S,v,v.inline)}function Pe(S,v){var V=ue.token(S,v.htmlState);if(!$){var be=j.innerMode(ue,v.htmlState);("xml"==be.mode.name&&null===be.state.tagStart&&!be.state.context&&be.state.tokenize.isInText||v.md_inside&&S.current().indexOf(">")>-1)&&(v.f=T,v.block=vt,v.htmlState=null)}return V}function Nt(S,v){var Q,V=v.listStack[v.listStack.length-1]||0,be=v.indentation<V;return v.fencedEndRE&&v.indentation<=V+3&&(be||S.match(v.fencedEndRE))?(G.highlightFormatting&&(v.formatting="code-block"),be||(Q=se(v)),v.localMode=v.localState=null,v.block=vt,v.f=T,v.fencedEndRE=null,v.code=0,v.thisLine.fencedCodeEnd=!0,be?Jt(S,v,v.block):Q):v.localMode?v.localMode.token(S,v.localState):(S.skipToEnd(),B.code)}function se(S){var v=[];if(S.formatting){v.push(B.formatting),"string"==typeof S.formatting&&(S.formatting=[S.formatting]);for(var V=0;V<S.formatting.length;V++)v.push(B.formatting+"-"+S.formatting[V]),"header"===S.formatting[V]&&v.push(B.formatting+"-"+S.formatting[V]+"-"+S.header),"quote"===S.formatting[V]&&v.push(!G.maxBlockquoteDepth||G.maxBlockquoteDepth>=S.quote?B.formatting+"-"+S.formatting[V]+"-"+S.quote:"error")}if(S.taskOpen)return v.push("meta"),v.length?v.join(" "):null;if(S.taskClosed)return v.push("property"),v.length?v.join(" "):null;if(S.linkHref?v.push(B.linkHref,"url"):(S.strong&&v.push(B.strong),S.em&&v.push(B.em),S.strikethrough&&v.push(B.strikethrough),S.emoji&&v.push(B.emoji),S.linkText&&v.push(B.linkText),S.code&&v.push(B.code),S.image&&v.push(B.image),S.imageAltText&&v.push(B.imageAltText,"link"),S.imageMarker&&v.push(B.imageMarker)),S.header&&v.push(B.header,B.header+"-"+S.header),S.quote&&(v.push(B.quote),v.push(!G.maxBlockquoteDepth||G.maxBlockquoteDepth>=S.quote?B.quote+"-"+S.quote:B.quote+"-"+G.maxBlockquoteDepth)),!1!==S.list){var be=(S.listStack.length-1)%3;v.push(be?1===be?B.list2:B.list3:B.list1)}return S.trailingSpaceNewLine?v.push("trailing-space-new-line"):S.trailingSpace&&v.push("trailing-space-"+(S.trailingSpace%2?"a":"b")),v.length?v.join(" "):null}function Je(S,v){if(S.match(Xe,!0))return se(v)}function T(S,v){var V=v.text(S,v);if(typeof V<"u")return V;if(v.list)return v.list=null,se(v);if(v.taskList)return" "===S.match(we,!0)[1]?v.taskOpen=!0:v.taskClosed=!0,G.highlightFormatting&&(v.formatting="task"),v.taskList=!1,se(v);if(v.taskOpen=!1,v.taskClosed=!1,v.header&&S.match(/^#+$/,!0))return G.highlightFormatting&&(v.formatting="header"),se(v);var U=S.next();if(v.linkTitle){v.linkTitle=!1;var Q=U;if("("===U&&(Q=")"),Q=(Q+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"),S.match(new RegExp("^\\s*(?:[^"+Q+"\\\\]+|\\\\\\\\|\\\\.)"+Q),!0))return B.linkHref}if("`"===U){var D=v.formatting;G.highlightFormatting&&(v.formatting="code"),S.eatWhile("`");var le=S.current().length;if(0==v.code&&(!v.quote||1==le))return v.code=le,se(v);if(le==v.code){var _=se(v);return v.code=0,_}return v.formatting=D,se(v)}if(v.code)return se(v);if("\\"===U&&(S.next(),G.highlightFormatting)){var ae=se(v),Ce=B.formatting+"-escape";return ae?ae+" "+Ce:Ce}if("!"===U&&S.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return v.imageMarker=!0,v.image=!0,G.highlightFormatting&&(v.formatting="image"),se(v);if("["===U&&v.imageMarker&&S.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return v.imageMarker=!1,v.imageAltText=!0,G.highlightFormatting&&(v.formatting="image"),se(v);if("]"===U&&v.imageAltText){G.highlightFormatting&&(v.formatting="image");ae=se(v);return v.imageAltText=!1,v.image=!1,v.inline=v.f=x,ae}if("["===U&&!v.image)return v.linkText&&S.match(/^.*?\]/)||(v.linkText=!0,G.highlightFormatting&&(v.formatting="link")),se(v);if("]"===U&&v.linkText){G.highlightFormatting&&(v.formatting="link");ae=se(v);return v.linkText=!1,v.inline=v.f=S.match(/\(.*?\)| ?\[.*?\]/,!1)?x:T,ae}if("<"===U&&S.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return v.f=v.inline=ee,G.highlightFormatting&&(v.formatting="link"),(ae=se(v))?ae+=" ":ae="",ae+B.linkInline;if("<"===U&&S.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return v.f=v.inline=ee,G.highlightFormatting&&(v.formatting="link"),(ae=se(v))?ae+=" ":ae="",ae+B.linkEmail;if(G.xml&&"<"===U&&S.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var yt=S.string.indexOf(">",S.pos);if(-1!=yt){var er=S.string.substring(S.start,yt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(er)&&(v.md_inside=!0)}return S.backUp(1),v.htmlState=j.startState(ue),Jt(S,v,Pe)}if(G.xml&&"<"===U&&S.match(/^\/\w*?>/))return v.md_inside=!1,"tag";if("*"===U||"_"===U){for(var wt=1,At=1==S.pos?" ":S.string.charAt(S.pos-2);wt<3&&S.eat(U);)wt++;var me=S.peek()||" ",tr=!/\s/.test(me)&&(!he.test(me)||/\s/.test(At)||he.test(At)),I=!/\s/.test(At)&&(!he.test(At)||/\s/.test(me)||he.test(me)),pe=null,L=null;if(wt%2&&(v.em||!tr||"*"!==U&&I&&!he.test(At)?v.em==U&&I&&("*"===U||!tr||he.test(me))&&(pe=!1):pe=!0),wt>1&&(v.strong||!tr||"*"!==U&&I&&!he.test(At)?v.strong==U&&I&&("*"===U||!tr||he.test(me))&&(L=!1):L=!0),null!=L||null!=pe)return G.highlightFormatting&&(v.formatting=null==pe?"strong":null==L?"em":"strong em"),!0===pe&&(v.em=U),!0===L&&(v.strong=U),_=se(v),!1===pe&&(v.em=!1),!1===L&&(v.strong=!1),_}else if(" "===U&&(S.eat("*")||S.eat("_"))){if(" "===S.peek())return se(v);S.backUp(1)}if(G.strikethrough)if("~"===U&&S.eatWhile(U)){if(v.strikethrough)return G.highlightFormatting&&(v.formatting="strikethrough"),_=se(v),v.strikethrough=!1,_;if(S.match(/^[^\s]/,!1))return v.strikethrough=!0,G.highlightFormatting&&(v.formatting="strikethrough"),se(v)}else if(" "===U&&S.match("~~",!0)){if(" "===S.peek())return se(v);S.backUp(2)}if(G.emoji&&":"===U&&S.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){v.emoji=!0,G.highlightFormatting&&(v.formatting="emoji");var R=se(v);return v.emoji=!1,R}return" "===U&&(S.match(/^ +$/,!1)?v.trailingSpace++:v.trailingSpace&&(v.trailingSpaceNewLine=!0)),se(v)}function ee(S,v){if(">"===S.next()){v.f=v.inline=T,G.highlightFormatting&&(v.formatting="link");var be=se(v);return be?be+=" ":be="",be+B.linkInline}return S.match(/^[^>]+/,!0),B.linkInline}function x(S,v){if(S.eatSpace())return null;var V=S.next();return"("===V||"["===V?(v.f=v.inline=function P(S){return function(v,V){if(v.next()===S){V.f=V.inline=T,G.highlightFormatting&&(V.formatting="link-string");var U=se(V);return V.linkHref=!1,U}return v.match(q[S]),V.linkHref=!0,se(V)}}("("===V?")":"]"),G.highlightFormatting&&(v.formatting="link-string"),v.linkHref=!0,se(v)):"error"}var q={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function te(S,v){return S.match(/^([^\]\\]|\\.)*\]:/,!1)?(v.f=J,S.next(),G.highlightFormatting&&(v.formatting="link"),v.linkText=!0,se(v)):jt(S,v,T)}function J(S,v){if(S.match("]:",!0)){v.f=v.inline=nt,G.highlightFormatting&&(v.formatting="link");var V=se(v);return v.linkText=!1,V}return S.match(/^([^\]\\]|\\.)+/,!0),B.linkText}function nt(S,v){return S.eatSpace()?null:(S.match(/^[^\s]+/,!0),void 0===S.peek()?v.linkTitle=!0:S.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),v.f=v.inline=T,B.linkHref+" url")}var gt={startState:function(){return{f:vt,prevLine:{stream:null},thisLine:{stream:null},block:vt,htmlState:null,indentation:0,inline:T,text:Je,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(S){return{f:S.f,prevLine:S.prevLine,thisLine:S.thisLine,block:S.block,htmlState:S.htmlState&&j.copyState(ue,S.htmlState),indentation:S.indentation,localMode:S.localMode,localState:S.localMode?j.copyState(S.localMode,S.localState):null,inline:S.inline,text:S.text,formatting:!1,linkText:S.linkText,linkTitle:S.linkTitle,linkHref:S.linkHref,code:S.code,em:S.em,strong:S.strong,strikethrough:S.strikethrough,emoji:S.emoji,header:S.header,setext:S.setext,hr:S.hr,taskList:S.taskList,list:S.list,listStack:S.listStack.slice(0),quote:S.quote,indentedCode:S.indentedCode,trailingSpace:S.trailingSpace,trailingSpaceNewLine:S.trailingSpaceNewLine,md_inside:S.md_inside,fencedEndRE:S.fencedEndRE}},token:function(S,v){if(v.formatting=!1,S!=v.thisLine.stream){if(v.header=0,v.hr=!1,S.match(/^\s*$/,!0))return y(v),null;if(v.prevLine=v.thisLine,v.thisLine={stream:S},v.taskList=!1,v.trailingSpace=0,v.trailingSpaceNewLine=!1,!v.localState&&(v.f=v.block,v.f!=Pe)){var V=S.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(v.indentation=V,v.indentationDiff=null,V>0)return null}}return v.f(S,v)},innerMode:function(S){return S.block==Pe?{state:S.htmlState,mode:ue}:S.localState?{state:S.localState,mode:S.localMode}:{state:S,mode:gt}},indent:function(S,v,V){return S.block==Pe&&ue.indent?ue.indent(S.htmlState,v,V):S.localState&&S.localMode.indent?S.localMode.indent(S.localState,v,V):j.Pass},blankLine:y,getType:se,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return gt},"xml"),j.defineMIME("text/markdown","markdown"),j.defineMIME("text/x-markdown","markdown")}(xe(8266),xe(7684),xe(8834))},8834:(hi,pt,xe)=>{!function(j){"use strict";j.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var Ye=0;Ye<j.modeInfo.length;Ye++){var G=j.modeInfo[Ye];G.mimes&&(G.mime=G.mimes[0])}j.findModeByMIME=function(ue){ue=ue.toLowerCase();for(var $=0;$<j.modeInfo.length;$++){var K=j.modeInfo[$];if(K.mime==ue)return K;if(K.mimes)for(var B=0;B<K.mimes.length;B++)if(K.mimes[B]==ue)return K}return/\+xml$/.test(ue)?j.findModeByMIME("application/xml"):/\+json$/.test(ue)?j.findModeByMIME("application/json"):void 0},j.findModeByExtension=function(ue){ue=ue.toLowerCase();for(var $=0;$<j.modeInfo.length;$++){var K=j.modeInfo[$];if(K.ext)for(var B=0;B<K.ext.length;B++)if(K.ext[B]==ue)return K}},j.findModeByFileName=function(ue){for(var $=0;$<j.modeInfo.length;$++){var K=j.modeInfo[$];if(K.file&&K.file.test(ue))return K}var B=ue.lastIndexOf("."),Le=B>-1&&ue.substring(B+1,ue.length);if(Le)return j.findModeByExtension(Le)},j.findModeByName=function(ue){ue=ue.toLowerCase();for(var $=0;$<j.modeInfo.length;$++){var K=j.modeInfo[$];if(K.name.toLowerCase()==ue)return K;if(K.alias)for(var B=0;B<K.alias.length;B++)if(K.alias[B].toLowerCase()==ue)return K}}}(xe(8266))},7684:(hi,pt,xe)=>{!function(j){"use strict";var Ye={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},G={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};j.defineMode("xml",function(ue,$){var Ue,we,K=ue.indentUnit,B={},Le=$.htmlMode?Ye:G;for(var ce in Le)B[ce]=Le[ce];for(var ce in $)B[ce]=$[ce];function de(x,q){function P(nt){return q.tokenize=nt,nt(x,q)}var te=x.next();return"<"==te?x.eat("!")?x.eat("[")?x.match("CDATA[")?P(ft("atom","]]>")):null:x.match("--")?P(ft("comment","--\x3e")):x.match("DOCTYPE",!0,!0)?(x.eatWhile(/[\w\._\-]/),P(ut(1))):null:x.eat("?")?(x.eatWhile(/[\w\._\-]/),q.tokenize=ft("meta","?>"),"meta"):(Ue=x.eat("/")?"closeTag":"openTag",q.tokenize=Se,"tag bracket"):"&"==te?(x.eat("#")?x.eat("x")?x.eatWhile(/[a-fA-F\d]/)&&x.eat(";"):x.eatWhile(/[\d]/)&&x.eat(";"):x.eatWhile(/[\w\.\-:]/)&&x.eat(";"))?"atom":"error":(x.eatWhile(/[^&<]/),null)}function Se(x,q){var P=x.next();if(">"==P||"/"==P&&x.eat(">"))return q.tokenize=de,Ue=">"==P?"endTag":"selfcloseTag","tag bracket";if("="==P)return Ue="equals",null;if("<"==P){q.tokenize=de,q.state=rt,q.tagName=q.tagStart=null;var te=q.tokenize(x,q);return te?te+" tag error":"tag error"}return/[\'\"]/.test(P)?(q.tokenize=function Xe(x){var q=function(P,te){for(;!P.eol();)if(P.next()==x){te.tokenize=Se;break}return"string"};return q.isInAttribute=!0,q}(P),q.stringStartCol=x.column(),q.tokenize(x,q)):(x.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function ft(x,q){return function(P,te){for(;!P.eol();){if(P.match(q)){te.tokenize=de;break}P.next()}return x}}function ut(x){return function(q,P){for(var te;null!=(te=q.next());){if("<"==te)return P.tokenize=ut(x+1),P.tokenize(q,P);if(">"==te){if(1==x){P.tokenize=de;break}return P.tokenize=ut(x-1),P.tokenize(q,P)}}return"meta"}}function he(x){return x&&x.toLowerCase()}function je(x,q,P){this.prev=x.context,this.tagName=q||"",this.indent=x.indented,this.startOfLine=P,(B.doNotIndent.hasOwnProperty(q)||x.context&&x.context.noIndent)&&(this.noIndent=!0)}function jt(x){x.context&&(x.context=x.context.prev)}function Jt(x,q){for(var P;;){if(!x.context||!B.contextGrabbers.hasOwnProperty(he(P=x.context.tagName))||!B.contextGrabbers[he(P)].hasOwnProperty(he(q)))return;jt(x)}}function rt(x,q,P){return"openTag"==x?(P.tagStart=q.column(),y):"closeTag"==x?vt:rt}function y(x,q,P){return"word"==x?(P.tagName=q.current(),we="tag",se):B.allowMissingTagName&&"endTag"==x?(we="tag bracket",se(x,0,P)):(we="error",y)}function vt(x,q,P){if("word"==x){var te=q.current();return P.context&&P.context.tagName!=te&&B.implicitlyClosed.hasOwnProperty(he(P.context.tagName))&&jt(P),P.context&&P.context.tagName==te||!1===B.matchClosing?(we="tag",Pe):(we="tag error",Nt)}return B.allowMissingTagName&&"endTag"==x?(we="tag bracket",Pe(x,0,P)):(we="error",Nt)}function Pe(x,q,P){return"endTag"!=x?(we="error",Pe):(jt(P),rt)}function Nt(x,q,P){return we="error",Pe(x,0,P)}function se(x,q,P){if("word"==x)return we="attribute",Je;if("endTag"==x||"selfcloseTag"==x){var te=P.tagName,J=P.tagStart;return P.tagName=P.tagStart=null,"selfcloseTag"==x||B.autoSelfClosers.hasOwnProperty(he(te))?Jt(P,te):(Jt(P,te),P.context=new je(P,te,J==P.indented)),rt}return we="error",se}function Je(x,q,P){return"equals"==x?T:(B.allowMissing||(we="error"),se(x,0,P))}function T(x,q,P){return"string"==x?ee:"word"==x&&B.allowUnquoted?(we="string",se):(we="error",se(x,0,P))}function ee(x,q,P){return"string"==x?ee:se(x,0,P)}return de.isInText=!0,{startState:function(x){var q={tokenize:de,state:rt,indented:x||0,tagName:null,tagStart:null,context:null};return null!=x&&(q.baseIndent=x),q},token:function(x,q){if(!q.tagName&&x.sol()&&(q.indented=x.indentation()),x.eatSpace())return null;Ue=null;var P=q.tokenize(x,q);return(P||Ue)&&"comment"!=P&&(we=null,q.state=q.state(Ue||P,x,q),we&&(P="error"==we?P+" error":we)),P},indent:function(x,q,P){var te=x.context;if(x.tokenize.isInAttribute)return x.tagStart==x.indented?x.stringStartCol+1:x.indented+K;if(te&&te.noIndent)return j.Pass;if(x.tokenize!=Se&&x.tokenize!=de)return P?P.match(/^(\s*)/)[0].length:0;if(x.tagName)return!1!==B.multilineTagIndentPastTag?x.tagStart+x.tagName.length+2:x.tagStart+K*(B.multilineTagIndentFactor||1);if(B.alignCDATA&&/<!\[CDATA\[/.test(q))return 0;var J=q&&/^<(\/)?([\w_:\.-]*)/.exec(q);if(J&&J[1])for(;te;){if(te.tagName==J[2]){te=te.prev;break}if(!B.implicitlyClosed.hasOwnProperty(he(te.tagName)))break;te=te.prev}else if(J)for(;te;){var nt=B.contextGrabbers[he(te.tagName)];if(!nt||!nt.hasOwnProperty(he(J[2])))break;te=te.prev}for(;te&&te.prev&&!te.startOfLine;)te=te.prev;return te?te.indent+K:x.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:B.htmlMode?"html":"xml",helperType:B.htmlMode?"html":"xml",skipAttribute:function(x){x.state==T&&(x.state=se)},xmlCurrentTag:function(x){return x.tagName?{name:x.tagName,close:"closeTag"==x.type}:null},xmlCurrentContext:function(x){for(var q=[],P=x.context;P;P=P.prev)q.push(P.tagName);return q.reverse()}}}),j.defineMIME("text/xml","xml"),j.defineMIME("application/xml","xml"),j.mimeModes.hasOwnProperty("text/html")||j.defineMIME("text/html",{name:"xml",htmlMode:!0})}(xe(8266))},6233:(hi,pt)=>{!function(){function xe(){var Ye=self;Ye.addEventListener("message",({data:G})=>{const{id:ue,input:$,version:K,command:B}=G;if("fetch-compiler-versions"===B)fetch("https://binaries.soliditylang.org/bin/list.json").then(Le=>Le.json()).then(Le=>{postMessage({id:ue,result:Le})}).catch(Le=>{postMessage({id:ue,error:Le.message})});else{Ye.importScripts(K);const Le=Ye.Module;if("_solidity_compile"in Le){const ce=Le.cwrap("solidity_compile","string",["string","number"]),Ue=JSON.parse(ce($));postMessage({id:ue,result:Ue})}}})}"object"==typeof global&&(global.Worker||(global.Worker={}),global.Worker.Module=void 0),window!==self&&xe(),pt.q=xe}()}}]);