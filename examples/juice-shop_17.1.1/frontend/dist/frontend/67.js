"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[67],{9067:(Q,x,a)=>{a.r(x),a.d(x,{FaucetModule:()=>W});var B=a(6895),d=a(4006),Z=a(6630),_=a(4550),M=a(3546),b=a(4144),y=a(4859),F=a(7009),l=a(5861),L=a(5376),g=a(328),I=a(6003),m=a(4323),h=a(5159),U=a(3037),A=a(2064),O=a(4304),f=a(9978),e=a(4650),k=a(5004),E=a(1195),w=a(9549);function H(i,u){1&i&&(e.TgZ(0,"span",2),e._uU(1,"BTN_CONNECT_METAMASK"),e.qZA())}function D(i,u){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.AsE("",t.userData.address.substring(0,6),"...",t.userData.address.slice(-6),"")}}(0,O.j)({autoConnect:!0,provider:(0,I.yl)()});const{ethereum:R}=window,N="0x41427790c94E7a592B17ad694eD9c06A02bb9C39",P="0x36435796Ca9be2bf150CE0dECc2D8Fab5C4d6E13",S="0x860e3616aD0E0dEDc23352891f3E10C4131EA5BC";let j=(()=>{class i{constructor(t,n,o,r){this.keysService=t,this.snackBarHelperService=n,this.translateService=o,this.changeDetectorRef=r,this.session=!1,this.deployedContractAddress="",this.BEEBalance=0,this.myBEEBalance=0,this.withdrawAmount=null,this.successResponse=!1,this.mintButtonDisabled=!0,this.challengeSolved=!1,this.nftMintText="Mint the Pot - 1000 BEE",this.errorMessage="",this.metamaskAddress=""}ngOnInit(){this.translateService.get("NFT_MINT_TEXT_INTRO").subscribe(t=>{this.nftMintText=t}),this.handleAuth(),this.checkNftMinted(),this.nftMintListener(),window.ethereum.on("chainChanged",this.handleChainChanged.bind(this))}nftMintListener(){this.keysService.nftMintListen().subscribe(t=>{console.log(t)},t=>{console.error(t)})}checkNftMinted(){this.keysService.checkNftMinted().subscribe(t=>{const n=t.data[0].solved;this.mintButtonDisabled=n,this.challengeSolved=n,n&&this.translateService.get("NFT_MINT_TEXT_SUCCESS").subscribe(o=>{this.nftMintText=o})},t=>{console.error(t),this.successResponse=!1})}fetchMyBeeBalance(){var t=this;return(0,l.Z)(function*(){try{const o=new m.Q(window.ethereum).getSigner(),r=new h.CH(P,g.T_,o),c=yield o.getAddress(),p=yield r.balanceOf(c);console.log(p),t.myBEEBalance=p.div(U.Ce).toNumber(),t.myBEEBalance>=1e3&&!t.challengeSolved&&(t.mintButtonDisabled=!1),t.myBEEBalance<=1e3&&!t.challengeSolved&&(t.mintButtonDisabled=!0)}catch(n){console.error("Error fetching BEE balance:",n)}})()}fetchBeeBalance(){var t=this;return(0,l.Z)(function*(){try{const o=new m.Q(window.ethereum).getSigner(),c=yield new h.CH(S,g.dj,o).balance();console.log(c),t.BEEBalance=c}catch(n){console.error("Error fetching BEE balance:",n)}})()}handleChainChanged(t){var n=this;return(0,l.Z)(function*(){yield n.handleAuth()})()}handleAuth(){var t=this;return(0,l.Z)(function*(){try{const{isConnected:n}=(0,f.D0)();if(n&&(yield(0,f.zP)()),!window.ethereum)return void t.snackBarHelperService.open("PLEASE_INSTALL_WEB3_WALLET","errorBar");const o=yield(0,f.$j)({connector:new O.I});t.metamaskAddress=o.account,t.userData={address:o.account,chain:o.chain.id,network:"evm"},yield R.request({method:"wallet_addEthereumChain",params:[{chainId:"0xaa36a7",chainName:"Sepolia Test Network",nativeCurrency:{name:"SepoliaETH",symbol:"ETH",decimals:18},rpcUrls:["https://ethereum-sepolia.blockpi.network/v1/rpc/public"],blockExplorerUrls:["https://sepolia.etherscan.io/"]}]});const r="11155111",c=String(o.chain?.id);o&&c!==r?(t.session=!1,t.snackBarHelperService.open("PLEASE_CONNECT_TO_SEPOLIA_NETWORK","errorBar")):(console.log("Should show ethereum chain now"),t.session=!0,yield t.fetchBeeBalance(),yield t.fetchMyBeeBalance()),console.log("session",t.session),t.changeDetectorRef.detectChanges()}catch(n){console.log(n)}})()}extractBEETokens(t=this.withdrawAmount){var n=this;return(0,l.Z)(function*(){if(n.session)try{const o=new m.Q(window.ethereum),r=o.getSigner(),c=yield r.getAddress(),p=yield o.getBalance(c),T=A.formatEther(p);if(console.log("ETH balance:",T,typeof T),T<"0.001")return void(n.errorMessage="Deposit some test ETH from sepoliafaucet.com or any other ETH faucet to initiate transaction.");yield(yield new h.CH(S,g.dj,r).withdraw(t)).wait(),console.log("BEE tokens extracted successfully"),n.fetchBeeBalance(),n.fetchMyBeeBalance()}catch(o){console.error("Error extracting BEEs:",o.message),n.errorMessage=o.message}else n.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}mintNFT(){var t=this;return(0,l.Z)(function*(){if(t.session){t.translateService.get("NFT_MINT_TEXT_AWAITING_APPROVAL").subscribe(n=>{t.nftMintText=n});try{const o=new m.Q(window.ethereum).getSigner(),r=A.parseUnits("1000","18");yield(yield new h.CH(P,g.T_,o).approve(N,r)).wait(),t.translateService.get("NFT_MINT_TEXT_CONFIRM").subscribe(s=>{t.nftMintText=s});const C=yield new h.CH(N,g.vn,o).mintNFT();console.log(C),t.translateService.get("NFT_MINT_TEXT_IN_PROGRESS").subscribe(s=>{t.nftMintText=s});const v=yield C.wait();console.log(v),v&&(t.translateService.get("NFT_MINT_TEXT_SUCCESS").subscribe(s=>{t.nftMintText=s}),setTimeout(()=>{t.keysService.verifyNFTWallet(t.metamaskAddress).subscribe(s=>{s.success&&(t.successResponse=s.status,t.mintButtonDisabled=!0)},s=>{console.error(s),t.successResponse=!1})},3500)),console.log("NFT minted successfully!")}catch(n){console.error("Error minting NFT:",n)}}else t.snackBarHelperService.open("PLEASE_CONNECT_WEB3_WALLET","errorBar")})()}signOut(){var t=this;return(0,l.Z)(function*(){yield(0,f.zP)(),t.session=!1})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L.t),e.Y36(k.H),e.Y36(E.sK),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-faucet"]],decls:44,vars:20,consts:[[1,"container"],[1,"mat-elevation-z6","faucet-container"],["translate",""],[1,"faucet-image"],["src","assets/public/images/BeeOwner.png"],[1,"faucet-balance"],["color","accent"],[1,"metamask-button"],["mat-raised-button","","color","accent","type","button",3,"click"],[1,"material-icons"],["translate","",4,"ngIf"],[4,"ngIf"],[1,"withdraw-container"],["color","accent","appearance","outline",2,"width","100%"],["matInput","","type","number","id","withdrawAmount","aria-label","Text field for the withdrawal amount",3,"placeholder","ngModel","ngModelChange"],[1,"error"],["mat-raised-button","","type","button","color","primary",3,"click"],[1,"mat-elevation-z6","honeypot-container"],[1,"honeypot-image","mat-elevation-z6"],["src","assets/public/images/HoneyPot.png"],["mat-raised-button","","color","warn","fxFlexAlign","center",1,"mint_button",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"h1",2),e._uU(3,"TITLE_BEE_HAVEN"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"img",4),e.qZA(),e.TgZ(6,"p",2),e._uU(7,"BEE_HAVEN_INTRO"),e.qZA(),e.TgZ(8,"div",5)(9,"span",6),e._uU(10),e.ALo(11,"translate"),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",7)(14,"button",8),e.NdJ("click",function(){return n.handleAuth()}),e.TgZ(15,"i",9),e._uU(16," account_balance_wallet "),e.qZA(),e.YNc(17,H,2,0,"span",10),e.YNc(18,D,2,2,"span",11),e.qZA()()(),e.TgZ(19,"div",12)(20,"div")(21,"mat-form-field",13)(22,"mat-label",2),e._uU(23,"LABEL_NUMBER_OF_BEES"),e.qZA(),e.TgZ(24,"input",14),e.NdJ("ngModelChange",function(r){return n.withdrawAmount=r}),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"h5",15),e._uU(27),e.qZA()(),e.TgZ(28,"button",16),e.NdJ("click",function(){return n.extractBEETokens()}),e.TgZ(29,"i",9),e._uU(30," emoji_nature "),e.qZA(),e._uU(31),e.ALo(32,"translate"),e.qZA()()(),e.TgZ(33,"mat-card",17)(34,"div",18),e._UZ(35,"img",19),e.qZA(),e.TgZ(36,"h2",2),e._uU(37,"BEE_HONEYPOT_TITLE"),e.qZA(),e.TgZ(38,"p",2),e._uU(39,"BEE_HONEYPOT_DESCRIPTION"),e.qZA(),e.TgZ(40,"button",20),e.NdJ("click",function(){return n.mintNFT()}),e.TgZ(41,"i",9),e._uU(42," image "),e.qZA(),e._uU(43),e.qZA()()()),2&t&&(e.xp6(10),e.HOy(" ",e.lcZ(11,12,"FAUCET_BALANCE"),": ",n.BEEBalance," | ",e.lcZ(12,14,"BEE_BALANCE"),": ",n.myBEEBalance,""),e.xp6(7),e.Q6J("ngIf",!n.session),e.xp6(1),e.Q6J("ngIf",n.session),e.xp6(6),e.Q6J("placeholder",e.lcZ(25,16,"LABEL_NUMBER_OF_BEES"))("ngModel",n.withdrawAmount),e.xp6(3),e.Oqu(n.errorMessage),e.xp6(4),e.hij(" ",e.lcZ(32,18,"BTN_CLAIM_BEES")," "),e.xp6(9),e.Q6J("disabled",n.mintButtonDisabled),e.xp6(3),e.hij(" ",n.nftMintText," "))},dependencies:[B.O5,E.Pi,d.Fj,d.wV,d.JJ,d.On,y.lW,M.a8,w.KE,w.hX,b.Nt,E.X$],styles:[".container[_ngcontent-%COMP%]{display:flex;grid-gap:40px;margin:0 40px}.faucet-container[_ngcontent-%COMP%]{padding:40px 80px}.faucet-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.faucet-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;margin:0;text-align:center}.faucet-balance[_ngcontent-%COMP%]{align-items:center;border:1px solid #7b7b7b;border-radius:10px;display:flex;font-size:18px;justify-content:center;margin:20px 0;padding:8px;text-align:center;width:100%}.faucet-balance[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1;text-align:center}.faucet-image[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:16px}.faucet-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px}.metamask-button[_ngcontent-%COMP%]{margin:16px 16px 16px auto}.metamask-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 6px;width:220px}.withdraw-container[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;gap:20px;width:100%}.withdraw-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex-direction:column;width:100%}.withdraw-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:10px;font-weight:500;justify-self:end;margin-top:-20px;padding:16px 24px;width:300px}.honeypot-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px 80px;text-align:center;width:35%}.honeypot-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:700}.honeypot-image[_ngcontent-%COMP%]{height:320px;margin:0 auto 16px;width:320px}.honeypot-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;margin:10px}.mint_button[_ngcontent-%COMP%]{border-radius:10px;font-weight:500;margin-top:32px;padding:16px 48px}@media (max-width: 1100px){.container[_ngcontent-%COMP%]{flex-direction:column}.honeypot-container[_ngcontent-%COMP%]{margin-bottom:40px;width:auto}.faucet-balance[_ngcontent-%COMP%]{flex-direction:column;padding:24px 0}.metamask-button[_ngcontent-%COMP%]{margin:16px auto auto}}@media (max-width: 580px){.faucet-container[_ngcontent-%COMP%], .honeypot-container[_ngcontent-%COMP%]{padding:30px}.honeypot-image[_ngcontent-%COMP%]{height:240px;width:240px}.honeypot-image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:220px;width:220px}}"]}),i})();var X=a(8184);const J=[{path:"",component:j}];let W=(()=>{class i{constructor(t,n){this.configurationService=t,this.overlayContainer=n,t.getApplicationConfiguration().subscribe(o=>{n.getContainerElement().classList.add(o.application.theme+"-theme")})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_.e),e.LFG(X.Xj))},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[B.ez,Z.Bz.forChild(J),E.aw,d.u5,d.UX,y.ot,M.QW,b.c,F.ZX]}),i})()}}]);